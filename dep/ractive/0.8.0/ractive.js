!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):function(){var n=t.Ractive,i=e();return i.noConflict=function(){return t.Ractive=n,i},t.Ractive=i}()}(this,function(){"use strict";function t(){}function e(){return ps.createDocumentFragment()}function n(t){var e;if(t&&"boolean"!=typeof t){if(!cs||!ps||!t)return null;if(t.nodeType)return t;if("string"==typeof t){if(e=ps.getElementById(t),!e&&ps.querySelector)e=ps.querySelector(t);if(e&&e.nodeType)return e}if(t[0]&&t[0].nodeType)return t[0];else return null}}function i(t){if(t&&"unknown"!=typeof t.parentNode&&t.parentNode)t.parentNode.removeChild(t);return t}function r(t){return null==t||!t.toString?"":""+t}function o(t){return r(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function s(t){return t.replace(Ls,function(t){return t.charAt(1).toUpperCase()})}function a(t){return t.replace(Ds,function(t){return"-"+t.toLowerCase()})}function u(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];var i;return e.forEach(function(e){for(i in e)if(qs.call(e,i))t[i]=e[i]}),t}function h(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];return e.forEach(function(e){for(var n in e)if(qs.call(e,n)&&!(n in t))t[n]=e[n]}),t}function f(t){return"[object Array]"===Zs.call(t)}function l(t,e){if(null===t&&null===e)return!0;if("object"==typeof t||"object"==typeof e)return!1;else return t===e}function c(t){return!isNaN(parseFloat(t))&&isFinite(t)}function p(t){return t&&"[object Object]"===Zs.call(t)}function d(t,e){return t.replace(/%s/g,function(){return e.shift()})}function m(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];throw t=d(t,e),new Error(t)}function g(){if(us.DEBUG)Us.apply(null,arguments)}function v(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];t=d(t,e),zs(t,e)}function y(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];if(t=d(t,e),!Hs[t])Hs[t]=!0,zs(t,e)}function b(){if(us.DEBUG)v.apply(null,arguments)}function w(){if(us.DEBUG)y.apply(null,arguments)}function k(t,e,n){var i=x(t,e,n);return i?i[t][n]:null}function x(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function E(t,e,n,i){if(t===e)return null;if(i){var r=k("interpolators",n,i);if(r)return r(t,e)||null;m(Xs(i,"interpolator"))}return ta.number(t,e)||ta.array(t,e)||ta.object(t,e)||null}function _(t){return function(){return t}}function O(t,e){var n=t.indexOf(e);if(-1===n)t.push(e)}function A(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function S(t,e){var n;if(!f(t)||!f(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function j(t){if("string"==typeof t)return[t];if(void 0===t)return[];else return t}function C(t){return t[t.length-1]}function T(t,e){if(t){var n=t.indexOf(e);if(-1!==n)t.splice(n,1)}}function F(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function N(t){setTimeout(t,0)}function P(t,e){return function(){for(var n;n=t.shift();)n(e)}}function B(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof ia)e.then(n,i);else if(e&&("object"==typeof e||"function"==typeof e)){try{r=e.then}catch(o){return void i(o)}if("function"==typeof r){var s,a,u;a=function(e){if(!s)s=!0,B(t,e,n,i)},u=function(t){if(!s)s=!0,i(t)};try{r.call(e,a,u)}catch(o){if(!s)return i(o),void(s=!0)}}else n(e)}else n(e)}function I(t){t.detach()}function K(t){t.detachNodes()}function R(t){if(t.ready&&!t.outros.length&&!t.outroChildren){if(!t.outrosComplete)if(t.outrosComplete=!0,t.parent&&!t.parent.outrosComplete)t.parent.decrementOutros(t);else t.detachNodes();if(!t.intros.length&&!t.totalChildren){if("function"==typeof t.callback)t.callback();if(t.parent&&!t.notifiedTotal)t.notifiedTotal=!0,t.parent.decrementTotal()}}}function V(t){var e,n,i=t.detachQueue,r=M(t),o=i.length,s=0;t:for(;o--;){for(e=i[o].node,s=r.length;s--;)if(n=r[s].element.node,n===e||n.contains(e)||e.contains(n))continue t;i[o].detach(),i.splice(o,1)}}function M(t,e){if(!e){e=[];for(var n=t;n.parent;)n=n.parent;return M(n,e)}else{for(var i=t.children.length;i--;)e=M(t.children[i],e);return e=e.concat(t.outros)}}function L(t){t.dispatch()}function D(){var t=ha.immediateObservers;ha.immediateObservers=[],t.forEach(L);var e,n=ha.fragments.length;t=ha.fragments,ha.fragments=[];var i=ha.ractives;for(ha.ractives=[];n--;){e=t[n];var r=e.ractive;fa.fire(r,r.viewmodel.changes),r.viewmodel.changes={},T(i,r),e.update()}for(n=i.length;n--;){var o=i[n];fa.fire(o,o.viewmodel.changes),o.viewmodel.changes={}}ha.transitionManager.ready(),t=ha.deferredObservers,ha.deferredObservers=[],t.forEach(L);var s=ha.tasks;for(ha.tasks=[],n=0;n<s.length;n+=1)s[n]();if(ha.fragments.length||ha.immediateObservers.length||ha.deferredObservers.length||ha.ractives.length)return D();else return void 0}function W(t){if("string"==typeof t)return t.replace(da,"\\$&");else return t}function U(t){return t?t.replace(ca,".$1"):""}function z(t){var e,n=[];for(t=U(t);e=pa.exec(t);){var i=e.index+e[1].length;n.push(t.substr(0,i)),t=t.substr(i+1)}return n.push(t),n}function $(t){if("string"==typeof t)return t.replace(ma,"$1$2");else return t}function q(t,e){if(!/this/.test(t.toString()))return t;var n=t.bind(e);for(var i in t)n[i]=t[i];return n}function Z(t,e){for(var n=la.start(t,!0),i=e.length;i--;){var r=e[i],o=r[0],s=r[1];if("function"==typeof s)s=q(s,t);o.set(s)}return la.end(),n}function H(t,e,n){if(void 0===n)n=t.viewmodel;if(ga.test(e))return n.findMatches(z(e));else return[n.joinAll(z(e))]}function Q(t,e,n){var i=[];if(p(e)){var r=function(n){if(e.hasOwnProperty(n))i.push.apply(i,H(t,n).map(function(t){return[t,e[n]]}))};for(var o in e)r(o)}else i.push.apply(i,H(t,e).map(function(t){return[t,n]}));return i}function Y(t,e,n){if("string"!=typeof e||!c(n))throw new Error("Bad arguments");var i=Q(t,e,n);return Z(t,i.map(function(t){var e=t[0],n=t[1],i=e.get();if(!c(n)||!c(i))throw new Error(va);return[e,i+n]}))}function G(t,e){return Y(this,t,void 0===e?1:+e)}function J(e,n){e=e||{};var i;if(e.easing)i="function"==typeof e.easing?e.easing:n.easing[e.easing];return{easing:i||ba,duration:"duration"in e?e.duration:400,complete:e.complete||t,step:e.step||t}}function X(t,e,n,i){i=J(i,t);var r=e.get();if(l(r,n))return i.complete(i.to),ya;var o=E(r,n,t,i.interpolator);if(!o)return la.start(),e.set(n),la.end(),ya;else return e.animate(r,n,i,o)}function tt(t,e,n){if("object"==typeof t){var i=Object.keys(t);throw new Error("ractive.animate(...) no longer supports objects. Instead of ractive.animate({\n  "+i.map(function(e){return"'"+e+"': "+t[e]}).join("\n  ")+"\n}, {...}), do\n\n"+i.map(function(e){return"ractive.animate('"+e+"', "+t[e]+", {...});"}).join("\n")+"\n")}return X(this,this.viewmodel.joinAll(z(t)),e,n)}function et(){if(this.isDetached)return this.el;if(this.el)T(this.el.__ractive_instances__,this);return this.el=this.fragment.detach(),this.isDetached=!0,wa.fire(this),this.el}function nt(t){if(!this.el)throw new Error("Cannot call ractive.find('"+t+"') unless instance is rendered to the DOM");return this.fragment.find(t)}function it(t,e){if(t.compareDocumentPosition){var n=t.compareDocumentPosition(e);return 2&n?1:-1}return rt(t,e)}function rt(t,e){for(var n,i=st(t.component||t._ractive.proxy),r=st(e.component||e._ractive.proxy),o=C(i),s=C(r);o&&o===s;)i.pop(),r.pop(),n=o,o=C(i),s=C(r);o=o.component||o,s=s.component||s;var a=o.parentFragment,u=s.parentFragment;if(a===u){var h=a.items.indexOf(o),f=u.items.indexOf(s);return h-f||i.length-r.length}var l=n.iterations;if(l){var c=l.indexOf(a),p=l.indexOf(u);return c-p||i.length-r.length}throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/ractivejs/ractive/issues - thanks!")}function ot(t){var e=t.parentFragment;if(e)return e.owner;if(t.component&&(e=t.component.parentFragment))return e.owner;else return void 0}function st(t){for(var e=[t],n=ot(t);n;)e.push(n),n=ot(n);return e}function at(t,e){if(!this.el)throw new Error("Cannot call ractive.findAll('"+t+"', ...) unless instance is rendered to the DOM");e=e||{};var n=this._liveQueries,i=n[t];if(i)return e&&e.live?i:i.slice();if(i=new ka(this,t,!!e.live,!1),i.live)n.push(t),n["_"+t]=i;return this.fragment.findAll(t,i),i.init(),i.result}function ut(t,e){e=e||{};var n=this._liveComponentQueries,i=n[t];if(i)return e&&e.live?i:i.slice();if(i=new ka(this,t,!!e.live,!0),i.live)n.push(t),n["_"+t]=i;return this.fragment.findAllComponents(t,i),i.init(),i.result}function ht(t){return this.fragment.findComponent(t)}function ft(t){if(this.container)if(this.container.component&&this.container.component.name===t)return this.container;else return this.container.findContainer(t);return null}function lt(t){if(this.parent)if(this.parent.component&&this.parent.component.name===t)return this.parent;else return this.parent.findParent(t);return null}function ct(t,e){if(t.event)t._eventQueue.push(t.event);t.event=e}function pt(t){if(t._eventQueue.length)t.event=t._eventQueue.pop();else t.event=null}function dt(t){var e,n,i,r,o,s;if(e=z(t),!(n=Ea[e.length]))n=mt(e.length);for(o=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)if(s=n[r].map(i).join("."),!o.hasOwnProperty(s))o.push(s),o[s]=!0;return o}function mt(t){var e,n,i,r,o,s,a,u,h="";if(!Ea[t]){for(i=[];h.length<t;)h+=1;for(e=parseInt(h,2),r=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;for(u=[],a=n.length,s=0;a>s;s++)u.push(r(n[s]));i[o]=u}Ea[t]=i}return Ea[t]}function gt(t,e,n){if(void 0===n)n={};if(e){if(!n.event)n.event={name:e,_noArg:!0};else n.event.name=e;var i=vt(e);return yt(t,i,n.event,n.args,!0)}}function vt(t){if(_a.hasOwnProperty(t))return _a[t];else return _a[t]=dt(t)}function yt(t,e,n,i,r){if(void 0===r)r=!1;var o,s,a=!0;for(ct(t,n),s=e.length;s>=0;s--)if(o=t._subs[e[s]])a=bt(t,o,n,i)&&a;if(pt(t),t.parent&&a){if(r&&t.component){var u=t.component.name+"."+e[e.length-1];if(e=vt(u),n&&!n.component)n.component=t}yt(t.parent,e,n,i)}return a}function bt(t,e,n,i){var r=null,o=!1;if(n&&!n._noArg)i=[n].concat(i);e=e.slice();for(var s=0,a=e.length;a>s;s+=1)if(e[s].apply(t,i)===!1)o=!0;if(n&&!n._noArg&&o&&(r=n.original))r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation();return!o}function wt(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];return gt(this,t,{args:e})}function kt(t){throw new Error("An index or key reference ("+t+") cannot have child properties")}function xt(t,e){for(var n,i,r,o=t.findContext().root,s=z(e),a=s[0];t;){if(t.isIteration){if(a===t.parent.keyRef){if(s.length>1)kt(a);return t.context.getKeyModel(t.key)}if(a===t.parent.indexRef){if(s.length>1)kt(a);return t.context.getKeyModel(t.index)}}if(((r=t.owner.aliases)||(r=t.aliases))&&r.hasOwnProperty(a)){var u=r[a];if(1===s.length)return u;else if("function"==typeof u.joinAll)return u.joinAll(s.slice(1))}if(t.context){if(!t.isRoot||t.ractive.component)n=!0;if(t.context.has(a))if(i)return o.createLink(a,t.context.joinKey(s.shift()),a).joinAll(s);else return t.context.joinAll(s)}if(t.componentParent&&!t.ractive.isolated)t=t.componentParent,i=!0;else t=t.parent}if(!n)return o.joinAll(s);else return void 0}function Et(){Oa.push(xa=[])}function _t(){var t=Oa.pop();return xa=Oa[Oa.length-1],t}function Ot(t){if(xa)xa.push(t)}function At(t){t.bind()}function St(t){t.cancel()}function jt(t){t.handleChange()}function Ct(t){t.mark()}function Tt(t){t.marked()}function Ft(t){t.render()}function Nt(t){t.teardown()}function Pt(t){t.unbind()}function Bt(t){t.unrender()}function It(t){t.unrender(!0)}function Kt(t){t.update()}function Rt(t){return t.toString()}function Vt(t){return t.toString(!0)}function Mt(t){t.updateFromBindings(!0)}function Lt(t){for(var e=t.length;e--;)if(t[e].bound){var n=t[e].owner;if(n){var i="checked"===n.name?n.node.checked:n.node.value;return{value:i}}}}function Dt(t){if(!t)Dt("early"),Dt("mark");else{var e=Ca[t];Ca[t]=[];for(var n=e.length;n--;)e[n]();var i=Ta[t];for(Ta[t]=[],n=i.length;n--;)i[n].model.register(i[n].item)}}function Wt(t,e,n){var i=t.r||t;if(!i||"string"!=typeof i)return e;if("."===i||"@"===i[0]||(e||n).isKey||(e||n).isKeypath)return e;for(var r=i.split("/"),o=z(r[r.length-1]),s=e||n,a=o.length,u=!0,h=!1;s&&a--;){if(s.shuffling)h=!0;if(o[a]!=s.key)u=!1;s=s.parent}if(!e&&u&&h)return n;else if(e&&!u&&h)return n;else return e}function Ut(){la.start();var t,e,n=Ia();for(t=0;t<Ka.length;t+=1)if(e=Ka[t],!e.tick(n))Ka.splice(t--,1);if(la.end(),Ka.length)Ba(Ut);else Ra=!1}function zt(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)if(t.hasOwnProperty(n))i[e+n]=t[n];return i}function $t(t){var e;if(!Ma[t])e=t?t+".":"",Ma[t]=function(n,i){var r;if("string"==typeof n)return r={},r[e+n]=i,r;if("object"==typeof n)return e?zt(n,t):n;else return void 0};return Ma[t]}function qt(t){for(var e=[],n=0;n<t.length;n++)e[n]=(t.childByKey[n]||{}).value;return e}function Zt(t,e){var n=t.findContext();if("."===e||"this"===e)return n;if(0===e.indexOf("@keypath")){var i=Ua.exec(e);if(i&&i[1]){var r=Zt(t,i[1]);if(r)return r.getKeypathModel()}return n.getKeypathModel()}if(0===e.indexOf("@rootpath")){for(;n.isRoot&&n.ractive.component;)n=n.ractive.component.parentFragment.findContext();var o=Ua.exec(e);if(o&&o[1]){var s=Zt(t,o[1]);if(s)return s.getKeypathModel(t.ractive.root)}return n.getKeypathModel(t.ractive.root)}if("@index"===e||"@key"===e){var a=t.findRepeatingFragment();if(!a.isIteration)return;return a.context.getKeyModel(a["i"===e[1]?"index":"key"])}if("@this"===e)return t.ractive.viewmodel.getRactiveModel();if("@global"===e)return Wa;if("~"===e[0])return t.ractive.viewmodel.joinAll(z(e.slice(2)));if("."===e[0]){for(var u=e.split("/");"."===u[0]||".."===u[0];){var h=u.shift();if(".."===h)n=n.parent}if(e=u.join("/"),"."===e[0])e=e.slice(1);return n.joinAll(z(e))}return xt(t,e)}function Ht(t,e){if("string"!=typeof t)return this.viewmodel.get(!0,t);var n,i=z(t),r=i[0];if(!this.viewmodel.has(r))if(this.component&&!this.isolated)if(n=Zt(this.component.parentFragment,r))this.viewmodel.map(r,n);return n=this.viewmodel.joinAll(i),n.get(!0,e)}function Qt(t){for(var e={},n={};t;){if(t.parent&&(t.parent.indexRef||t.parent.keyRef)){var i=t.parent.indexRef;if(i&&!(i in n))n[i]=t.index;if(i=t.parent.keyRef,i&&!(i in e))e[i]=t.key}if(t.componentParent&&!t.ractive.isolated)t=t.componentParent;else t=t.parent}return{key:e,index:n}}function Yt(t,e,n){var i,r,o,s,a,u=[];if(i=Gt(t,e,n),!i)return null;for(s=i.length-2-i[1],r=Math.min(t,i[0]),o=r+i[1],u.startIndex=r,a=0;r>a;a+=1)u.push(a);for(;o>a;a+=1)u.push(-1);for(;t>a;a+=1)u.push(a+s);if(0!==s)u.touchedFrom=i[0];else u.touchedFrom=t;return u}function Gt(t,e,n){switch(e){case"splice":if(void 0!==n[0]&&n[0]<0)n[0]=t+Math.max(n[0],-t);if(void 0===n[0])n[0]=0;for(;n.length<2;)n.push(t-n[0]);if("number"!=typeof n[1])n[1]=t-n[0];return n[1]=Math.min(n[1],t-n[0]),n;case"sort":case"reverse":return null;case"pop":if(t)return[t-1,1];else return[0,0];case"push":return[t,0].concat(n);case"shift":return[0,t?1:0];case"unshift":return[0,0].concat(n)}}function Jt(t){function e(t){for(var e=[],i=arguments.length-1;i-->0;)e[i]=arguments[i+1];return n(this.viewmodel.joinAll(z(t)),e)}function n(e,n){var i=e.get();if(!f(i))if(void 0===i){i=[];var r=za[t].apply(i,n),o=la.start(this,!0).then(function(){return r});return e.set(i),la.end(),o}else throw new Error("shuffle array method "+t+" called on non-array at "+e.getKeypath());var s=Yt(i.length,t,n),a=za[t].apply(i,n),u=la.start(this,!0).then(function(){return a});if(u.result=a,s)e.shuffle(s);else e.set(a);return la.end(),u}return{path:e,model:n}}function Xt(t){if(!t)return null;if(t===!0)return JSON.stringify;if("function"==typeof t)return t;if("string"==typeof t)return $a[t]||($a[t]=function(e){return e[t]});throw new Error("If supplied, options.compare must be a string, function, or `true`")}function te(t,e,n,i){var r=la.start(t,!0),o=e.get();if(!f(o)||!f(n))throw new Error("You cannot merge an array with a non-array");var s=Xt(i&&i.compare);return e.merge(n,s),la.end(),r}function ee(t,e,n){return te(this,this.viewmodel.joinAll(z(t)),e,n)}function ne(t,e){if(e.parent&&e.parent.wrapper)return ne(t,e.parent);var n=la.start(t,!0);if(e.mark(),e.registerChange(e.getKeypath(),e.get()),!e.isRoot)for(var i=e.parent,r=e.key;i&&!i.isRoot;){if(i.clearUnresolveds)i.clearUnresolveds(r);r=i.key,i=i.parent}return e.notifyUpstream(),la.end(),qa.fire(t,e),n}function ie(t){if(t)t=z(t);return ne(this,t?this.viewmodel.joinAll(t):this.viewmodel)}function re(t,e,n){var i=[];if(p(e)){for(var r in e)if(e.hasOwnProperty(r))i.push([ae(t,r).model,e[r]])}else i.push([ae(t,e).model,n]);return i}function oe(t){if(!t)return this._element.parentFragment.findContext().get(!0);var e=Zt(this._element.parentFragment,t);return e?e.get(!0):void 0}function se(t,e){var n=ae(this,t),i=n.model,r=n.instance;return i?i.getKeypath(e||r):t}function ae(t,e){var n=t._element.parentFragment;if("string"!=typeof e)return{model:n.findContext(),instance:e};else return{model:Zt(n,e),instance:n.ractive}}function ue(t,e){if(void 0===e)e=1;if(!c(e))throw new Error("Bad arguments");return Z(this.ractive,re(this,t,e).map(function(t){var e=t[0],n=t[1],i=e.get();if(!c(n)||!c(i))throw new Error("Cannot add non-numeric value");return[e,i+n]}))}function he(t,e,n){var i=ae(this,t).model;return X(this.ractive,i,e,n)}function fe(t,e){var n=ae(this,t).model,i=ae(this,e).model,r=la.start(this.ractive,!0);return i.link(n,t),la.end(),r}function le(t,e,n){return te(this.ractive,ae(this,t).model,e,n)}function ce(t){return Ha(ae(this,t).model,[])}function pe(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];return Za(ae(this,t).model,e)}function de(t){return Xa(ae(this,t).model,[])}function me(t,e){return Z(this.ractive,re(this,t,e))}function ge(t){return Qa(ae(this,t).model,[])}function ve(t,e,n){for(var i=[],r=arguments.length-3;r-->0;)i[r]=arguments[r+3];return i.unshift(e,n),Ja(ae(this,t).model,i)}function ye(t){return Ga(ae(this,t).model,[])}function be(t,e){if(void 0===e)e=1;if(!c(e))throw new Error("Bad arguments");return Z(this.ractive,re(this,t,e).map(function(t){var e=t[0],n=t[1],i=e.get();if(!c(n)||!c(i))throw new Error("Cannot add non-numeric value");return[e,i-n]}))}function we(t){var e=ae(this,t),n=e.model;return Z(this.ractive,[[n,!n.get()]])}function ke(t){var e=ae(this,t).model,n=la.start(this.ractive,!0);if(e.owner&&e.owner._link)e.owner.unlink();return la.end(),n}function xe(t){for(var e=[],n=arguments.length-1;n-->0;)e[n]=arguments[n+1];return Ya(ae(this,t).model,e)}function Ee(t){return ne(this.ractive,ae(this,t).model)}function _e(t,e){var n=ae(this,t),i=n.model,r=la.start(this.ractive,!0);return i.updateFromBindings(e),la.end(),r}function Oe(){var t=je(this),e=t.model;return!!e}function Ae(t){var e=je(this),n=e.model,i=e.instance;if(n)return n.getKeypath(t||i);else return void 0}function Se(){var t=je(this),e=t.model;if(e)return e.get(!0);else return void 0}function je(t){var e=t._element;return{model:e.binding&&e.binding.model,instance:e.parentFragment.ractive}}function Ce(t){var e=je(this),n=e.model;return Z(this.ractive,[[n,t]])}function Te(){return w("Object property keypath is deprecated, please use resolve() instead."),this.resolve()}function Fe(){return w("Object property rootpath is deprecated, please use resolve( ractive.root ) instead."),this.resolve(this.ractive.root)}function Ne(){return w("Object property context is deprecated, please use get() instead."),this.get()}function Pe(){return w('Object property index is deprecated, you can use get( "indexName" ) instead.'),Qt(this._element.parentFragment).index}function Be(){return w('Object property key is deprecated, you can use get( "keyName" ) instead.'),Qt(this._element.parentFragment).key}function Ie(t,e){return Ms(t,{_element:{value:e},ractive:{value:e.parentFragment.ractive},resolve:{value:se},get:{value:oe},add:{value:ue},animate:{value:he},link:{value:fe},merge:{value:le},pop:{value:ce},push:{value:pe},reverse:{value:de},set:{value:me},shift:{value:ge},sort:{value:ye},splice:{value:ve},subtract:{value:be},toggle:{value:we},unlink:{value:ke},unshift:{value:xe},update:{value:Ee},updateModel:{value:_e},isBound:{value:Oe},getBindingPath:{value:Ae},getBinding:{value:Se},setBinding:{value:Ce},keypath:{get:Te},rootpath:{get:Fe},context:{get:Ne},index:{get:Pe},key:{get:Be}}),t}function Ke(t){if("string"==typeof t&&tu)t=tu.call(document,t);if(!t||!t._ractive)return{};var e=t._ractive;return Ie({},e.proxy)}function Re(t){if("string"==typeof t)t=this.find(t);return Ke(t)}function Ve(t,e){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=n(t),e=n(e)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),e),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.isDetached=!1,Me(this)}function Me(t){eu.fire(t),t.findAllComponents("*").forEach(function(t){Me(t.instance)})}function Le(t,e){if(e===t||0===(t+".").indexOf(e+".")||0===(e+".").indexOf(t+"."))throw new Error("A keypath cannot be linked to itself.");var n,i=la.start(),r=z(t);if(!this.viewmodel.has(r[0])&&this.component)n=Zt(this.component.parentFragment,r[0]),n=n.joinAll(r.slice(1));return this.viewmodel.joinAll(z(e)).link(n||this.viewmodel.joinAll(r),t),la.end(),i}function De(t,e,n){var i,r=this,o=[];if(p(t))i=t,n=e||{},Object.keys(i).forEach(function(t){var e=i[t];t.split(" ").forEach(function(t){o.push(We(r,t,e,n))})});else{var s;if("function"==typeof t)n=e,e=t,s=[""];else s=t.split(" ");s.forEach(function(t){o.push(We(r,t,e,n||{}))})}return this._observers.push.apply(this._observers,o),{cancel:function(){o.forEach(function(t){T(r._observers,t),t.cancel()})}}}function We(t,e,n,i){var r=t.viewmodel,o=z(e),s=o.indexOf("*");if(i.keypath=e,!~s){var a,u=o[0];if(""!==u&&!r.has(u)){if(t.component&&!t.isolated)if(a=Zt(t.component.parentFragment,u))r.map(u,a),a=r.joinAll(o)}else a=r.joinAll(o);return new iu(t,a,n,i)}var h=0===s?r:r.joinAll(o.slice(0,s));return new ru(t,h,o.splice(s),n,i)}function Ue(t,e,n){if("string"!=typeof t)throw new Error("ractive.observeList() must be passed a string as its first argument");var i=this.viewmodel.joinAll(z(t)),r=new ou(this,i,e,n||{});return this._observers.push(r),{cancel:function(){r.cancel()}}}function ze(){return-1}function $e(t,e,n){if(p(t)||"function"==typeof t)return n=u(e||{},su),this.observe(t,n);else return n=u(n||{},su),this.observe(t,e,n)}function qe(t){return t.trim()}function Ze(t){return""!==t}function He(t,e){var n=this;if(!t)for(t in this._subs)delete this._subs[t];else{var i=t.split(" ").map(qe).filter(Ze);i.forEach(function(t){var i=n._subs[t];if(i)if(e){var r=i.indexOf(e);if(-1!==r)i.splice(r,1)}else n._subs[t]=[]})}return this}function Qe(t,e){var n=this;if("object"==typeof t){var i,r=[];for(i in t)if(t.hasOwnProperty(i))r.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=r.pop();)t.cancel()}}}var o=t.split(" ").map(qe).filter(Ze);return o.forEach(function(t){(n._subs[t]||(n._subs[t]=[])).push(e)}),{cancel:function(){return n.off(t,e)}}}function Ye(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Ge(t){fu.push(t),lu=!0}function Je(){if(ps&&lu){if(pu)cu.styleSheet.cssText=Xe(null);else cu.innerHTML=Xe(null);lu=!1}}function Xe(t){var e=t?fu.filter(function(e){return~t.indexOf(e.id)}):fu;return e.reduce(function(t,e){return""+t+"\n\n/* {"+e.id+"} */\n"+e.styles},hu)}function tn(t,e,i,r){var o=t.transitionsEnabled;if(t.noIntro)t.transitionsEnabled=!1;var s=la.start(t,!0);if(la.scheduleTask(function(){return gu.fire(t)},!0),t.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(i=n(i)||t.anchor,t.el=e,t.anchor=i,t.cssId)Je();if(e)if((e.__ractive_instances__||(e.__ractive_instances__=[])).push(t),i){var a=ps.createDocumentFragment();t.fragment.render(a),e.insertBefore(a,i)}else t.fragment.render(e,r);return la.end(),t.transitionsEnabled=o,s.then(function(){return vu.fire(t)})}function en(t,e){if(this.torndown)return b("ractive.render() was called on a Ractive instance that was already torn down"),Promise.resolve();if(t=n(t)||this.el,!this.append&&t){var i=t.__ractive_instances__;if(i)i.forEach(Nt);if(!this.enhance)t.innerHTML=""}var r=this.enhance?F(t.childNodes):null,o=tn(this,t,e,r);if(r)for(;r.length;)t.removeChild(r.pop());return o}function nn(t,e){for(var n=t.slice(),i=e.length;i--;)if(!~n.indexOf(e[i]))n.push(e[i]);return n}function rn(t){return t.trim()}function on(t){return t.str}function sn(t,e){for(var n,i=[];n=ku.exec(t);)i.push({str:n[0],base:n[1],modifiers:n[2]});for(var r=i.map(on),o=[],s=i.length;s--;){var a=r.slice(),u=i[s];a[s]=u.base+e+u.modifiers||"";var h=r.slice();h[s]=e+" "+h[s],o.push(a.join(" "),h.join(" "))}return o.join(", ")}function an(t,e){var n,i='[data-ractive-css~="{'+e+'}"]';if(Eu.test(t))n=t.replace(Eu,i);else n=t.replace(wu,"").replace(bu,function(t,e){if(xu.test(e))return t;var n=e.split(",").map(rn),r=n.map(function(t){return sn(t,i)}).join(", ")+" ";return t.replace(e,r)});return n}function un(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function hn(){return un()+un()+"-"+un()+"-"+un()+"-"+un()+"-"+un()+un()+un()}function fn(t){if(t&&t.constructor!==Object)if("function"==typeof t);else if("object"!=typeof t)m("data option must be an object or a function, `"+t+"` is not valid");else b("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")}function ln(t,e){fn(e);var n="function"==typeof t,i="function"==typeof e;if(!e&&!n)e={};if(!n&&!i)return pn(e,t);else return function(){var r=i?cn(e,this):e,o=n?cn(t,this):t;return pn(r,o)}}function cn(t,e){var n=t.call(e);if(n){if("object"!=typeof n)m("Data function must return an object");if(n.constructor!==Object)w("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged");return n}}function pn(t,e){if(t&&e){for(var n in e)if(!(n in t))t[n]=e[n];return t}return t||e}function dn(t,e){if(void 0===e)e=0;for(var n=new Array(e);e--;)n[e]="_"+e;return new Function([],"return function ("+n.join(",")+"){return("+t+");};")()}function mn(t,e){var n,i="return ("+t.replace(Su,function(t,e){return n=!0,'__ractive.get("'+e+'")'})+");";if(n)i="var __ractive = this; "+i;var r=new Function(i);return n?r.bind(e):r}function gn(t,e){if(ju[t])return ju[t];else return ju[t]=Vi(t,e)}function vn(t){if(t){var e=t.e;if(e)Object.keys(e).forEach(function(t){if(!ju[t])ju[t]=e[t]})}}function yn(t){var e,n,i;if(!t.matchString("="))return null;if(e=t.pos,t.allowWhitespace(),n=t.matchPattern(_h),!n)return t.pos=e,null;if(!t.matchPattern(Oh))return null;if(i=t.matchPattern(_h),!i)return t.pos=e,null;if(t.allowWhitespace(),!t.matchString("="))return t.pos=e,null;else return[n,i]}function bn(t){var e;if(e=t.matchPattern(Ah))return{t:nh,v:e};else return null}function wn(t){return t.replace(Sh,"\\$&")}function kn(t,e){return t.search(jh[e.join()]||(jh[e.join()]=new RegExp(e.map(wn).join("|"))))}function xn(t){return t.replace(Ph,function(t,e){var n;if("#"!==e[0])n=Fh[e];else if("x"===e[1])n=parseInt(e.substring(2),16);else n=parseInt(e.substring(1),10);if(!n)return t;else return Ih(_n(n))})}function En(t){return t.replace(Vh,"&amp;").replace(Kh,"&lt;").replace(Rh,"&gt;")}function _n(t){if(!t)return Mh;if(10===t)return 32;if(128>t)return t;if(159>=t)return Nh[t-128];if(55296>t)return t;if(57343>=t)return Mh;if(65535>=t)return t;else if(!Bh)return Mh;if(t>=65536&&131071>=t)return t;if(t>=131072&&196607>=t)return t;else return Mh}function On(t){var e;if(e=t.matchPattern(Wh))return{t:Gu,v:e};else return null}function An(t){var e=t.remaining();if("true"===e.substr(0,4))return t.pos+=4,{t:eh,v:"true"};if("false"===e.substr(0,5))return t.pos+=5,{t:eh,v:"false"};else return null}function Sn(t){return function(e){for(var n,i='"',r=!1;!r;)if(n=e.matchPattern(Tu)||e.matchPattern(Fu)||e.matchString(t))if('"'===n)i+='\\"';else if("\\'"===n)i+="'";else i+=n;else if(n=e.matchPattern(Nu))i+="\\u"+("000"+n.charCodeAt(1).toString(16)).slice(-4);else r=!0;return i+='"',JSON.parse(i)}}function jn(t){var e,n;if(e=t.pos,t.matchString('"'))if(n=qh(t),!t.matchString('"'))return t.pos=e,null;else return{t:Ju,v:n};if(t.matchString("'"))if(n=$h(t),!t.matchString("'"))return t.pos=e,null;else return{t:Ju,v:n};return null}function Cn(t){var e;if(e=jn(t))return Hh.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"';if(e=On(t))return e.v;if(e=t.matchPattern(Zh))return e;else return null}function Tn(t){var e,n,i;e=t.pos,t.allowWhitespace();var r="'"!==t.nextChar()&&'"'!==t.nextChar();if(n=Cn(t),null===n)return t.pos=e,null;if(t.allowWhitespace(),r&&(","===t.nextChar()||"}"===t.nextChar())){if(!Zh.test(n))t.error("Expected a valid reference, but found '"+n+"' instead.");return{t:rh,k:n,v:{t:oh,n:n}}}if(!t.matchString(":"))return t.pos=e,null;if(t.allowWhitespace(),i=Wn(t),null===i)return t.pos=e,null;else return{t:rh,k:n,v:i}}function Fn(t){var e,n,i,r;if(e=t.pos,i=Tn(t),null===i)return null;if(n=[i],t.matchString(","))if(r=Fn(t),!r)return t.pos=e,null;else return n.concat(r);return n}function Nn(t){var e,n;if(e=t.pos,t.allowWhitespace(),!t.matchString("{"))return t.pos=e,null;if(n=Fn(t),t.allowWhitespace(),!t.matchString("}"))return t.pos=e,null;else return{t:th,m:n}}function Pn(t){t.allowWhitespace();var e=Wn(t);if(null===e)return null;var n=[e];if(t.allowWhitespace(),t.matchString(",")){var i=Pn(t);if(null===i)t.error(Lh);n.push.apply(n,i)}return n}function Bn(t){var e,n;if(e=t.pos,t.allowWhitespace(),!t.matchString("["))return t.pos=e,null;if(n=Pn(t),!t.matchString("]"))return t.pos=e,null;else return{t:Xu,m:n}}function In(t){return On(t)||An(t)||jn(t)||Nn(t)||Bn(t)||bn(t)}function Kn(t){var e,n,i,r,o,s,a,u;if(e=t.pos,i=t.matchPattern(tf),"@keypath"===i||"@rootpath"===i)if(t.matchPattern(ef)){var h=Kn(t);if(!h)t.error("Expected a valid reference for a keypath expression");if(t.allowWhitespace(),!t.matchString(")"))t.error("Unclosed keypath expression");i+="("+h.n+")"}if(u=!i&&t.spreadArgs&&t.matchPattern(nf),!i)if(n=t.matchPattern(Qh)||"",i=!n&&t.relaxedNames&&t.matchPattern(Xh)||t.matchPattern(Jh),!i&&"."===n)n="",i=".";else if(!i&&n)i=n,n="";if(!i)return null;if(!n&&!t.relaxedNames&&zh.test(i))return t.pos=e,null;if(!n&&Uh.test(i))return r=Uh.exec(i)[0],t.pos=e+r.length,{t:ih,v:(u?"...":"")+r};if(s=(u?3:0)+(n||"").length+i.length,o=(n||"")+U(i),t.matchString("("))if(a=o.lastIndexOf("."),-1!==a&&"]"!==i[i.length-1]){var f=o.length;o=o.substr(0,a),t.pos=e+(s-(f-a))}else t.pos-=1;return{t:oh,n:(u?"...":"")+o.replace(/^this\./,"./").replace(/^this$/,".")}}function Rn(t){if(!t.matchString("("))return null;t.allowWhitespace();var e=Wn(t);if(!e)t.error(Lh);if(t.allowWhitespace(),!t.matchString(")"))t.error(Dh);return{t:hh,x:e}}function Vn(t){return In(t)||Kn(t)||Rn(t)}function Mn(t){if(!t.strictRefinement)t.allowWhitespace();if(t.matchString(".")){t.allowWhitespace();var e=t.matchPattern(Zh);if(e)return{t:sh,n:e};t.error("Expected a property name")}if(t.matchString("[")){t.allowWhitespace();var n=Wn(t);if(!n)t.error(Lh);if(t.allowWhitespace(),!t.matchString("]"))t.error("Expected ']'");return{t:sh,x:n}}return null}function Ln(t){var e=Vn(t);if(!e)return null;for(;e;){var n=Mn(t);if(n)e={t:ah,x:e,r:n};else if(t.matchString("(")){t.allowWhitespace();var i=t.spreadArgs;t.spreadArgs=!0;var r=Pn(t);if(t.spreadArgs=i,t.allowWhitespace(),!t.matchString(")"))t.error(Dh);if(e={t:ch,x:e},r)e.o=r}else break}return e}function Dn(t){var e,n,i,r;if(n=uf(t),!n)return null;if(e=t.pos,t.allowWhitespace(),!t.matchString("?"))return t.pos=e,n;if(t.allowWhitespace(),i=Wn(t),!i)t.error(Lh);if(t.allowWhitespace(),
!t.matchString(":"))t.error('Expected ":"');if(t.allowWhitespace(),r=Wn(t),!r)t.error(Lh);return{t:fh,o:[n,i,r]}}function Wn(t){return Dn(t)}function Un(t){function e(t){for(var e=[],n=o-1;n>=0;n--)e.push("spread$"+n);return e.length?"(function(){var "+e.join(",")+";return("+t+");})()":t}function n(t){switch(t.t){case eh:case ih:case Gu:case nh:return t.v;case Ju:return JSON.stringify(String(t.v));case Xu:return"["+(t.m?t.m.map(n).join(","):"")+"]";case th:return"{"+(t.m?t.m.map(n).join(","):"")+"}";case rh:return t.k+":"+n(t.v);case uh:return("typeof"===t.s?"typeof ":t.s)+n(t.o);case lh:return n(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+n(t.o[1]);case ch:if(t.spread){var e=o++;return"(spread$"+e+" = "+n(t.x)+").apply(spread$"+e+", [].concat("+(t.o?t.o.map(function(t){return t.n&&0===t.n.indexOf("...")?n(t):"["+n(t)+"]"}).join(","):"")+") )"}else return n(t.x)+"("+(t.o?t.o.map(n).join(","):"")+")";case hh:return"("+n(t.x)+")";case ah:return n(t.x)+n(t.r);case sh:return t.n?"."+t.n:"["+n(t.x)+"]";case fh:return n(t.o[0])+"?"+n(t.o[1])+":"+n(t.o[2]);case oh:return"_"+i.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}var i,r,o=0;return zn(t,i=[]),r=n(t),i=i.map(function(t){return 0===t.indexOf("...")?t.substr(3):t}),{r:i,s:e(r)}}function zn(t,e){var n,i;if(t.t===oh)if(-1===e.indexOf(t.n))e.unshift(t.n);if(i=t.o||t.m)if(p(i))zn(i,e);else for(n=i.length;n--;){if(i[n].n&&0===i[n].n.indexOf("..."))t.spread=!0;zn(i[n],e)}if(t.x)zn(t.x,e);if(t.r)zn(t.r,e);if(t.v)zn(t.v,e)}function $n(t){t.allowWhitespace();var e=Cn(t);if(!e)return null;var n={key:e};if(t.allowWhitespace(),!t.matchString(":"))return null;t.allowWhitespace();var i=t.read();if(!i)return null;else return n.value=i.v,n}function qn(t,e){var n=new mf(t,{values:e});return n.result}function Zn(t,e,n){var i,r,o,s,a,u,h;if("string"==typeof t){if(n===kh||n===xh){var f=new af("["+t+"]");return{a:Un(f.result[0])}}if(n===wh&&(r=gf.exec(t)))w("Unqualified method events are deprecated. Prefix methods with '@this.' to call methods on the current Ractive instance."),t="@this."+r[1]+t.substr(r[1].length);if(n===wh&&~t.indexOf("(")){var l=new af("["+t+"]");if(l.result&&l.result[0]){if(l.remaining().length)e.error("Invalid input after event expression '"+l.remaining()+"'");return{x:Un(l.result[0])}}if(t.indexOf(":")>t.indexOf("(")||!~t.indexOf(":"))e.error("Invalid input in event expression '"+t+"'")}if(-1===t.indexOf(":"))return t.trim();t=[t]}if(i={},a=[],u=[],t){for(;t.length;)if(o=t.shift(),"string"==typeof o)if(s=o.indexOf(":"),-1===s)a.push(o);else{if(s)a.push(o.substr(0,s));if(o.length>s+1)u[0]=o.substring(s+1);break}else a.push(o);u=u.concat(t)}if(!a.length)i="";else if(u.length||"string"!=typeof a)if(i={n:1===a.length&&"string"==typeof a[0]?a[0]:a},1===u.length&&"string"==typeof u[0])h=qn("["+u[0]+"]"),i.a=h?h.value:[u[0].trim()];else i.d=u;else i=a;if(u.length)w("Proxy events with arguments are deprecated. You can fire events with arguments using \"@this.fire('eventName', arg1, arg2, ...)\".");return i}function Hn(t){var e,n,i,r,o,s;if(t.allowWhitespace(),n=t.matchPattern(yf),!n)return null;for(o=n.length,r=0;r<t.tags.length;r++)if(~(s=n.indexOf(t.tags[r].open)))if(o>s)o=s;if(o<n.length)return t.pos-=n.length-o,n=n.substr(0,o),{n:n};if(e={n:n},i=Qn(t),null!=i)e.f=i;return e}function Qn(t){var e,n,i,r;if(e=t.pos,!/[=\/>\s]/.test(t.nextChar()))t.error("Expected `=`, `/`, `>` or whitespace");if(t.allowWhitespace(),!t.matchString("="))return t.pos=e,null;if(t.allowWhitespace(),n=t.pos,i=t.sectionDepth,r=Jn(t,"'")||Jn(t,'"')||Gn(t),null===r)t.error("Expected valid attribute value");if(t.sectionDepth!==i)t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags");if(!r.length)return"";if(1===r.length&&"string"==typeof r[0])return xn(r[0]);else return r}function Yn(t){var e,n,i,r,o;if(e=t.pos,n=t.matchPattern(Of),!n)return null;if(i=n,r=t.tags.map(function(t){return t.open}),-1!==(o=kn(i,r)))n=n.substr(0,o),t.pos=e+n.length;return n}function Gn(t){var e,n;for(t.inAttribute=!0,e=[],n=ei(t)||Yn(t);n;)e.push(n),n=ei(t)||Yn(t);if(!e.length)return null;else return t.inAttribute=!1,e}function Jn(t,e){var n,i,r;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,i=[],r=ei(t)||Xn(t,e);null!==r;)i.push(r),r=ei(t)||Xn(t,e);if(!t.matchString(e))return t.pos=n,null;else return t.inAttribute=!1,i}function Xn(t,e){var n=t.remaining(),i=t.tags.map(function(t){return t.open});i.push(e);var r=kn(n,i);if(-1===r)t.error("Quoted attribute value must have a closing quote");if(!r)return null;else return t.pos+=r,n.substr(0,r)}function ti(t){var e,n,i;if(n=Hn(t),!n)return null;if(i=_f[n.n]){if(n.t=i.t,i.v)n.v=i.v;if(delete n.n,i.t===xh||i.t===kh)n.f=Zn(n.f,t);if(i.t===xh)w(""+("t0"===i.v?"intro-outro":"t1"===i.v?"intro":"outro")+" is deprecated. To specify tranisitions, use the transition name suffixed with '-in', '-out', or '-in-out' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches.");else if(i.t===kh)w("decorator is deprecated. To specify decorators, use the decorator name prefixed with 'as-' as an attribute. Arguments can be specified in the attribute value as a simple list of expressions without mustaches.")}else if(e=xf.exec(n.n))if(delete n.n,n.t=kh,n.f=Zn(n.f,t,kh),"object"==typeof n.f)n.f.n=e[1];else n.f=e[1];else if(e=Ef.exec(n.n)){if(delete n.n,n.t=xh,n.f=Zn(n.f,t,xh),"object"==typeof n.f)n.f.n=e[1];else n.f=e[1];n.v="in-out"===e[2]?"t0":"in"===e[2]?"t1":"t2"}else if(e=wf.exec(n.n)){if(n.n=e[1],n.t=wh,n.f=Zn(n.f,t,wh),kf.test(n.f.n||n.f))t.pos-=(n.f.n||n.f).length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")}else if(t.sanitizeEventAttributes&&bf.test(n.n))return{exclude:!0};else n.f=n.f||(""===n.f?"":0),n.t=zu;return n}function ei(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=ni(t,t.tags[n]))return e;if(t.inTag&&!t.inAttribute)if(e=ti(t))return t.allowWhitespace(),e}function ni(t,e){var n,i,r,o;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(i=yn(t))if(!t.matchString(e.close))return null;else return e.open=i[0],e.close=i[1],t.sortMustacheTags(),Af;if(t.allowWhitespace(),t.matchString("/")){t.pos-=1;var s=t.pos;if(!bn(t))if(t.pos=s-e.close.length,t.inAttribute)return t.pos=n,null;else t.error("Attempted to close a section that wasn't open");else t.pos=s}for(o=0;o<e.readers.length;o+=1)if(r=e.readers[o],i=r(t,e)){if(e.isStatic)i.s=!0;if(t.includeLinePositions)i.p=t.getLinePos(n);return i}return t.pos=n,null}function ii(t,e){var n;if(t){for(;t.t===hh&&t.x;)t=t.x;if(t.t===oh)e.r=t.n;else if(n=ri(t))e.rx=n;else e.x=Un(t);return e}}function ri(t){for(var e,n=[];t.t===ah&&t.r.t===sh;){if(e=t.r,e.x)if(e.x.t===oh)n.unshift(e.x);else n.unshift(Un(e.x));else n.unshift(e.n);t=t.x}if(t.t!==oh)return null;else return{r:t.n,m:n}}function oi(t,e){var n,i=Wn(t);if(!i)return null;if(!t.matchString(e.close))t.error("Expected closing delimiter '"+e.close+"'");return n={t:Ku},ii(i,n),n}function si(t,e){var n,i;if(!t.matchString("&"))return null;if(t.allowWhitespace(),n=Wn(t),!n)return null;if(!t.matchString(e.close))t.error("Expected closing delimiter '"+e.close+"'");return i={t:Ku},ii(n,i),i}function ai(t){var e,n=[],i=t.pos;if(t.allowWhitespace(),e=ui(t)){for(e.x=ii(e.x,{}),n.push(e),t.allowWhitespace();t.matchString(",");){if(e=ui(t),!e)t.error("Expected another alias.");e.x=ii(e.x,{}),n.push(e),t.allowWhitespace()}return n}return t.pos=i,null}function ui(t){var e,n,i=t.pos;if(t.allowWhitespace(),e=Wn(t,[]),!e)return t.pos=i,null;if(t.allowWhitespace(),!t.matchPattern(jf))return t.pos=i,null;if(t.allowWhitespace(),n=t.matchPattern(Sf),!n)t.error("Expected a legal alias name.");return{n:n,x:e}}function hi(t,e){if(!t.matchString(">"))return null;t.allowWhitespace(),t.relaxedNames=t.strictRefinement=!0;var n=Wn(t);if(t.relaxedNames=t.strictRefinement=!1,!n)return null;var i={t:Du};ii(n,i),t.allowWhitespace();var r=ai(t);if(r)i={t:Yu,z:r,f:[i]};else{var o=Wn(t);if(o)i={t:Ru,n:gh,f:[i]},ii(o,i)}if(t.allowWhitespace(),!t.matchString(e.close))t.error("Expected closing delimiter '"+e.close+"'");return i}function fi(t,e){var n;if(!t.matchString("!"))return null;if(n=t.remaining().indexOf(e.close),-1!==n)return t.pos+=n+e.close.length,{t:Wu};else return void 0}function li(t,e){var n,i,r;if(n=t.pos,i=Wn(t),!i){var o=t.matchPattern(/^(\w+)/);if(o)return{t:oh,n:o};else return null}for(r=0;r<e.length;r+=1)if(t.remaining().substr(0,e[r].length)===e[r])return i;return t.pos=n,Kn(t)}function ci(t,e){var n,i,r,o;n=t.pos;try{i=li(t,[e.close])}catch(s){o=s}if(!i){if("!"===t.str.charAt(n))return t.pos=n,null;if(o)throw o}if(!t.matchString(e.close))if(t.error("Expected closing delimiter '"+e.close+"' after reference"),!i){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return r={t:Iu},ii(i,r),r}function pi(t,e){if(!t.matchPattern(Cf))return null;var n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/);if(t.allowWhitespace(),!t.matchString(e.close))t.error("expected legal partial name");var i={t:Zu};if(n)i.n=n;return i}function di(t,e){var n,i,r,o;if(n=t.pos,!t.matchString(e.open))return null;if(t.allowWhitespace(),!t.matchString("/"))return t.pos=n,null;if(t.allowWhitespace(),i=t.remaining(),r=i.indexOf(e.close),-1!==r){if(o={t:Mu,r:i.substr(0,r).split(" ")[0]},t.pos+=r,!t.matchString(e.close))t.error("Expected closing delimiter '"+e.close+"'");return o}return t.pos=n,null}function mi(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(Tf))return t.pos=n,null;if(!t.matchString(e.close))t.error("Expected closing delimiter '"+e.close+"'");return{t:yh}}function gi(t,e){var n=t.pos;if(!t.matchString(e.open))return null;if(!t.matchPattern(Ff))return t.pos=n,null;var i=Wn(t);if(!t.matchString(e.close))t.error("Expected closing delimiter '"+e.close+"'");return{t:bh,x:i}}function vi(t,e){var n,i,r,o,s,a,u,h,f,l,c,p,d=!1;if(n=t.pos,t.matchString("^"))r={t:Ru,f:[],n:dh};else if(t.matchString("#")){if(r={t:Ru,f:[]},t.matchString("partial"))t.pos=n-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components");if(u=t.matchPattern(If))p=u,r.n=Nf[u]}else return null;if(t.allowWhitespace(),"with"===u){var m=ai(t);if(m)d=!0,r.z=m,r.t=Yu}else if("each"===u){var g=ui(t);if(g)r.z=[{n:g.n,x:{r:"."}}],i=g.x}if(!d){if(!i)i=Wn(t);if(!i)t.error("Expected expression");if(c=t.matchPattern(Pf)){var v;if(v=t.matchPattern(Bf))r.i=c+","+v;else r.i=c}}if(t.allowWhitespace(),!t.matchString(e.close))t.error("Expected closing delimiter '"+e.close+"'");t.sectionDepth+=1,s=r.f,f=[];do if(o=di(t,e)){if(p&&o.r!==p)t.error("Expected "+e.open+"/"+p+e.close);t.sectionDepth-=1,l=!0}else if(!d&&(o=gi(t,e))){if(r.n===dh)t.error("{{else}} not allowed in {{#unless}}");if(a)t.error("illegal {{elseif...}} after {{else}}");if(!h)h=[];var y={t:Ru,n:ph,f:s=[]};ii(o.x,y),h.push(y)}else if(!d&&(o=mi(t,e))){if(r.n===dh)t.error("{{else}} not allowed in {{#unless}}");if(a)t.error("there can only be one {{else}} block, at the end of a section");if(a=!0,!h)h=[];h.push({t:Ru,n:dh,f:s=[]})}else{if(o=t.read(rl),!o)break;s.push(o)}while(!l);if(h)r.l=h;if(!d)ii(i,r);if(!r.f.length)delete r.f;return r}function yi(t){var e,n,i,r,o;if(e=t.pos,!t.matchString(Kf))return null;if(i=t.remaining(),r=i.indexOf(Rf),-1===r)t.error("Illegal HTML - expected closing comment sequence ('-->')");if(n=i.substr(0,r),t.pos+=r+3,o={t:Wu,c:n},t.includeLinePositions)o.p=t.getLinePos(e);return o}function bi(t){var e,n,i,r,o;for(e=1;e<t.length;e+=1){if(n=t[e],i=t[e-1],r=t[e-2],wi(n)&&ki(i)&&wi(r))if(Mf.test(r)&&Vf.test(n))t[e-2]=r.replace(Mf,"\n"),t[e]=n.replace(Vf,"");if(xi(n)&&wi(i))if(Mf.test(i)&&wi(n.f[0])&&Vf.test(n.f[0]))t[e-1]=i.replace(Mf,"\n"),n.f[0]=n.f[0].replace(Vf,"");if(wi(n)&&xi(i))if(o=C(i.f),wi(o)&&Mf.test(o)&&Vf.test(n))i.f[i.f.length-1]=o.replace(Mf,"\n"),t[e]=n.replace(Vf,"")}return t}function wi(t){return"string"==typeof t}function ki(t){return t.t===Wu||t.t===Uu}function xi(t){return(t.t===Ru||t.t===Vu)&&t.f}function Ei(t,e,n){var i;if(e)if(i=t[0],"string"==typeof i)if(i=i.replace(e,""),!i)t.shift();else t[0]=i;if(n)if(i=C(t),"string"==typeof i)if(i=i.replace(n,""),!i)t.pop();else t[t.length-1]=i}function _i(t,e,n,i,r){if("string"!=typeof t){var o,s,a,u,h,l,c,p;for(bi(t),o=t.length;o--;)if(s=t[o],s.exclude)t.splice(o,1);else if(e&&s.t===Wu)t.splice(o,1);for(Ei(t,i?Wf:null,r?Uf:null),o=t.length;o--;){if(s=t[o],s.f){var d=s.t===Lu&&Df.test(s.e);if(h=n||d,!n&&d)Ei(s.f,zf,$f);if(!h){if(a=t[o-1],u=t[o+1],!a||"string"==typeof a&&Uf.test(a))l=!0;if(!u||"string"==typeof u&&Wf.test(u))c=!0}if(_i(s.f,e,h,l,c),f(s.f.n))_i(s.f.n,e,n,l,r);if(f(s.f.d))_i(s.f.d,e,n,l,r)}if(s.l)_i(s.l,e,n,l,c),s.l.forEach(function(t){return t.l=1}),s.l.unshift(o+1,0),t.splice.apply(t,s.l),delete s.l;if(s.a)for(p in s.a)if(s.a.hasOwnProperty(p)&&"string"!=typeof s.a[p])_i(s.a[p],e,n,l,c);if(s.m)if(_i(s.m,e,n,l,c),s.m.length<1)delete s.m}for(o=t.length;o--;)if("string"==typeof t[o]){if("string"==typeof t[o+1])t[o]=t[o]+t[o+1],t.splice(o+1,1);if(!n)t[o]=t[o].replace(Lf," ");if(""===t[o])t.splice(o,1)}}}function Oi(t){var e,n;if(e=t.pos,!t.matchString("</"))return null;if(n=t.matchPattern(qf))if(t.inside&&n!==t.inside)return t.pos=e,null;else return{t:$u,e:n};t.pos-=2,t.error("Illegal closing tag")}function Ai(t){var e,n,i,r,o,s,a,u,h,f,l,c;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(n={},t.includeLinePositions)n.p=t.getLinePos(e);if(t.matchString("!")){if(n.t=Qu,!t.matchPattern(/^doctype/i))t.error("Expected DOCTYPE declaration");return n.a=t.matchPattern(/^(.+?)>/),n}if(n.t=Lu,n.e=t.matchPattern(Zf),!n.e)return null;if(!Hf.test(t.nextChar()))t.error("Illegal tag name");for(t.allowWhitespace(),t.inTag=!0;i=ei(t);){if(i!==!1){if(!n.m)n.m=[];n.m.push(i)}t.allowWhitespace()}if(t.inTag=!1,t.allowWhitespace(),t.matchString("/"))r=!0;if(!t.matchString(">"))return null;var p=n.e.toLowerCase(),d=t.preserveWhitespace;if(!r&&!Th.test(n.e)){if(t.elementStack.push(p),"script"===p||"style"===p||"textarea"===p)t.inside=p;o=[],s=Rs(null);do{if(f=t.pos,l=t.remaining(),!l)t.error("Missing end "+(t.elementStack.length>1?"tags":"tag")+" ("+t.elementStack.reverse().map(function(t){return"</"+t+">"}).join("")+")");if(!Si(p,l))h=!0;else if(c=Oi(t)){h=!0;var m=c.e.toLowerCase();if(m!==p)if(t.pos=f,!~t.elementStack.indexOf(m)){var g="Unexpected closing tag";if(Th.test(m))g+=" (<"+m+"> is a void element - it cannot contain children)";t.error(g)}}else if(u=di(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))h=!0,t.pos=f;else if(u=t.read(ol)){if(s[u.n])t.pos=f,t.error("Duplicate partial definition");_i(u.f,t.stripComments,d,!d,!d),s[u.n]=u.f,a=!0}else if(u=t.read(rl))o.push(u);else h=!0}while(!h);if(o.length)n.f=o;if(a)n.p=s;t.elementStack.pop()}if(t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(p))return Qf;else return n}function Si(t,e){var n,i;if(n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),i=vf[t],!n||!i)return!0;else return!~i.indexOf(n[1].toLowerCase())}function ji(t){var e,n,i,r;if(n=t.remaining(),t.textOnlyMode)i=t.tags.map(function(t){return t.open}),i=i.concat(t.tags.map(function(t){return"\\"+t.open})),e=kn(n,i);else if(r=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside])e=n.indexOf(r);else{if(i=t.tags.map(function(t){return t.open}),i=i.concat(t.tags.map(function(t){return"\\"+t.open})),t.inAttribute===!0)i.push('"',"'","=","<",">","`");else if(t.inAttribute)i.push(t.inAttribute);else i.push(r);e=kn(n,i)}if(!e)return null;if(-1===e)e=n.length;if(t.pos+=e,t.inside&&"textarea"!==t.inside||t.textOnlyMode)return n.substr(0,e);else return xn(n.substr(0,e))}function Ci(t){var e=t.pos,n=t.standardDelimiters[0],i=t.standardDelimiters[1];if(!t.matchPattern(Gf)||!t.matchString(n))return t.pos=e,null;var r=t.matchPattern(Jf);if(w("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+r+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+r+"}} --> ... <!-- {{/"+r+"}} -->'"),!t.matchString(i)||!t.matchPattern(Xf))return t.pos=e,null;var o,s=[],a=new RegExp("^<!--\\s*"+wn(n)+"\\s*\\/\\s*"+r+"\\s*"+wn(i)+"\\s*-->");do if(t.matchPattern(a))o=!0;else{var u=t.read(rl);if(!u)t.error("expected closing comment ('<!-- "+n+"/"+r+i+" -->')");s.push(u)}while(!o);return{t:Hu,f:s,n:r}}function Ti(t){var e,n,i,r,o;e=t.pos;var s=t.standardDelimiters;if(!t.matchString(s[0]))return null;if(!t.matchPattern(tl))return t.pos=e,null;if(n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-\/]*/),!n)t.error("expected legal partial name");if(!t.matchString(s[1]))t.error("Expected closing delimiter '"+s[1]+"'");i=[];do if(r=di(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]})){if("partial"===!r.r)t.error("Expected "+s[0]+"/partial"+s[1]);o=!0}else{if(r=t.read(rl),!r)t.error("Expected "+s[0]+"/partial"+s[1]);i.push(r)}while(!o);return{t:Hu,n:n,f:i}}function Fi(t){for(var e=[],n=Rs(null),i=!1,r=t.preserveWhitespace;t.pos<t.str.length;){var o,s,a=t.pos;if(s=t.read(ol)){if(n[s.n])t.pos=a,t.error("Duplicated partial definition");_i(s.f,t.stripComments,r,!r,!r),n[s.n]=s.f,i=!0}else if(o=t.read(rl))e.push(o);else t.error("Unexpected template content")}var u={v:Au,t:e};if(i)u.p=n;return u}function Ni(t,e){Object.keys(t).forEach(function(n){if(Pi(n,t))return Bi(t,e);var i=t[n];if(Ii(i))Ni(i,e)})}function Pi(t,e){return"s"===t&&f(e.r)}function Bi(t,e){var n=t.s,i=t.r;if(!e[n])e[n]=dn(n,i.length)}function Ii(t){return f(t)||p(t)}function Ki(t,e){return new Yf(t,e||{}).result}function Ri(t,e,n){if(!t)m("Missing Ractive.parse - cannot parse "+e+". "+n)}function Vi(t,e){return Ri(dn,"new expression function",al),dn(t,e)}function Mi(t,e){return Ri(mn,'compution string "${str}"',ul),mn(t,e)}function Li(t){var e=t._config.template;if(e&&e.fn){var n=Di(t,e.fn);if(n!==e.result)return e.result=n,n;else return void 0}}function Di(t,e){return e.call(t,{fromId:hl.fromId,isParsed:hl.isParsed,parse:function(e,n){if(void 0===n)n=hl.getParseOptions(t);return hl.parse(e,n)}})}function Wi(t,e){if("string"==typeof t)t=Ui(t,e);else zi(t),vn(t);return t}function Ui(t,e){if("#"===t[0])t=hl.fromId(t);return hl.parseFor(t,e)}function zi(t){if(void 0==t)throw new Error("The template cannot be "+t+".");else if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");else if(t.v!==Au)throw new Error("Mismatched template version (expected "+Au+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}function $i(t,e,n){if(e)for(var i in e)if(n||!t.hasOwnProperty(i))t[i]=e[i]}function qi(t,e,n){function i(){var t=Zi(i._parent,e),r="_super"in this,o=this._super;this._super=t;var s=n.apply(this,arguments);if(r)this._super=o;else delete this._super;return s}if(!/_super/.test(n))return n;else return i._parent=t,i._method=n,i}function Zi(e,n){if(n in e){var i=e[n];return"function"==typeof i?i:function(){return i}}return t}function Hi(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function Qi(t,e,n){if(e in t)if(!(n in t))b(Hi(e,n)),t[n]=t[e];else throw new Error(Hi(e,n,!0))}function Yi(t){if(Qi(t,"beforeInit","onconstruct"),Qi(t,"init","onrender"),Qi(t,"complete","oncomplete"),Qi(t,"eventDefinitions","events"),f(t.adaptors))Qi(t,"adaptors","adapt")}function Gi(t,e,n,i){Yi(i);for(var r in i)if(gl.hasOwnProperty(r)){var o=i[r];if("el"!==r&&"function"==typeof o)b(""+r+" is a Ractive option that does not expect a function and will be ignored","init"===t?n:null);else n[r]=o}if(i.append&&i.enhance)throw new Error("Cannot use append and enhance at the same time");pl.forEach(function(r){r[t](e,n,i)}),yu[t](e,n,i),fl[t](e,n,i),_u[t](e,n,i),Ji(e.prototype,n,i)}function Ji(t,e,n){for(var i in n)if(!vl[i]&&n.hasOwnProperty(i)){var r=n[i];if("function"==typeof r)r=qi(t,i,r);e[i]=r}}function Xi(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function tr(t){if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");t=Ou.init(this.constructor,this,{data:t});var e=la.start(this,!0),n=this.viewmodel.wrapper;if(n&&n.reset){if(n.reset(t)===!1)this.viewmodel.set(t)}else this.viewmodel.set(t);for(var i,r=bl.reset(this),o=r.length;o--;)if(wl.indexOf(r[o])>-1){i=!0;break}if(i)_l.fire(this),this.fragment.resetTemplate(this.template),El.fire(this),kl.fire(this);return la.end(),xl.fire(this,t),e}function er(t,e,n,i){t.forEach(function(t){if(t.type===Du&&(t.refName===e||t.name===e))return t.inAttribute=n,void i.push(t);if(t.fragment)er(t.fragment.iterations||t.fragment.items,e,n,i);else if(f(t.items))er(t.items,e,n,i);else if(t.type===qu&&t.instance){if(t.instance.partials[e])return;er(t.instance.fragment.items,e,n,i)}if(t.type===Lu)if(f(t.attributes))er(t.attributes,e,!0,i)})}function nr(t){t.forceResetTemplate()}function ir(t,e){var n=[];er(this.fragment.items,t,!1,n);var i=la.start(this,!0);return this.partials[t]=e,n.forEach(nr),la.end(),i}function rr(t,e,n){var i=t.fragment.resolve(e,function(e){T(t.resolvers,i),t.models[n]=e,t.bubble()});t.resolvers.push(i)}function or(t,e){if(e.r)return Zt(t,e.r);else if(e.x)return new Sl(t,e.x);else if(e.rx)return new Cl(t,e.rx)}function sr(t){if(t.template.z){t.aliases={};for(var e=t.template.z,n=0;n<e.length;n++)t.aliases[e[n].n]=or(t.parentFragment,e[n].x)}}function ar(t,e){if(void 0===e)e=!0;for(;t&&t.type!==Lu&&(!e||t.type!==qu);)if(t.owner)t=t.owner;else if(t.component)t=t.component.parentFragment;else if(t.parent)t=t.parent;else if(t.parentFragment)t=t.parentFragment;else t=void 0;return t}function ur(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})}function hr(t){var e=[];if("string"!=typeof t)return{};else return t.replace(Bl,function(t){return"\x00"+(e.push(t)-1)}).replace(Pl,"").split(";").filter(function(t){return!!t.trim()}).map(function(t){return t.replace(Il,function(t,n){return e[n]})}).reduce(function(t,e){var n=e.indexOf(":"),i=ur(e.substr(0,n).trim());return t[Nl[i]||i]=e.substr(n+1).trim(),t},{})}function fr(t){for(var e=t.split(Fl),n=e.length;n--;)if(!e[n])e.splice(n,1);return e}function lr(e){var n=e.element,i=e.name;if("id"===i)return cr;if("value"===i){if(e.interpolator)e.interpolator.bound=!0;if("select"===n.name&&"value"===i)return n.getAttribute("multiple")?pr:dr;if("textarea"===n.name)return yr;if(null!=n.getAttribute("contenteditable"))return mr;if("input"===n.name){var r=n.getAttribute("type");if("file"===r)return t;if("radio"===r&&n.binding&&"name"===n.binding.attribute.name)return gr;if(~Kl.indexOf(r))return yr}return vr}var o=n.node;if(e.isTwoway&&"name"===i){if("radio"===o.type)return br;if("checkbox"===o.type)return wr}if("style"===i)return kr;if(0===i.indexOf("style-"))return xr;if("class"===i&&(!o.namespaceURI||o.namespaceURI===Ts))return Er;if(0===i.indexOf("class-"))return _r;if(e.isBoolean){var s=n.getAttribute("type");if(e.interpolator&&"checked"===i&&("checkbox"===s||"radio"===s))e.interpolator.bound=!0;return Or}if(e.namespace&&e.namespace!==e.node.namespaceURI)return Sr;else return Ar}function cr(t){var e=this,n=e.node,i=this.getValue();if(this.ractive.nodes[n.id]===n)delete this.ractive.nodes[n.id];if(t)return n.removeAttribute("id");else return this.ractive.nodes[i]=n,void(n.id=i)}function pr(t){var e=this.getValue();if(!f(e))e=[e];var n=this.node.options,i=n.length;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var r=n[i],o=r._ractive?r._ractive.value:r.value;r.selected=A(e,o)}}function dr(t){var e=this.getValue();if(!this.locked){this.node._ractive.value=e;var n=this.node.options,i=n.length,r=!1;if(t)for(;i--;)n[i].selected=!1;else for(;i--;){var o=n[i],s=o._ractive?o._ractive.value:o.value;if(o.disabled&&o.selected)r=!0;if(s==e)return void(o.selected=!0)}if(!r)this.node.selectedIndex=-1}}function mr(t){var e=this.getValue();if(!this.locked)if(t)this.node.innerHTML="";else this.node.innerHTML=void 0===e?"":e}function gr(t){var e=this.node,n=e.checked,i=this.getValue();if(t)return e.checked=!1;if(e.value=this.node._ractive.value=i,e.checked=i===this.element.getAttribute("name"),n&&!e.checked&&this.element.binding&&this.element.binding.rendered)this.element.binding.group.model.set(this.element.binding.group.getValue())}function vr(t){if(!this.locked){if(t)return this.node.removeAttribute("value"),void(this.node.value=this.node._ractive.value=null);var e=this.getValue();this.node.value=this.node._ractive.value=e,this.node.setAttribute("value",e)}}function yr(t){if(!this.locked){if(t)return this.node._ractive.value="",void this.node.removeAttribute("value");var e=this.getValue();this.node._ractive.value=e,this.node.value=r(e),this.node.setAttribute("value",r(e))}}function br(t){if(t)this.node.checked=!1;else this.node.checked=this.getValue()==this.node._ractive.value}function wr(t){var e=this,n=e.element,i=e.node,r=n.binding,o=this.getValue(),s=n.getAttribute("value");if(t);if(!f(o))r.isChecked=i.checked=o==s;else{for(var a=o.length;a--;)if(s==o[a])return void(r.isChecked=i.checked=!0);r.isChecked=i.checked=!1}}function kr(t){for(var e=t?{}:hr(this.getValue()||""),n=this.node.style,i=Object.keys(e),r=this.previous||[],o=0;o<i.length;){if(i[o]in n)n[i[o]]=e[i[o]];o++}for(o=r.length;o--;)if(!~i.indexOf(r[o])&&r[o]in n)n[r[o]]="";this.previous=i}function xr(t){if(!this.styleName)this.styleName=s(this.name.substr(6));this.node.style[this.styleName]=t?"":this.getValue()}function Er(t){for(var e=t?[]:fr(r(this.getValue())),n=fr(this.node.className),i=this.previous||n.slice(0),o=0;o<e.length;){if(!~n.indexOf(e[o]))n.push(e[o]);o++}for(o=i.length;o--;)if(!~e.indexOf(i[o])){var s=n.indexOf(i[o]);if(~s)n.splice(s,1)}var a=n.join(" ");if(a!==this.node.className)this.node.className=a;this.previous=e}function _r(t){var e=this.name.substr(6),n=fr(this.node.className),i=t?!1:this.getValue();if(!this.inlineClass)this.inlineClass=e;if(i&&!~n.indexOf(e))n.push(e);else if(!i&&~n.indexOf(e))n.splice(n.indexOf(e),1);this.node.className=n.join(" ")}function Or(t){if(!this.locked){if(t){if(this.useProperty)this.node[this.propertyName]=!1;return void this.node.removeAttribute(this.propertyName)}if(this.useProperty)this.node[this.propertyName]=this.getValue();else if(this.getValue())this.node.setAttribute(this.propertyName,"");else this.node.removeAttribute(this.propertyName)}}function Ar(t){if(t)this.node.removeAttribute(this.name);else this.node.setAttribute(this.name,r(this.getString()))}function Sr(t){if(t)this.node.removeAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1));else this.node.setAttributeNS(this.namespace,this.name.slice(this.name.indexOf(":")+1),r(this.getString()))}function jr(t,e){for(var n="xmlns:"+e;t;){if(t.hasAttribute&&t.hasAttribute(n))return t.getAttribute(n);t=t.parentNode}return Ks[e]}function Cr(t,e,n){if(0===e)t.value=!0;else if("true"===e)t.value=!0;else if("false"===e||"0"===e)t.value=!1;else t.value=e;var i=t.element[t.flag];if(t.element[t.flag]=t.value,n&&!t.element.attributes.binding&&i!==t.value)t.element.recreateTwowayBinding();return t.value}function Tr(){return Dl}function Fr(t){Dl=!0,t(),Dl=!1}function Nr(t,e){var n=e?"svg":"div";return t?(Ll.innerHTML="<"+n+" "+t+"></"+n+">")&&F(Ll.childNodes[0].attributes):[]}function Pr(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function Br(t,e,n,i){var r=t.__model;if(i)r.shuffle(i);else;}function Ir(t,e,n,i){if(t.set&&t.set.__magic)return t.set.__magic.dependants.push({ractive:e,keypath:n}),t;var r,o=[{ractive:e,keypath:n}],s={get:function(){return"value"in t?t.value:t.get.call(this)},set:function(e){if(!r){if("value"in t)t.value=e;else t.set.call(this,e);if(!i.locked)r=!0,o.forEach(function(t){var n=t.ractive,i=t.keypath;n.set(i,e)}),r=!1}},enumerable:!0};return s.set.__magic={dependants:o,originalDescriptor:t},s}function Kr(t,e,n){if(!t.set||!t.set.__magic)return!0;for(var i=t.set.__magic,r=i.length;r--;){var o=i[r];if(o.ractive===e&&o.keypath===n)return i.splice(r,1),!1}}function Rr(t){var e=t.replace(/^\t+/gm,function(t){return t.split("	").join("  ")}).split("\n"),n=e.length<2?0:e.slice(1).reduce(function(t,e){return Math.min(t,/^\s*/.exec(e)[0].length)},1/0);return e.map(function(t,e){return"    "+(e?t.substring(n):t)}).join("\n")}function Vr(t){if(!t)return"";for(var e=t.split("\n"),n=nc.name+".getValue",i=[],r=e.length,o=1;r>o;o+=1){var s=e[o];if(~s.indexOf(n))return i.join("\n");else i.push(s)}}function Mr(t,e,n){var i,r,o,s,a;if("function"==typeof n)i=q(n,t),o=n.toString(),s=!0;if("string"==typeof n)i=Mi(n,t),o=n;if("object"==typeof n){if("string"==typeof n.get)i=Mi(n.get,t),o=n.get;else if("function"==typeof n.get)i=q(n.get,t),o=n.get.toString(),s=!0;else m("`%s` computation must have a `get()` method",e);if("function"==typeof n.set)r=q(n.set,t),a=n.set.toString()}return{getter:i,setter:r,getterString:o,setterString:a,getterUseStack:s}}function Lr(t,e){if(us.DEBUG)$s();Ur(t),Vs(t,"data",{get:zr}),sc.fire(t,e),ac.forEach(function(n){t[n]=u(Rs(t.constructor[n]||null),e[n])});var n=new oc({adapt:Wr(t,t.adapt,e),data:Ou.init(t.constructor,t,e),ractive:t});t.viewmodel=n;var i=u(Rs(t.constructor.prototype.computed),e.computed);for(var r in i){var o=Mr(t,r,i[r]);n.compute(r,o)}}function Dr(t,e){for(var n=t.slice(),i=e.length;i--;)if(!~n.indexOf(e[i]))n.push(e[i]);return n}function Wr(t,e,n){function i(e){if("string"==typeof e)if(e=k("adaptors",t,e),!e)m(Xs(e,"adaptor"));return e}e=e.map(i);var r=j(n.adapt).map(i);r=Dr(e,r);var o="magic"in n?n.magic:t.magic,s="modifyArrays"in n?n.modifyArrays:t.modifyArrays;if(o){if(!hs)throw new Error("Getters and setters (magic mode) are not supported in this browser");if(s)r.push(ec);r.push(Jl)}if(s)r.push(Ql);return r}function Ur(t){if(t._guid="r-"+uc++,t._subs=Rs(null),t._config={},t.nodes={},t.event=null,t._eventQueue=[],t._liveQueries=[],t._liveComponentQueries=[],t._observers=[],!t.component)t.root=t,t.parent=t.container=null}function zr(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function $r(t,e){return t[e._guid]||(t[e._guid]=[])}function qr(t,e){var n=$r(t.queue,e);for(t.hook.fire(e);n.length;)qr(t,n.shift());delete t.queue[e._guid]}function Zr(t,e,i){Object.keys(t.viewmodel.computations).forEach(function(e){var n=t.viewmodel.computations[e];if(t.viewmodel.value.hasOwnProperty(e))n.set(t.viewmodel.value[e])}),bl.init(t.constructor,t,e),fc.fire(t),lc.begin(t);var r;if(t.template){var o;if(i.cssIds||t.cssId)if(o=i.cssIds?i.cssIds.slice():[],t.cssId)o.push(t.cssId);t.fragment=r=new Tp({owner:t,template:t.template,cssIds:o}).bind(t.viewmodel)}if(lc.end(t),r){var s=n(t.el);if(s){var a=t.render(s,t.append);if(us.DEBUG_PROMISES)a["catch"](function(e){throw w("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),b("An error happened during rendering",{ractive:t}),g(e),e})}}}function Hr(t){var e=t.ractive;do for(var n=e._liveComponentQueries,i=n.length;i--;){var r=n[i],o=n["_"+r];if(o.test(t))o.add(t.instance),t.liveQueries.push(o)}while(e=e.parent)}function Qr(t){for(var e=t.ractive;e;){var n=e._liveComponentQueries["_"+t.name];if(n)n.remove(t);e=e.parent}}function Yr(t){t.makeDirty()}function Gr(t){var e=t.node,n=t.ractive;do for(var i=n._liveQueries,r=i.length;r--;){var o=i[r],s=i["_"+o];if(s.test(e))s.add(e),t.liveQueries.push(s)}while(n=n.parent)}function Jr(t){for(;t=t.parent;)if("form"===t.name)return t}function Xr(t,e){w("The "+t+" being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{
ractive:e})}function to(){this._ractive.binding.handleChange()}function eo(t,e,n){var i=""+t+"-bindingGroup";return e[i]||(e[i]=new Oc(i,e,n))}function no(){var t=this.bindings.filter(function(t){return t.node&&t.node.checked}).map(function(t){return t.element.getAttribute("value")}),e=[];return t.forEach(function(t){if(!A(e,t))e.push(t)}),e}function io(){to.call(this);var t=this._ractive.binding.model.get();this.value=void 0==t?"":t}function ro(t){var e;return function(){var n=this;if(e)clearTimeout(e);e=setTimeout(function(){var t=n._ractive.binding;if(t.rendered)to.call(n);e=null},t)}}function oo(t){return t.selectedOptions?F(t.selectedOptions):t.options?F(t.options).filter(function(t){return t.selected}):[]}function so(t){return Nc[t]||(Nc[t]=[])}function ao(){var t=this.bindings.filter(function(t){return t.node.checked});if(t.length>0)return t[0].element.getAttribute("value");else return void 0}function uo(t){return t&&t.template.f&&1===t.template.f.length&&t.template.f[0].t===Iu&&!t.template.f[0].s}function ho(t){var e=t.attributeByName;if(t.getAttribute("contenteditable")||uo(e.contenteditable))return uo(e.value)?jc:null;if("input"===t.name){var n=t.getAttribute("type");if("radio"===n||"checkbox"===n){var i=uo(e.name),r=uo(e.checked);if(i&&r)if("radio"===n)b("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root});else return _c;if(i)return"radio"===n?Bc:Sc;if(r)return"radio"===n?Pc:_c}if("file"===n&&uo(e.value))return Ec;if(uo(e.value))return"number"===n||"range"===n?Fc:Cc;else return null}if("select"===t.name&&uo(e.value))return t.getAttribute("multiple")?Tc:Ic;if("textarea"===t.name&&uo(e.value))return Cc;else return void 0}function fo(t){t.makeDirty()}function lo(t){var e=t.attributeByName,n=e.type,i=e.value,r=e.name;if(n&&"radio"===n.value&&i&&r.interpolator)if(i.getValue()===r.interpolator.model.get())return!0;else return void 0}function co(t){var e=t.toString();return e?" "+e:""}function po(t){for(var e=t.liveQueries.length;e--;){var n=t.liveQueries[e];n.remove(t.node)}}function mo(t){var e=t.getAttribute("xmlns");if(e)return e;if("svg"===t.name)return Ns;var n=t.parent;if(n)if("foreignobject"===n.name)return Ts;else return n.node.namespaceURI;return t.ractive.el.namespaceURI}function go(){var t=this._ractive.proxy;la.start(),t.formBindings.forEach(vo),la.end()}function vo(t){t.model.set(t.resetValue)}function yo(t){var e=t.template.f,n=t.element.instance.viewmodel,i=n.value;if(1===e.length&&e[0].t===Iu){if(t.model=or(t.parentFragment,e[0]),!t.model)w("The "+t.name+"='{{"+e[0].r+"}}' mapping is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",{ractive:t.element.instance}),t.parentFragment.ractive.get(t.name),t.model=t.parentFragment.findContext().joinKey(t.name);if(t.link=n.createLink(t.name,t.model,e[0].r),void 0===t.model.get()&&t.name in i)t.model.set(i[t.name])}else t.boundFragment=new Tp({owner:t,template:e}).bind(),t.model=n.joinKey(t.name),t.model.set(t.boundFragment.valueOf()),t.boundFragment.bubble=function(){Tp.prototype.bubble.call(t.boundFragment),t.boundFragment.update(),t.model.set(t.boundFragment.valueOf())}}function bo(t){for(;t;){if("select"===t.name)return t;t=t.parent}}function wo(t,e,n){var i=ko(t,e,n||{});if(i)return i;if(i=hl.fromId(e,{noThrow:!0})){var r=hl.parseFor(i,t);if(r.p)h(t.partials,r.p);return t.partials[e]=r.t}}function ko(t,e,n){var i=_o(e,n.owner);if(i)return i;var r=x("partials",t,e);if(r){i=r.partials[e];var o;if("function"==typeof i)o=i.bind(r),o.isOwner=r.partials.hasOwnProperty(e),i=o.call(t,hl);if(!i&&""!==i)return void b(Js,e,"partial","partial",{ractive:t});if(!hl.isParsed(i)){var s=hl.parseFor(i,r);if(s.p)b("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=o?r:xo(r,e);a.partials[e]=i=s.t}if(o)i._fn=o;return i.v?i.t:i}}function xo(t,e){return t.partials.hasOwnProperty(e)?t:Eo(t.constructor,e)}function Eo(t,e){if(t)return t.partials.hasOwnProperty(e)?t:Eo(t._Parent,e);else return void 0}function _o(t,e){if(e)if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];else if(e.parentFragment&&e.parentFragment.owner)return _o(t,e.parentFragment.owner)}function Oo(t,e,n){var i;try{i=hl.parse(e,hl.getParseOptions(n))}catch(r){b("Could not parse partial from expression '"+t+"'\n"+r.message)}return i||{t:[]}}function Ao(t){return!t||f(t)&&0===t.length||p(t)&&0===Object.keys(t).length}function So(t,e){if(e||f(t))return mh;if(p(t)||"function"==typeof t)return vh;if(void 0===t)return null;else return ph}function jo(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Co(){Xc=!ps[ep]}function To(){Xc=!1}function Fo(){Xc=!0}function No(t){return t.replace(sp,"")}function Po(t){if(!t)return"";if(ap.test(t))t="-"+t;return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}function Bo(t,e){if(e)t.setAttribute("style",e);else t.getAttribute("style"),t.removeAttribute("style")}function Io(t,e,n){var i=[];if(null==t||""===t)return i;var r,o,s;if(Ep&&(o=_p[e.tagName])){if(r=Ko("DIV"),r.innerHTML=o[0]+t+o[1],r=r.querySelector(".x"),"SELECT"===r.tagName)s=r.options[r.selectedIndex]}else if(e.namespaceURI===Ns)r=Ko("DIV"),r.innerHTML='<svg class="x">'+t+"</svg>",r=r.querySelector(".x");else if("TEXTAREA"===e.tagName)if(r=ws("div"),"undefined"!=typeof r.textContent)r.textContent=t;else r.innerHTML=t;else if(r=Ko(e.tagName),r.innerHTML=t,"SELECT"===r.tagName)s=r.options[r.selectedIndex];for(var a;a=r.firstChild;)i.push(a),n.appendChild(a);var u;if("SELECT"===e.tagName)for(u=i.length;u--;)if(i[u]!==s)i[u].selected=!1;return i}function Ko(t){return Op[t]||(Op[t]=ws(t))}function Ro(t,e){var n,i=x("components",t,e);if(i)if(n=i.components[e],!n._Parent){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(e),n=r(),!n)return void b(Js,e,"component","component",{ractive:t});if("string"==typeof n)n=Ro(t,n);n._fn=r,i.components[e]=n}return n}function Vo(t){if("string"==typeof t.template)return new Yc(t);if(t.template.t===Lu){var e=Ro(t.parentFragment.ractive,t.template.e);if(e)return new bc(t,e);var n=t.template.e.toLowerCase(),i=Cp[n]||Rc;return new i(t)}var r;if(t.template.t===zu){var o=t.owner;if(!o||o.type!==qu&&o.type!==Lu)o=ar(t.parentFragment);t.element=o,r=o.type===qu?Wc:Vl}else r=jp[t.template.t];if(!r)throw new Error("Unrecognised item type "+t.template.t);return new r(t)}function Mo(t,e,n,i){if(void 0===i)i=0;return t.map(function(t){if(t.type===Bu)return t.template;if(t.fragment)if(t.fragment.iterations)return t.fragment.iterations.map(function(t){return Mo(t.items,e,n,i)}).join("");else return Mo(t.fragment.items,e,n,i);var r=""+n+"-"+i++,o=t.model||t.newModel;return e[r]=o?o.wrapper?o.wrapper.value:o.get():void 0,"${"+r+"}"}).join("")}function Lo(t){t.unrender(!0)}function Do(t){fl.init(null,this,{template:t});var n=this.transitionsEnabled;this.transitionsEnabled=!1;var i=this.component;if(i)i.shouldDestroy=!0;if(this.unrender(),i)i.shouldDestroy=!1;this.fragment.unbind().unrender(!0),this.fragment=new Tp({template:this.template,root:this,owner:this});var r=e();this.fragment.bind(this.viewmodel).render(r),this.el.insertBefore(r,this.anchor),this.transitionsEnabled=n}function Wo(t,e){var n=this;return Z(n,Q(n,t,e))}function Uo(t,e){return Y(this,t,void 0===e?-1:-e)}function zo(){if(this.torndown)return b("ractive.teardown() was called on a Ractive instance that was already torn down"),aa.resolve();if(this.torndown=!0,this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(St),this.fragment.rendered&&this.el.__ractive_instances__)T(this.el.__ractive_instances__,this);this.shouldDestroy=!0;var t=this.fragment.rendered?this.unrender():aa.resolve();return Ip.fire(this),t}function $o(t){if("string"!=typeof t)throw new TypeError(Gs);return Z(this,H(this,t).map(function(t){return[t,!t.get()]}))}function qo(){var t=[this.cssId].concat(this.findAllComponents().map(function(t){return t.cssId})),e=Object.keys(t.reduce(function(t,e){return t[e]=!0,t},{}));return Xe(e)}function Zo(){return this.fragment.toString(!0)}function Ho(t,e,n){if(e instanceof HTMLElement);else if(p(e))n=e;if(e=e||this.event.node,!e||!e._ractive)m("No node was supplied for transition "+t);n=n||{};var i=e._ractive.proxy,r=new xp({owner:i,parentFragment:i.parentFragment,name:t,params:n});r.bind();var o=la.start(this,!0);return la.registerTransition(r),la.end(),o.then(function(){return r.unbind()}),o}function Qo(t){var e=la.start();return this.viewmodel.joinAll(z(t),{lastLink:!1}).unlink(),la.end(),e}function Yo(){if(!this.fragment.rendered)return b("ractive.unrender() was called on a Ractive instance that was not rendered"),aa.resolve();var t=la.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;return this.fragment.unrender(e),T(this.el.__ractive_instances__,this),Kp.fire(this),la.end(),t}function Go(t,e){var n=la.start(this,!0);if(!t)this.viewmodel.updateFromBindings(!0);else this.viewmodel.joinAll(z(t)).updateFromBindings(e!==!1);return la.end(),n}function Jo(t,e,n){if(n||Xo(t,e))return function(){var n,i="_super"in this,r=this._super;if(this._super=e,n=t.apply(this,arguments),i)this._super=r;return n};else return t}function Xo(t,e){return"function"==typeof e&&/_super/.test(t)}function ts(t){for(var e={};t;)if(es(t,e),is(t,e),t._Parent!==us)t=t._Parent;else t=!1;return e}function es(t,e){pl.forEach(function(n){ns(n.useDefaults?t.prototype:t,e,n.name)})}function ns(t,e,n){var i,r=Object.keys(t[n]);if(r.length){if(!(i=e[n]))i=e[n]={};r.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]})}}function is(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(!(n in e))e[n]=i._method?i._method:i;else if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var r,o=i._method;if(o)i=i._method;if(r=Jo(e[n]._method,i),o)r._method=r;e[n]=r}}})}function rs(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(!t.length)return os(this);else return t.reduce(os,this)}function os(t,e){if(void 0===e)e={};var n,i;if(e.prototype instanceof us)e=ts(e);if(n=function(t){if(!(this instanceof n))return new n(t);else return Lr(this,t||{}),void Zr(this,t||{},{})},i=Rs(t.prototype),i.constructor=n,Ms(n,{defaults:{value:i},extend:{value:rs,writable:!0,configurable:!0},_Parent:{value:t}}),bl.extend(t,i,e),Ou.extend(t,i,e),e.computed)i.computed=u(Rs(t.prototype.computed),e.computed);return n.prototype=i,n}function ss(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map(W).join(".")}function as(t){return z(t).map($)}function us(t){if(!(this instanceof us))return new us(t);else return Lr(this,t||{}),void Zr(this,t||{},{})}var hs,fs={el:void 0,append:!1,template:null,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],staticDelimiters:["[[","]]"],staticTripleDelimiters:["[[[","]]]"],csp:!0,interpolate:!1,preserveWhitespace:!1,sanitize:!1,stripComments:!0,data:{},computed:{},magic:!1,modifyArrays:!1,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ls={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){if((t/=.5)<1)return.5*Math.pow(t,3);else return.5*(Math.pow(t-2,3)+2)}},cs="undefined"!=typeof window?window:null,ps=cs?document:null,ds=!!ps,ms=("undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),"undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply);try{Object.defineProperty({},"test",{value:0}),hs=!0}catch(gs){hs=!1}var vs,ys=ps?ps.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"):!1,bs=["o","ms","moz","webkit"];if(!cs)vs=null;else{if(vs={},!Date.now)Date.now=function(){return+new Date};if(!String.prototype.trim)String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")};if(!Object.create)Object.create=function(){var t=function(){};return function(e,n){if("object"!=typeof e)throw new TypeError("Prototype must be an object");t.prototype=e;var i=new t;return Ms(i,n),t.prototype=null,i}}();if(!Object.defineProperty)Object.defineProperty=Vs;if(!Object.freeze)Object.freeze=function(){"LOL"};if(!Object.keys)Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in r)if(t.call(r,s))o.push(s);if(e)for(var a=0;i>a;a++)if(t.call(r,n[a]))o.push(n[a]);return o}}();if(!Array.prototype.indexOf)Array.prototype.indexOf=function(t,e){var n,i=this;if(void 0===e)e=0;if(0>e)e+=this.length;if(0>e)e=0;for(n=i.length;n>e;e++)if(i.hasOwnProperty(e)&&i[e]===t)return e;return-1};if(!Array.prototype.forEach)Array.prototype.forEach=function(t,e){var n,i,r=this;for(n=0,i=r.length;i>n;n+=1)if(r.hasOwnProperty(n))t.call(e,r[n],n,r)};if(!Array.prototype.map)Array.prototype.map=function(t,e){var n,i,r,o=this,s=[];if(o instanceof String)o=o.toString(),r=!0;for(n=0,i=o.length;i>n;n+=1)if(o.hasOwnProperty(n)||r)s[n]=t.call(e,o[n],n,o);return s};if("function"!=typeof Array.prototype.reduce)Array.prototype.reduce=function(t,e){var n,i,r,o,s=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");if(r=this.length,o=!1,arguments.length>1)i=e,o=!0;for(n=0;r>n;n+=1)if(s.hasOwnProperty(n)){if(o)i=t(i,s[n],n,s)}else i=s[n],o=!0;if(!o)throw new TypeError("Reduce of empty array with no initial value");return i};if(!Array.prototype.filter)Array.prototype.filter=function(t,e){var n,i,r=this,o=[];for(n=0,i=r.length;i>n;n+=1)if(r.hasOwnProperty(n)&&t.call(e,r[n],n,r))o[o.length]=r[n];return o};if(!Array.prototype.every)Array.prototype.every=function(t,e){var n,i,r;if(null==this)throw new TypeError;if(n=Object(this),i=n.length>>>0,"function"!=typeof t)throw new TypeError;for(r=0;i>r;r+=1)if(r in n&&!t.call(e,n[r],r,n))return!1;return!0};if("function"!=typeof Function.prototype.bind)Function.prototype.bind=function(t){var e,n,i,r,o=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return e=o.call(arguments,1),n=this,i=function(){},r=function(){var r=this instanceof i&&t?this:t;return n.apply(r,e.concat(o.call(arguments)))},i.prototype=this.prototype,r.prototype=new i,r};if(!cs.addEventListener)!function(t,e){var n,i,r,o,s,a;if(t.appearsToBeIELessEqual8=!0,n=function(t,e){var n,i=this;for(n in t)i[n]=t[n];i.currentTarget=e,i.target=t.srcElement||e,i.timeStamp=+new Date,i.preventDefault=function(){t.returnValue=!1},i.stopPropagation=function(){t.cancelBubble=!0}},i=function(t,e){var i,r,o=this;i=o.listeners||(o.listeners=[]),r=i.length,i[r]=[e,function(t){e.call(o,new n(t,o))}],o.attachEvent("on"+t,i[r][1])},r=function(t,e){var n,i,r=this;if(r.listeners)for(n=r.listeners,i=n.length;i--;)if(n[i][0]===e)r.detachEvent("on"+t,n[i][1])},t.addEventListener=e.addEventListener=i,t.removeEventListener=e.removeEventListener=r,"Element"in t)t.Element.prototype.addEventListener=i,t.Element.prototype.removeEventListener=r;else a=e.createElement,e.createElement=function(t){var e=a(t);return e.addEventListener=i,e.removeEventListener=r,e},o=e.getElementsByTagName("head")[0],s=e.createElement("style"),o.insertBefore(s,o.firstChild)}(cs,ps);if(!cs.getComputedStyle)vs.getComputedStyle=function(){function e(t,i,r,o){var s=i[r],a=parseFloat(s),u=s.split(/\d/)[0];if(isNaN(a))if(/^thin|medium|thick$/.test(s))a=n(s),u="";else;o=null!=o?o:/%|em/.test(u)&&t.parentElement?e(t.parentElement,t.parentElement.currentStyle,"fontSize",null):16;var h="fontSize"==r?o:/width/i.test(r)?t.clientWidth:t.clientHeight;return"em"==u?a*o:"in"==u?96*a:"pt"==u?96*a/72:"%"==u?a/100*h:a}function n(t){var e,n;if(!s[t])e=ps.createElement("div"),e.style.display="block",e.style.position="fixed",e.style.width=e.style.height="0",e.style.borderRight=t+" solid black",ps.getElementsByTagName("body")[0].appendChild(e),n=e.getBoundingClientRect(),s[t]=n.right-n.left;return s[t]}function i(t,e){var n="border"==e?"Width":"",i=""+e+"Top"+n,r=""+e+"Right"+n,o=""+e+"Bottom"+n,s=""+e+"Left"+n;t[e]=(t[i]==t[r]==t[o]==t[s]?[t[i]]:t[i]==t[o]&&t[s]==t[r]?[t[i],t[r]]:t[s]==t[r]?[t[i],t[r],t[o]]:[t[i],t[r],t[o],t[s]]).join(" ")}function r(t){var n,r,o,s;n=t.currentStyle,r=this,o=e(t,n,"fontSize",null);for(s in n)if("normal"===n[s]&&a.hasOwnProperty(s))r[s]=a[s];else if(/width|height|margin.|padding.|border.+W/.test(s))if("auto"===n[s]){if(/^width|height/.test(s))r[s]=("width"===s?t.clientWidth:t.clientHeight)+"px";else if(/(?:padding)?Top|Bottom$/.test(s))r[s]="0px"}else r[s]=e(t,n,s,o)+"px";else if("styleFloat"===s)r["float"]=n[s];else r[s]=n[s];return i(r,"margin"),i(r,"padding"),i(r,"border"),r.fontSize=o+"px",r}function o(t){return new r(t)}var s={},a={fontWeight:400,lineHeight:1.2,letterSpacing:0};return r.prototype={constructor:r,getPropertyPriority:t,getPropertyValue:function(t){return this[t]||""},item:t,removeProperty:t,setProperty:t,getPropertyCSSValue:t},o}()}var ws,ks,xs,Es,_s,Os,As,Ss,js,Cs=vs,Ts="http://www.w3.org/1999/xhtml",Fs="http://www.w3.org/1998/Math/MathML",Ns="http://www.w3.org/2000/svg",Ps="http://www.w3.org/1999/xlink",Bs="http://www.w3.org/XML/1998/namespace",Is="http://www.w3.org/2000/xmlns",Ks={html:Ts,mathml:Fs,svg:Ns,xlink:Ps,xml:Bs,xmlns:Is};if(!ys)ws=function(t,e,n){if(e&&e!==Ts)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return n?ps.createElement(t,n):ps.createElement(t)};else ws=function(t,e,n){if(!e||e===Ts)return n?ps.createElement(t,n):ps.createElement(t);else return n?ps.createElementNS(e,t,n):ps.createElementNS(e,t)};if(!ds)ks=null;else{for(xs=ws("div"),Es=["matches","matchesSelector"],js=function(t){return function(e,n){return e[t](n)}},As=Es.length;As--&&!ks;)if(_s=Es[As],xs[_s])ks=js(_s);else for(Ss=bs.length;Ss--;)if(Os=bs[As]+_s.substr(0,1).toUpperCase()+_s.substring(1),xs[Os]){ks=js(Os);break}if(!ks)ks=function(t,e){var n,i,r;if(i=t.parentNode,!i)xs.innerHTML="",i=xs,t=t.cloneNode(),xs.appendChild(t);for(n=i.querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1}}var Rs,Vs,Ms,Ls=/(-.)/g,Ds=/[A-Z]/g;try{if(Object.defineProperty({},"test",{get:function(){},set:function(){}}),ps)Object.defineProperty(ws("div"),"test",{value:0});Vs=Object.defineProperty}catch(Ws){Vs=function(t,e,n){if(n.get)t[e]=n.get();else t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Ws){throw Ws}if(ps)Object.defineProperties(ws("div"),{test:{value:0}});Ms=Object.defineProperties}catch(Ws){Ms=function(t,e){var n;for(n in e)if(e.hasOwnProperty(n))Vs(t,n,e[n])}}try{Object.create(null),Rs=Object.create}catch(Ws){Rs=function(){var t=function(){};return function(e,n){var i;if(null===e)return{};if(t.prototype=e,i=new t,n)Object.defineProperties(i,n);return i}}()}var Us,zs,$s,qs=Object.prototype.hasOwnProperty,Zs=Object.prototype.toString,Hs={};if(ms){var Qs=["%cRactive.js %c0.8.0-edge-fbaba751cc3b07d2d452766f33eebb99190dc267 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],Ys="You're running Ractive 0.8.0-edge-fbaba751cc3b07d2d452766f33eebb99190dc267 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";$s=function(){var e=!!console.groupCollapsed;if(console[e?"groupCollapsed":"log"].apply(console,Qs),console.log(Ys),e)console.groupEnd(Qs);$s=t},zs=function(t,e){if($s(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n?n.ractive:null;if(i){var r;if(i.component&&(r=i.component.name))t="<"+r+"> "+t;var o;if(o=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))e.push(o)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Us=function(){console.log.apply(console,arguments)}}else zs=Us=$s=t;var Gs="Bad arguments",Js='A function was specified for "%s" %s, but no %s was returned',Xs=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},ta={number:function(t,e){var n;if(!c(t)||!c(e))return null;if(t=+t,e=+e,n=e-t,!n)return function(){return t};else return function(e){return t+e*n}},array:function(t,e){var n,i,r,o;if(!f(t)||!f(e))return null;for(n=[],i=[],o=r=Math.min(t.length,e.length);o--;)i[o]=E(t[o],e[o]);for(o=r;o<t.length;o+=1)n[o]=t[o];for(o=r;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,o,s;if(!p(t)||!p(e))return null;n=[],o={},r={};for(s in t)if(qs.call(t,s))if(qs.call(e,s))n.push(s),r[s]=E(t[s],e[s])||_(e[s]);else o[s]=t[s];for(s in e)if(qs.call(e,s)&&!qs.call(t,s))o[s]=e[s];return i=n.length,function(t){for(var e,s=i;s--;)e=n[s],o[e]=r[e](t);return o}}},ea={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}},na=function(t){this.event=t,this.method="on"+t,this.deprecate=ea[t]};na.prototype.call=function(t,e,n){if(e[t])return n?e[t](n):e[t](),!0;else return void 0},na.prototype.fire=function(t,e){if(this.call(this.method,t,e),!t[this.method]&&this.deprecate&&this.call(this.deprecate.deprecated,t,e))if(this.deprecate.message)b(this.deprecate.message);else b('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement);e?t.fire(this.event,e):t.fire(this.event)};var ia,ra={},oa={},sa={};if("function"==typeof Promise)ia=Promise;else ia=function(t){var e,n,i,r,o,s,a=[],u=[],h=ra;i=function(t){return function(i){if(h===ra)e=i,h=t,n=P(h===oa?a:u,e),N(n)}},r=i(oa),o=i(sa);try{t(r,o)}catch(f){o(f)}return s={then:function(t,e){var i=new ia(function(r,o){var s=function(t,e,n){if("function"==typeof t)e.push(function(e){var n;try{n=t(e),B(i,n,r,o)}catch(s){o(s)}});else e.push(n)};if(s(t,a,r),s(e,u,o),h!==ra)N(n)});return i}},s["catch"]=function(t){return this.then(null,t)},s},ia.all=function(t){return new ia(function(e,n){var i,r,o,s=[];if(!t.length)return void e(s);for(o=function(t,r){if(t&&"function"==typeof t.then)t.then(function(t){s[r]=t,--i||e(s)},n);else s[r]=t,--i||e(s)},i=r=t.length;r--;)o(t[r],r)})},ia.resolve=function(t){return new ia(function(e){e(t)})},ia.reject=function(t){return new ia(function(e,n){n(t)})};var aa=ia,ua=function(t,e){if(this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.outrosComplete=!1,e)e.addChild(this)};ua.prototype.add=function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},ua.prototype.addChild=function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},ua.prototype.decrementOutros=function(){this.outroChildren-=1,R(this)},ua.prototype.decrementTotal=function(){this.totalChildren-=1,R(this)},ua.prototype.detachNodes=function(){this.detachQueue.forEach(I),this.children.forEach(K)},ua.prototype.ready=function(){V(this)},ua.prototype.remove=function(t){var e=t.isIntro?this.intros:this.outros;T(e,t),R(this)},ua.prototype.start=function(){this.children.forEach(function(t){return t.start()}),this.intros.concat(this.outros).forEach(function(t){return t.start()}),this.ready=!0,R(this)};var ha,fa=new na("change"),la={start:function(t,e){var n,i;if(e)n=new aa(function(t){return i=t});return ha={previousBatch:ha,transitionManager:new ua(i,ha&&ha.transitionManager),fragments:[],tasks:[],immediateObservers:[],deferredObservers:[],ractives:[],instance:t},n},end:function(){if(D(),!ha.previousBatch)ha.transitionManager.start();ha=ha.previousBatch},addFragment:function(t){O(ha.fragments,t)},addFragmentToRoot:function(t){if(ha){for(var e=ha;e.previousBatch;)e=e.previousBatch;O(e.fragments,t)}},addInstance:function(t){if(ha)O(ha.ractives,t)},addObserver:function(t,e){O(e?ha.deferredObservers:ha.immediateObservers,t)},registerTransition:function(t){t._manager=ha.transitionManager,ha.transitionManager.add(t)},detachWhenReady:function(t){ha.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(!ha)t();else{for(n=ha;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}}},ca=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,pa=/([^\\](?:\\\\)*)\./,da=/\\|\./g,ma=/((?:\\)+)\1|\\(\.)/g,ga=/\*/,va="Cannot add to a non-numeric value",ya=aa.resolve();Vs(ya,"stop",{value:t});var ba=ls.linear,wa=new na("detach"),ka=function(t,e,n,i){this.ractive=t,this.selector=e,this.live=n,this.isComponentQuery=i,this.result=[],this.dirty=!0};ka.prototype.add=function(t){this.result.push(t),this.makeDirty()},ka.prototype.cancel=function(){var t=this._root[this.isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e);if(-1!==n)t.splice(n,1),t[e]=null},ka.prototype.init=function(){this.dirty=!1},ka.prototype.makeDirty=function(){var t=this;if(!this.dirty)this.dirty=!0,la.scheduleTask(function(){return t.update()})},ka.prototype.remove=function(t){var e=this.result.indexOf(this.isComponentQuery?t.instance:t);if(-1!==e)this.result.splice(e,1)},ka.prototype.update=function(){this.result.sort(this.isComponentQuery?rt:it),this.dirty=!1},ka.prototype.test=function(t){return this.isComponentQuery?!this.selector||t.name===this.selector:t?ks(t,this.selector):null};var xa,Ea={},_a={},Oa=[],Aa=function(t,e){this.value=t,this.isReadonly=this.isKey=!0,this.deps=[],this.links=[],this.parent=e};Aa.prototype.get=function(t){if(t)Ot(this);return $(this.value)},Aa.prototype.getKeypath=function(){return $(this.value)},Aa.prototype.rebinding=function(t,e){for(var n=this,i=this.deps.length;i--;)n.deps[i].rebinding(t,e,!1);for(i=this.links.length;i--;)n.links[i].rebinding(t,e,!1)},Aa.prototype.register=function(t){this.deps.push(t)},Aa.prototype.registerLink=function(t){O(this.links,t)},Aa.prototype.unregister=function(t){T(this.deps,t)},Aa.prototype.unregisterLink=function(t){T(this.links,t)};var Sa=function(t,e){this.parent=t,this.ractive=e,this.value=e?t.getKeypath(e):t.getKeypath(),this.deps=[],this.children={},this.isReadonly=this.isKeypath=!0};Sa.prototype.get=function(t){if(t)Ot(this);return this.value},Sa.prototype.getChild=function(t){if(!(t._guid in this.children)){var e=new Sa(this.parent,t);this.children[t._guid]=e,e.owner=this}return this.children[t._guid]},Sa.prototype.getKeypath=function(){return this.value},Sa.prototype.handleChange=function(){for(var t=this,e=Object.keys(this.children),n=e.length;n--;)t.children[e[n]].handleChange();this.deps.forEach(jt)},Sa.prototype.rebindChildren=function(t){for(var e=this,n=Object.keys(this.children),i=n.length;i--;){var r=e.children[n[i]];r.value=t.getKeypath(r.ractive),r.handleChange()}},Sa.prototype.rebinding=function(t,e){for(var n=this,i=t?t.getKeypathModel(this.ractive):void 0,r=Object.keys(this.children),o=r.length;o--;)n.children[r[o]].rebinding(t,e,!1);for(o=this.deps.length;o--;)n.deps[o].rebinding(i,n,!1)},Sa.prototype.register=function(t){this.deps.push(t)},Sa.prototype.removeChild=function(t){if(t.ractive)delete this.children[t.ractive._guid]},Sa.prototype.teardown=function(){var t=this;if(this.owner)this.owner.removeChild(this);for(var e=Object.keys(this.children),n=e.length;n--;)t.children[e[n]].teardown()},Sa.prototype.unregister=function(t){if(T(this.deps,t),!this.deps.length)this.teardown()};var ja=Object.prototype.hasOwnProperty,Ca={early:[],mark:[]},Ta={early:[],mark:[]},Fa=function(t){if(this.deps=[],this.children=[],this.childByKey={},this.links=[],this.keyModels={},this.unresolved=[],this.unresolvedByKey={},this.bindings=[],this.patternObservers=[],t)this.parent=t,this.root=t.root};Fa.prototype.addUnresolved=function(t,e){if(!this.unresolvedByKey[t])this.unresolved.push(t),this.unresolvedByKey[t]=[];this.unresolvedByKey[t].push(e)},Fa.prototype.addShuffleTask=function(t,e){if(void 0===e)e="early";Ca[e].push(t)},Fa.prototype.addShuffleRegister=function(t,e){if(void 0===e)e="early";Ta[e].push({model:this,item:t})},Fa.prototype.clearUnresolveds=function(t){for(var e=this,n=this.unresolved.length;n--;){var i=e.unresolved[n];if(!t||i===t){for(var r=e.unresolvedByKey[i],o=e.has(i),s=r.length;s--;){if(o)r[s].attemptResolution();if(r[s].resolved)r.splice(s,1)}if(!r.length)e.unresolved.splice(n,1),e.unresolvedByKey[i]=null}else;}},Fa.prototype.findMatches=function(t){var e,n,i=t.length,r=[this],o=function(){var i=t[n];if("*"===i)e=[],r.forEach(function(t){e.push.apply(e,t.getValueChildren(t.get()))});else e=r.map(function(t){return t.joinKey(i)});r=e};for(n=0;i>n;n+=1)o();return e},Fa.prototype.getKeyModel=function(t,e){if(void 0!==t&&!e)return this.parent.getKeyModel(t,!0);if(!(t in this.keyModels))this.keyModels[t]=new Aa(W(t),this);return this.keyModels[t]},Fa.prototype.getKeypath=function(t){if(t!==this.ractive&&this._link)return this._link.target.getKeypath(t);if(!this.keypath)this.keypath=this.parent.isRoot?this.key:""+this.parent.getKeypath(t)+"."+W(this.key);return this.keypath},Fa.prototype.getValueChildren=function(t){var e,n=this;if(f(t)){if(e=[],"length"in this&&this.length!==t.length)e.push(this.joinKey("length"));t.forEach(function(t,i){e.push(n.joinKey(i))})}else if(p(t)||"function"==typeof t)e=Object.keys(t).map(function(t){return n.joinKey(t)});else if(null!=t)return[];return e},Fa.prototype.getVirtual=function(t){var e=this,n=this.get(t,{virtual:!1});if(p(n)){for(var i=f(n)?[]:{},r=Object.keys(n),o=r.length;o--;){var s=e.childByKey[r[o]];if(!s)i[r[o]]=n[r[o]];else if(s._link)i[r[o]]=s._link.getVirtual();else i[r[o]]=s.getVirtual()}for(o=this.children.length;o--;){var a=e.children[o];if(!(a.key in i)&&a._link)i[a.key]=a._link.getVirtual()}return i}else return n},Fa.prototype.has=function(t){if(this._link)return this._link.has(t);var e=this.get();if(!e)return!1;if(t=$(t),ja.call(e,t))return!0;for(var n=e.constructor;n!==Function&&n!==Array&&n!==Object;){if(ja.call(n.prototype,t))return!0;n=n.constructor}return!1},Fa.prototype.joinAll=function(t,e){for(var n=this,i=0;i<t.length;i+=1){if(e&&e.lastLink===!1&&i+1===t.length&&n.childByKey[t[i]]&&n.childByKey[t[i]]._link)return n.childByKey[t[i]];n=n.joinKey(t[i],e)}return n},Fa.prototype.notifyUpstream=function(){for(var t=this.parent,e=this;t;){if(t.patternObservers.length)t.patternObservers.forEach(function(t){return t.notify(e.key)});t.deps.forEach(jt),e=t,t=t.parent}},Fa.prototype.rebinding=function(t,e,n){for(var i=this,r=this.deps.length;r--;)if(i.deps[r].rebinding)i.deps[r].rebinding(t,e,n);for(r=this.links.length;r--;){var o=i.links[r];if(o.owner._link)o.relinking(t,!0,n)}for(r=this.children.length;r--;){
var s=i.children[r];s.rebinding(t?t.joinKey(s.key):void 0,s,n)}for(r=this.unresolved.length;r--;)for(var a=i.unresolvedByKey[i.unresolved[r]],u=a.length;u--;)a[u].rebinding(t,e);if(this.keypathModel)this.keypathModel.rebinding(t,e,!1);for(r=this.bindings.length;r--;)i.bindings[r].rebinding(t,e,n)},Fa.prototype.register=function(t){this.deps.push(t)},Fa.prototype.registerChange=function(t,e){if(!this.isRoot)this.root.registerChange(t,e);else this.changes[t]=e,la.addInstance(this.root.ractive)},Fa.prototype.registerLink=function(t){O(this.links,t)},Fa.prototype.registerPatternObserver=function(t){this.patternObservers.push(t),this.register(t)},Fa.prototype.registerTwowayBinding=function(t){this.bindings.push(t)},Fa.prototype.removeUnresolved=function(t,e){var n=this.unresolvedByKey[t];if(n)T(n,e)},Fa.prototype.shuffled=function(){for(var t=this,e=this.children.length;e--;)t.children[e].shuffled();if(this.wrapper)this.wrapper.teardown(),this.wrapper=null,this.rewrap=!0},Fa.prototype.unregister=function(t){T(this.deps,t)},Fa.prototype.unregisterLink=function(t){T(this.links,t)},Fa.prototype.unregisterPatternObserver=function(t){T(this.patternObservers,t),this.unregister(t)},Fa.prototype.unregisterTwowayBinding=function(t){T(this.bindings,t)},Fa.prototype.updateFromBindings=function(t){for(var e=this,n=this.bindings.length;n--;){var i=e.bindings[n].getValue();if(i!==e.value)e.set(i)}if(!this.bindings.length){var r=Lt(this.deps);if(r&&r.value!==this.value)this.set(r.value)}if(t)if(this.children.forEach(Mt),this.links.forEach(Mt),this._link)this._link.updateFromBindings(t)},Aa.prototype.addShuffleTask=Fa.prototype.addShuffleTask,Aa.prototype.addShuffleRegister=Fa.prototype.addShuffleRegister,Sa.prototype.addShuffleTask=Fa.prototype.addShuffleTask,Sa.prototype.addShuffleRegister=Fa.prototype.addShuffleRegister;var Na=function(t){function e(e,n,i,r){if(t.call(this,e),this.owner=n,this.target=i,this.key=void 0===r?n.key:r,n.isLink)this.sourcePath=""+n.sourcePath+"."+this.key;i.registerLink(this),this.isReadonly=e.isReadonly,this.isLink=!0}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.animate=function(t,e,n,i){this.target.animate(t,e,n,i)},e.prototype.get=function(t,e){if(t)Ot(this);return this.target.get(!1,e)},e.prototype.getKeypath=function(e){if(e&&e!==this.root.ractive)return this.target.getKeypath(e);else return t.prototype.getKeypath.call(this,e)},e.prototype.getKeypathModel=function(t){if(!this.keypathModel)this.keypathModel=new Sa(this);if(t&&t!==this.root.ractive)return this.keypathModel.getChild(t);else return this.keypathModel},e.prototype.handleChange=function(){this.deps.forEach(jt),this.links.forEach(jt),this.notifyUpstream()},e.prototype.joinKey=function(t){if(void 0===t||""===t)return this;if(!this.childByKey.hasOwnProperty(t)){var n=new e(this,this,this.target.joinKey(t),t);this.children.push(n),this.childByKey[t]=n}return this.childByKey[t]},e.prototype.mark=function(){this.target.mark()},e.prototype.marked=function(){this.links.forEach(Tt),this.deps.forEach(jt),this.clearUnresolveds()},e.prototype.relinked=function(){this.target.registerLink(this),this.children.forEach(function(t){return t.relinked()})},e.prototype.relinking=function(t,e,n){var i=this;if(e&&this.sourcePath)t=Wt(this.sourcePath,t,this.target);if(t&&this.target!==t){if(this.target.unregisterLink(this),this.keypathModel)this.keypathModel.rebindChildren(t);if(this.target=t,this.children.forEach(function(e){e.relinking(t.joinKey(e.key),!1,n)}),e)this.addShuffleTask(function(){if(i.relinked(),!n)i.notifyUpstream()})}},e.prototype.set=function(t){this.target.set(t)},e.prototype.shuffle=function(t){var e=this;if(!this.shuffling){if(this.shuffling=!0,!this.target.shuffling)this.target.shuffle(t);for(var n=t.length;n--;){var i=t[n];if(n!==i){if(n in e.childByKey)e.childByKey[n].rebinding(!~i?void 0:e.joinKey(i),e.childByKey[n],!0);if(!~i&&e.keyModels[n])e.keyModels[n].rebinding(void 0,e.keyModels[n],!1);else if(~i&&e.keyModels[n]){if(!e.keyModels[i])e.childByKey[i].getKeyModel(i);e.keyModels[n].rebinding(e.keyModels[i],e.keyModels[n],!1)}}else;}var r=this.source().length!==this.source().value.length;for(this.links.forEach(function(e){return e.shuffle(t)}),n=this.deps.length;n--;)if(e.deps[n].shuffle)e.deps[n].shuffle(t);if(this.marked(),r)this.notifyUpstream();this.shuffling=!1}},e.prototype.source=function(){if(this.target.source)return this.target.source();else return this.target},e.prototype.teardown=function(){if(this._link)this._link.teardown();this.children.forEach(Nt)},e}(Fa);Fa.prototype.link=function(t,e){var n=this._link||new Na(this.parent,this,t,this.key);if(n.sourcePath=e,this._link)this._link.relinking(t,!0,!1);this.rebinding(n,this,!1),Dt();var i=!this._link;if(this._link=n,i)this.parent.clearUnresolveds();return n.marked(),n},Fa.prototype.unlink=function(){if(this._link){var t=this._link;this._link=void 0,t.rebinding(this,this._link),Dt(),t.teardown()}};var Pa;if(!cs)Pa=null;else!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];if(!n.requestAnimationFrame)r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,o;return n=Date.now(),i=Math.max(0,16-(n-e)),o=r(function(){t(n+i)},i),e=n+i,o}}}(bs,0,cs),Pa=cs.requestAnimationFrame;var Ba=Pa,Ia=cs&&cs.performance&&"function"==typeof cs.performance.now?function(){return cs.performance.now()}:function(){return Date.now()},Ka=[],Ra=!1,Va=function(t){if(this.duration=t.duration,this.step=t.step,this.complete=t.complete,this.easing=t.easing,this.start=Ia(),this.end=this.start+this.duration,this.running=!0,Ka.push(this),!Ra)Ba(Ut)};Va.prototype.tick=function(t){if(!this.running)return!1;if(t>this.end){if(this.step)this.step(1);if(this.complete)this.complete(1);return!1}var e=t-this.start,n=this.easing(e/this.duration);if(this.step)this.step(n);return!0},Va.prototype.stop=function(){if(this.abort)this.abort();this.running=!1};var Ma={},La=function(t){function e(e,n){if(t.call(this,e),this.value=void 0,this.ticker=null,e)if(this.key=$(n),this.isReadonly=e.isReadonly,e.value){if(this.value=e.value[this.key],f(this.value))this.length=this.value.length;this.adapt()}}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.adapt=function(){var t=this,e=this.root.adaptors,n=e.length;if(this.rewrap=!1,0!==n){var i=this.value,r=this.root.ractive,o=this.getKeypath();if(this.wrapper){var s=!this.wrapper.reset||this.wrapper.reset(i)===!1;if(s){if(this.wrapper.teardown(),this.wrapper=null,void 0!==this.value){var a=this.parent.value||this.parent.createBranch(this.key);if(a[this.key]!==this.value)a[this.key]=i}}else return void(this.value=this.wrapper.get())}var u;for(u=0;n>u;u+=1){var h=e[u];if(h.filter(i,o,r)){t.wrapper=h.wrap(r,i,o,$t(o)),t.wrapper.value=t.value,t.wrapper.__model=t,t.value=t.wrapper.get();break}}}},e.prototype.animate=function(t,e,n,i){var r=this;if(this.ticker)this.ticker.stop();var o,s=new aa(function(t){return o=t});return this.ticker=new Va({duration:n.duration,easing:n.easing,step:function(t){var e=i(t);if(r.applyValue(e),n.step)n.step(t,e)},complete:function(){if(r.applyValue(e),n.complete)n.complete(e);r.ticker=null,o()}}),s.stop=this.ticker.stop,s},e.prototype.applyValue=function(t){if(!l(t,this.value)){if(this.registerChange(this.getKeypath(),t),this.parent.wrapper&&this.parent.wrapper.set)this.parent.wrapper.set(this.key,t),this.parent.value=this.parent.wrapper.get(),this.value=this.parent.value[this.key],this.adapt();else if(this.wrapper)this.value=t,this.adapt();else{var e=this.parent.value||this.parent.createBranch(this.key);e[this.key]=t,this.value=t,this.adapt()}if(this.parent.clearUnresolveds(),this.clearUnresolveds(),f(t))this.length=t.length;if(this.links.forEach(jt),this.children.forEach(Ct),this.deps.forEach(jt),this.notifyUpstream(),"length"===this.key&&f(this.parent.value))this.parent.length=this.parent.value.length}},e.prototype.createBranch=function(t){var e=c(t)?[]:{};return this.set(e),e},e.prototype.get=function(t,e){if(this._link)return this._link.get(t,e);if(t)Ot(this);if(e&&e.virtual)return this.getVirtual(!1);else return t&&this.wrapper?this.wrapper.value:this.value},e.prototype.getKeypathModel=function(){if(!this.keypathModel)this.keypathModel=new Sa(this);return this.keypathModel},e.prototype.joinKey=function(t,n){if(this._link)if(n&&!n.lastLink==!1&&(void 0===t||""===t))return this;else return this._link.joinKey(t);if(void 0===t||""===t)return this;if(!this.childByKey.hasOwnProperty(t)){var i=new e(this,t);this.children.push(i),this.childByKey[t]=i}if(this.childByKey[t]._link)return this.childByKey[t]._link;else return this.childByKey[t]},e.prototype.mark=function(){if(this._link)return this._link.mark();var t=this.retrieve();if(!l(t,this.value)){var e=this.value;if(this.value=t,e!==t||this.rewrap)this.adapt();if(f(t))this.length=t.length;this.children.forEach(Ct),this.links.forEach(Tt),this.deps.forEach(jt),this.clearUnresolveds()}},e.prototype.merge=function(t,e){var n=this.value,i=t;if(n===i)n=qt(this);if(e)n=n.map(e),i=i.map(e);var r=n.length,o={},s=0,a=n.map(function(t){var e,n=s;do{if(e=i.indexOf(t,n),-1===e)return-1;n=e+1}while(o[e]===!0&&r>n);if(e===s)s+=1;return o[e]=!0,e});this.parent.value[this.key]=t,this.shuffle(a)},e.prototype.retrieve=function(){return this.parent.value?this.parent.value[this.key]:void 0},e.prototype.set=function(t){if(this.ticker)this.ticker.stop();this.applyValue(t)},e.prototype.shuffle=function(t){var e=this;this.shuffling=!0;for(var n=t.length;n--;){var i=t[n];if(n!==i){if(n in e.childByKey)e.childByKey[n].rebinding(!~i?void 0:e.joinKey(i),e.childByKey[n],!0);if(!~i&&e.keyModels[n])e.keyModels[n].rebinding(void 0,e.keyModels[n],!1);else if(~i&&e.keyModels[n]){if(!e.keyModels[i])e.childByKey[i].getKeyModel(i);e.keyModels[n].rebinding(e.keyModels[i],e.keyModels[n],!1)}}else;}var r=this.length!==this.value.length;for(this.links.forEach(function(e){return e.shuffle(t)}),Dt("early"),n=this.deps.length;n--;)if(e.deps[n].shuffle)e.deps[n].shuffle(t);if(this.mark(),Dt("mark"),r)this.notifyUpstream();this.shuffling=!1},e.prototype.teardown=function(){if(this._link)this._link.teardown();if(this.children.forEach(Nt),this.wrapper)this.wrapper.teardown();if(this.keypathModel)this.keypathModel.teardown()},e}(Fa),Da=function(t){function e(){t.call(this,null,"@global"),this.value="undefined"!=typeof global?global:window,this.isRoot=!0,this.root=this,this.adaptors=[]}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getKeypath=function(){return"@global"},e.prototype.registerChange=function(){},e}(La),Wa=new Da,Ua=/^@[^\(]+\(([^\)]+)\)/,za=Array.prototype,$a={},qa=new na("update"),Za=Jt("push").model,Ha=Jt("pop").model,Qa=Jt("shift").model,Ya=Jt("unshift").model,Ga=Jt("sort").model,Ja=Jt("splice").model,Xa=Jt("reverse").model,tu=ps&&ps.querySelector,eu=new na("insert"),nu=function(t,e,n){var i=this;for(this.fragment=t,this.reference=U(e),this.callback=n,this.keys=z(e),this.resolved=!1,this.contexts=[];t;){if(t.context)t.context.addUnresolved(i.keys[0],i),i.contexts.push(t.context);t=t.componentParent||t.parent}};nu.prototype.attemptResolution=function(){if(!this.resolved){var t=xt(this.fragment,this.reference);if(t)this.resolved=!0,this.callback(t)}},nu.prototype.forceResolution=function(){if(!this.resolved){var t=this.fragment.findContext().joinAll(this.keys);this.callback(t),this.resolved=!0}},nu.prototype.rebinding=function(t,e){var n=this;if(e)e.removeUnresolved(this.keys[0],this);if(t)la.scheduleTask(function(){return t.addUnresolved(n.keys[0],n)})},nu.prototype.unbind=function(){var t=this;if(T(this.fragment.unresolved,this),!this.resolved)this.contexts.forEach(function(e){return e.removeUnresolved(t.keys[0],t)})};var iu=function(t,e,n,i){var r=this;if(this.context=i.context||t,this.callback=n,this.ractive=t,e)this.resolved(e);else this.keypath=i.keypath,this.resolver=new nu(t.fragment,i.keypath,function(t){r.resolved(t)});if(i.init!==!1)this.dirty=!0,this.dispatch();else this.oldValue=this.newValue;this.defer=i.defer,this.once=i.once,this.strict=i.strict,this.dirty=!1};iu.prototype.cancel=function(){if(this.cancelled=!0,this.model)this.model.unregister(this);else this.resolver.unbind()},iu.prototype.dispatch=function(){if(!this.cancelled)this.callback.call(this.context,this.newValue,this.oldValue,this.keypath),this.oldValue=this.newValue,this.dirty=!1},iu.prototype.handleChange=function(){var t=this;if(!this.dirty){var e=this.model.get();if(l(e,this.oldValue))return;if(this.newValue=e,this.strict&&this.newValue===this.oldValue)return;if(la.addObserver(this,this.defer),this.dirty=!0,this.once)la.scheduleTask(function(){return t.cancel()})}},iu.prototype.rebinding=function(t,e){var n=this;if(t=Wt(this.keypath,t,e),t===this.model)return!1;if(this.model)this.model.unregister(this);if(t)t.addShuffleTask(function(){return n.resolved(t)})},iu.prototype.resolved=function(t){this.model=t,this.keypath=t.getKeypath(this.ractive),this.oldValue=void 0,this.newValue=t.get(),t.register(this)};var ru=function(t,e,n,i,r){var o=this;this.context=r.context||t,this.ractive=t,this.baseModel=e,this.keys=n,this.callback=i;var s=n.join("\\.").replace(/\*/g,"(.+)"),a=e.getKeypath(t);this.pattern=new RegExp("^"+(a?a+"\\.":"")+s+"$"),this.oldValues={},this.newValues={},this.defer=r.defer,this.once=r.once,this.strict=r.strict,this.dirty=!1,this.changed=[],this.partial=!1;var u=e.findMatches(this.keys);if(u.forEach(function(t){o.newValues[t.getKeypath(o.ractive)]=t.get()}),r.init!==!1)this.dispatch();else this.oldValues=this.newValues;e.registerPatternObserver(this)};ru.prototype.cancel=function(){this.baseModel.unregisterPatternObserver(this)},ru.prototype.dispatch=function(){var t=this;if(Object.keys(this.newValues).forEach(function(e){if(!t.newKeys||t.newKeys[e]){var n=t.newValues[e],i=t.oldValues[e];if(!t.strict||n!==i)if(!l(n,i)){var r=[n,i,e];if(e){var o=t.pattern.exec(e);if(o)r=r.concat(o.slice(1))}t.callback.apply(t.context,r)}}}),this.partial)for(var e in this.newValues)this.oldValues[e]=this.newValues[e];else this.oldValues=this.newValues;this.newKeys=null,this.dirty=!1},ru.prototype.notify=function(t){this.changed.push(t)},ru.prototype.shuffle=function(t){var e=this;if(f(this.baseModel.value)){var n=this.baseModel.getKeypath(this.ractive),i=this.baseModel.value.length,r=this.keys.length>1?"."+this.keys.slice(1).join("."):"";this.newKeys={};for(var o=0;o<t.length;o++)if(-1!==t[o]&&t[o]!==o)e.newKeys[""+n+"."+o+r]=!0;else;for(var s=t.touchedFrom;i>s;s++)e.newKeys[""+n+"."+s+r]=!0}},ru.prototype.handleChange=function(){var t=this;if(!this.dirty||this.changed.length){if(!this.dirty)this.newValues={};if(!this.changed.length)this.baseModel.findMatches(this.keys).forEach(function(e){var n=e.getKeypath(t.ractive);t.newValues[n]=e.get()}),this.partial=!1;else{var e=this.baseModel.isRoot?this.changed:this.changed.map(function(e){return t.baseModel.getKeypath(t.ractive)+"."+W(e)});this.baseModel.findMatches(this.keys).forEach(function(n){var i=n.getKeypath(t.ractive);if(e.filter(function(t){return 0===i.indexOf(t)&&(i.length===t.length||"."===i[t.length])}).length)t.newValues[i]=n.get()}),this.partial=!0}if(la.addObserver(this,this.defer),this.dirty=!0,this.changed.length=0,this.once)this.cancel()}};var ou=function(t,e,n,i){if(this.context=t,this.model=e,this.keypath=e.getKeypath(),this.callback=n,this.pending=null,e.register(this),i.init!==!1)this.sliced=[],this.shuffle([]),this.handleChange();else this.sliced=this.slice()};ou.prototype.handleChange=function(){if(this.pending)this.callback(this.pending),this.pending=null;else this.shuffle(this.sliced.map(ze)),this.handleChange()},ou.prototype.shuffle=function(t){var e,n=this,i=this.slice(),r=[],o=[],s={};if(t.forEach(function(t,i){if(s[t]=!0,t!==i&&void 0===e)e=i;if(-1===t)o.push(n.sliced[i])}),void 0===e)e=t.length;for(var a=i.length,u=0;a>u;u+=1)if(!s[u])r.push(i[u]);this.pending={inserted:r,deleted:o,start:e},this.sliced=i},ou.prototype.slice=function(){var t=this.model.get();return f(t)?t.slice():[]};var su={init:!1,once:!0},au=Jt("pop").path,uu=Jt("push").path,hu="/* Ractive.js component styles */",fu=[],lu=!1,cu=null,pu=null;if(ps&&(!cu||!cu.parentNode))cu=ps.createElement("style"),cu.type="text/css",ps.getElementsByTagName("head")[0].appendChild(cu),pu=!!cu.styleSheet;var du,mu,gu=new na("render"),vu=new na("complete"),yu={extend:function(t,e,n){e.adapt=nn(e.adapt,j(n.adapt))},init:function(){}},bu=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,wu=/\/\*.*?\*\//g,ku=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>~:]))+)((?:::?[^\s\+\>\~\(:]+(?:\([^\)]+\))?)*\s*[\s\+\>\~]?)\s*/g,xu=/^(?:@|\d+%)/,Eu=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,_u={name:"css",extend:function(t,e,n){if(n.css){var i=hn(),r=n.noCssTransform?n.css:an(n.css,i);e.cssId=i,Ge({id:i,styles:r})}},init:function(t,e,n){if(n.css)b("\nThe css option is currently not supported on a per-instance basis and will be discarded. Instead, we recommend instantiating from a component definition with a css option.\n\nconst Component = Ractive.extend({\n	...\n	css: '/* your css */',\n	...\n});\n\nconst componentInstance = new Component({ ... })\n		")}},Ou={name:"data",extend:function(t,e,n){var i,r;if(n.data&&p(n.data))for(i in n.data)if(r=n.data[i],r&&"object"==typeof r)if(p(r)||f(r))b("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=ln(e.data,n.data)},init:function(t,e,n){var i=ln(t.prototype.data,n.data);if("function"==typeof i)i=i.call(e);if(i&&i.constructor===Object)for(var r in i)if("function"==typeof i[r])i[r]=q(i[r],e);return i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.root.set(e),!0}},Au=4,Su=/\$\{([^\}]+)\}/g,ju=Rs(null),Cu=/^\s+/;mu=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},mu.prototype=Error.prototype,du=function(t,e){var n,i,r=this,o=0;if(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=o+t.length+1;return o=e,e},0),this.init)this.init(t,e);for(n=[];r.pos<r.str.length&&(i=r.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},du.prototype={read:function(t){var e,n,i,r,o=this;if(!t)t=this.converters;for(e=this.pos,i=t.length,n=0;i>n;n+=1)if(o.pos=e,r=t[n](o))return r;return null},getLinePos:function(t){for(var e,n=this,i=0,r=0;t>=n.lineEnds[i];)r=n.lineEnds[i],i+=1;return e=t-r,[i+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],r=this.lines[e[0]-1],o=0,s=r.replace(/\t/g,function(t,n){if(n<e[1])o+=1;return"  "})+"\n"+new Array(e[1]+o).join(" ")+"^----",a=new mu(""+t+" at line "+n+" character "+i+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){if(this.str.substr(this.pos,t.length)===t)return this.pos+=t.length,t;else return void 0},matchPattern:function(t){var e;if(e=t.exec(this.remaining()))return this.pos+=e[0].length,e[1]||e[0];else return void 0},allowWhitespace:function(){this.matchPattern(Cu)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},du.extend=function(t){var e,n,i=this;e=function(t,e){du.call(this,t,e)},e.prototype=Rs(i.prototype);for(n in t)if(qs.call(t,n))e.prototype[n]=t[n];return e.extend=du.extend,e};var Tu,Fu,Nu,Pu=du,Bu=1,Iu=2,Ku=3,Ru=4,Vu=5,Mu=6,Lu=7,Du=8,Wu=9,Uu=10,zu=13,$u=14,qu=15,Zu=16,Hu=17,Qu=18,Yu=19,Gu=20,Ju=21,Xu=22,th=23,eh=24,nh=25,ih=26,rh=27,oh=30,sh=31,ah=32,uh=33,hh=34,fh=35,lh=36,ch=40,ph=50,dh=51,mh=52,gh=53,vh=54,yh=60,bh=61,wh=70,kh=71,xh=72,Eh=73,_h=/^[^\s=]+/,Oh=/^\s+/,Ah=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Sh=/[-\/\\^$*+?.()|[\]{}]/g,jh={},Ch=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,Th=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Fh={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Nh=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Ph=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Fh).join("|")+"));?","g"),Bh="function"==typeof String.fromCodePoint,Ih=Bh?String.fromCodePoint:String.fromCharCode,Kh=/</g,Rh=/>/g,Vh=/&/g,Mh=65533,Lh="Expected a JavaScript expression",Dh="Expected closing paren",Wh=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;Tu=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Fu=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Nu=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var Uh,zh,$h=Sn('"'),qh=Sn("'"),Zh=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Hh=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Qh=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;Uh=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null|Object|Number|String|Boolean)\b/,zh=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Yh,Gh,Jh=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:\.(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,Xh=/^[a-zA-Z_$][-\/a-zA-Z_$0-9]*/,tf=/^@(?:keypath|rootpath|index|key|this|global)/,ef=/^\s*\(/,nf=/^\s*\.{3}/;Gh=function(t,e){return function(n){var i;if(i=e(n))return i;if(!n.matchString(t))return null;if(n.allowWhitespace(),i=Wn(n),!i)n.error(Lh);return{s:t,o:i,t:uh}}},function(){var t,e,n,i,r;for(i="! ~ + - typeof".split(" "),r=Ln,t=0,e=i.length;e>t;t+=1)n=Gh(i[t],r),r=n;Yh=r}();var rf,of,sf=Yh;of=function(t,e){return function(n){var i,r,o;if(r=e(n),!r)return null;for(;;){if(i=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=i,r;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=i,r;if(n.allowWhitespace(),o=e(n),!o)return n.pos=i,r;r={t:lh,s:t,o:[r,o]}}}},function(){var t,e,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=sf,t=0,e=i.length;e>t;t+=1)n=of(i[t],r),r=n;rf=r}();var af,uf=rf,hf={"true":!0,"false":!1,"null":null,undefined:void 0},ff=new RegExp("^(?:"+Object.keys(hf).join("|")+")"),lf=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,cf=/\$\{([^\}]+)\}/g,pf=/^\$\{([^\}]+)\}/,df=/^\s*$/,mf=Pu.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){if(1!==t.length||!df.test(this.leftover))return null;else return{value:t[0].v}},converters:[function(t){if(!t.values)return null;var e=t.matchPattern(pf);if(e&&t.values.hasOwnProperty(e))return{v:t.values[e]};else return void 0},function(t){var e=t.matchPattern(ff);if(e)return{v:hf[e]};else return void 0},function(t){var e=t.matchPattern(lf);if(e)return{v:+e};else return void 0},function(t){var e=jn(t),n=t.values;if(e&&n)return{v:e.v.replace(cf,function(t,e){return e in n?n[e]:e})};else return e},function(t){if(!t.matchString("{"))return null;var e={};if(t.allowWhitespace(),t.matchString("}"))return{v:e};for(var n;n=$n(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){if(!t.matchString("["))return null;var e=[];if(t.allowWhitespace(),t.matchString("]"))return{v:e};for(var n;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]}),gf=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(.*\)\s*$/;af=Pu.extend({converters:[Wn],spreadArgs:!0});var vf,yf=/^[^\s"'>\/=]+/,bf=/^on/,wf=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,kf=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,xf=/^as-([a-z-A-Z][-a-zA-Z_0-9]*)$/,Ef=/^([a-zA-Z](?:(?!-in-out)[-a-zA-Z_0-9])*)-(in|out|in-out)$/,_f={"intro-outro":{t:xh,v:"t0"},intro:{t:xh,v:"t1"},outro:{t:xh,v:"t2"},lazy:{t:Eh,v:"l"},twoway:{t:Eh,v:"t"},decorator:{t:kh}},Of=/^[^\s"'=<>`]+/,Af={t:Uu,exclude:!0},Sf=/^(?:[a-zA-Z$_0-9]|\\\.)+(?:(?:(?:[a-zA-Z$_0-9]|\\\.)+)|(?:\[[0-9]+\]))*/,jf=/^as/i,Cf=/^yield\s*/,Tf=/^\s*else\s*/,Ff=/^\s*elseif\s+/,Nf={each:mh,"if":ph,"with":vh,unless:dh},Pf=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Bf=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,If=new RegExp("^("+Object.keys(Nf).join("|")+")\\b"),Kf="<!--",Rf="-->",Vf=/^[ \t\f\r\n]*\r?\n/,Mf=/\r?\n[ \t\f\r\n]*$/,Lf=/[ \t\f\r\n]+/g,Df=/^(?:pre|script|style|textarea)$/i,Wf=/^[ \t\f\r\n]+/,Uf=/[ \t\f\r\n]+$/,zf=/^(?:\r\n|\r|\n)/,$f=/(?:\r\n|\r|\n)$/,qf=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Zf=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Hf=/^[\s\n\/>]/,Qf={exclude:!0};vf={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Yf,Gf=/^<!--\s*/,Jf=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Xf=/\s*-->/,tl=/^#\s*partial\s+/,el=[hi,si,vi,pi,ci,fi],nl=[oi],il=[si,vi,ci];Ki.computedStrings=function(t){if(!t)return[];else return void Object.keys(t).forEach(function(e){var n=t[e];if("string"==typeof n)t[e]=mn(n)})};var rl=[ei,yi,Ai,ji],ol=[Ci,Ti];Yf=Pu.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],i=e.staticDelimiters||["[[","]]"],r=e.staticTripleDelimiters||["[[[","]]]"];if(this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:el},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:nl},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:il},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:nl}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1,textarea:!0},e.sanitize===!0)e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0};this.stripComments=e.stripComments!==!1,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions,this.textOnlyMode=e.textOnlyMode,this.csp=e.csp},postProcess:function(t){if(!t.length)return{t:[],v:Au};if(this.sectionDepth>0)this.error("A section was left open");if(_i(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),this.csp!==!1){var e={};if(Ni(t[0].t,e),Object.keys(e).length)t[0].e=e}return t[0]},converters:[Fi],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});var sl=["delimiters","tripleDelimiters","staticDelimiters","staticTripleDelimiters","csp","interpolate","preserveWhitespace","sanitize","stripComments"],al="Either preparse or use a ractive runtime source that includes the parser. ",ul="Either use:\n\n	Ractive.parse.computedStrings( component.computed )\n\nat build time to pre-convert the strings to functions, or use functions instead of strings in computed properties.",hl={fromId:function(t,e){if(!ps){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(t)t=t.replace(/^#/,"");var n;if(!(n=ps.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML},isParsed:function(t){return!("string"==typeof t)},getParseOptions:function(t){if(t.defaults)t=t.defaults;return sl.reduce(function(e,n){return e[n]=t[n],e},{})},parse:function(t,e){Ri(Ki,"template",al);var n=Ki(t,e);return vn(n),n},parseFor:function(t,e){return this.parse(t,this.getParseOptions(e))}},fl={name:"template",extend:function(t,e,n){if("template"in n){var i=n.template;if("function"==typeof i)e.template=i;else e.template=Wi(i,e)}},init:function(t,e,n){var i="template"in n?n.template:t.prototype.template;if(i=i||{v:Au,t:[]},"function"==typeof i){var r=i;i=Di(e,r),e._config.template={fn:r,result:i}}if(i=Wi(i,e),e.template=i.t,i.p)$i(e.partials,i.p)},reset:function(t){var e=Li(t);if(e){var n=Wi(e,t);return t.template=n.t,$i(t.partials,n.p,!0),!0}}},ll=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],cl=function(t,e){this.name=t,this.useDefaults=e};

cl.prototype.extend=function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},cl.prototype.init=function(){},cl.prototype.configure=function(t,e,n){var i=this.name,r=n[i],o=Rs(t[i]);for(var s in r)o[s]=r[s];e[i]=o},cl.prototype.reset=function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];if(i._fn){if(i._fn.isOwner)e[t]=i._fn;else delete e[t];n=!0}}),n};var pl=ll.map(function(t){return new cl(t,"computed"===t)}),dl={adapt:yu,css:_u,data:Ou,template:fl},ml=Object.keys(fs),gl=Xi(ml.filter(function(t){return!dl[t]})),vl=Xi(ml.concat(pl.map(function(t){return t.name}))),yl=[].concat(ml.filter(function(t){return!pl[t]&&!dl[t]}),pl,dl.template,dl.css),bl={extend:function(t,e,n){return Gi("extend",t,e,n)},init:function(t,e,n){return Gi("init",t,e,n)},reset:function(t){return yl.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:yl},wl=["template","partials","components","decorators","events"],kl=new na("complete"),xl=new na("reset"),El=new na("render"),_l=new na("unrender"),Ol=function(t){this.parentFragment=t.parentFragment,this.ractive=t.parentFragment.ractive,this.template=t.template,this.index=t.index,this.type=t.template.t,this.dirty=!1};Ol.prototype.bubble=function(){if(!this.dirty)this.dirty=!0,this.parentFragment.bubble()},Ol.prototype.destroyed=function(){},Ol.prototype.find=function(){return null},Ol.prototype.findAll=function(){},Ol.prototype.findComponent=function(){return null},Ol.prototype.findAllComponents=function(){},Ol.prototype.findNextNode=function(){return this.parentFragment.findNextNode(this)},Ol.prototype.shuffled=function(){if(this.fragment)this.fragment.shuffled()},Ol.prototype.valueOf=function(){return this.toString()};var Al=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){if(t)Ot(this);var e=this.parent.get();return e?e[this.key]:void 0},e.prototype.handleChange=function(){this.dirty=!0,this.deps.forEach(jt),this.children.forEach(jt),this.clearUnresolveds()},e.prototype.joinKey=function(t){if(void 0===t||""===t)return this;if(!this.childByKey.hasOwnProperty(t)){var n=new e(this,t);this.children.push(n),this.childByKey[t]=n}return this.childByKey[t]},e}(La),Sl=function(t){function e(e,n){var i=this;t.call(this,e.ractive.viewmodel,null),this.fragment=e,this.template=n,this.isReadonly=!0,this.dirty=!0,this.fn=gn(n.s,n.r.length),this.resolvers=[],this.models=this.template.r.map(function(t,e){var n=Zt(i.fragment,t);if(!n)rr(i,t,e);return n}),this.shuffle=void 0,this.bubble()}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bubble=function(t){if(void 0===t)t=!0;if(this.registered)delete this.root.expressions[this.keypath];if(this.keypath=void 0,t)this.dirty=!0,this.handleChange()},e.prototype.get=function(t){if(t)Ot(this);if(this.dirty)this.dirty=!1,this.value=this.getValue(),this.adapt();return t&&this.wrapper?this.wrapper.value:this.value},e.prototype.getKeypath=function(){var t=this;if(!this.template)return"@undefined";if(!this.keypath)this.keypath="@"+this.template.s.replace(/_(\d+)/g,function(e,n){if(n>=t.models.length)return e;var i=t.models[n];return i?i.getKeypath():"@undefined"}),this.root.expressions[this.keypath]=this,this.registered=!0;return this.keypath},e.prototype.getValue=function(){var t=this;Et();var e;try{var n=this.models.map(function(t){return t?t.get(!0):void 0});e=this.fn.apply(this.fragment.ractive,n)}catch(i){b("Failed to compute "+this.getKeypath()+": "+(i.message||i))}var r=_t();if(this.dependencies)this.dependencies.forEach(function(e){return e.unregister(t)});return this.dependencies=r,this.dependencies.forEach(function(e){return e.register(t)}),e},e.prototype.handleChange=function(){this.dirty=!0,this.links.forEach(Tt),this.deps.forEach(jt),this.children.forEach(jt),this.clearUnresolveds()},e.prototype.joinKey=function(t){if(void 0===t||""===t)return this;if(!this.childByKey.hasOwnProperty(t)){var e=new Al(this,t);this.children.push(e),this.childByKey[t]=e}return this.childByKey[t]},e.prototype.mark=function(){this.handleChange()},e.prototype.rebinding=function(t,e,n){var i=this.models.indexOf(e);if(~i)if(t=Wt(this.template.r[i],t,e),t!==e)if(e.unregister(this),this.models.splice(i,1,t),t)t.addShuffleRegister(this,"mark");this.bubble(!n)},e.prototype.retrieve=function(){return this.get()},e.prototype.teardown=function(){var e=this;if(this.unbind(),this.fragment=void 0,this.dependencies)this.dependencies.forEach(function(t){return t.unregister(e)});t.prototype.teardown.call(this)},e.prototype.unregister=function(e){if(t.prototype.unregister.call(this,e),!this.deps.length)this.teardown()},e.prototype.unbind=function(){this.resolvers.forEach(Pt)},e}(La),jl=function(t){function e(e,n){t.call(this,e,n)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyValue=function(t){if(!l(t,this.value))for(var e=this.parent,n=[this.key];e;){if(e.base){var i=e.model.joinAll(n);i.applyValue(t);break}n.unshift(e.key),e=e.parent}},e.prototype.joinKey=function(t){if(void 0===t||""===t)return this;if(!this.childByKey.hasOwnProperty(t)){var n=new e(this,t);this.children.push(n),this.childByKey[t]=n}return this.childByKey[t]},e.prototype.retrieve=function(){var t=this.parent.get();return t&&this.key in t?t[this.key]:void 0},e}(La),Cl=function(t){function e(e,n){var i=this;t.call(this,null,null),this.dirty=!0,this.root=e.ractive.viewmodel,this.template=n,this.resolvers=[],this.base=or(e,n);var r;if(!this.base)r=e.resolve(n.r,function(t){i.base=t,i.bubble(),T(i.resolvers,r)}),this.resolvers.push(r);var o=this.intermediary={handleChange:function(){return i.handleChange()},rebinding:function(t,e){if(e===i.base){if(t=Wt(n,t,e),t!==i.base)i.base.unregister(o),i.base=t}else{var r=i.members.indexOf(e);if(~r)if(t=Wt(n.m[r].n,t,e),t!==i.members[r])i.members.splice(r,1,t)}if(t!==e)e.unregister(o);if(t)t.addShuffleTask(function(){return t.register(o)});i.bubble()}};this.members=n.m.map(function(t,n){if("string"==typeof t)return{get:function(){return t}};var r,s;if(t.t===oh){if(r=Zt(e,t.n))r.register(o);else s=e.resolve(t.n,function(t){i.members[n]=t,t.register(o),i.handleChange(),T(i.resolvers,s)}),i.resolvers.push(s);return r}return r=new Sl(e,t),r.register(o),r}),this.isUnresolved=!0,this.bubble()}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bubble=function(){if(this.base)if(!this.dirty)this.handleChange()},e.prototype.forceResolution=function(){this.resolvers.forEach(function(t){return t.forceResolution()}),this.dirty=!0,this.bubble()},e.prototype.get=function(t){var e=this;if(this.dirty){this.bubble();for(var n=this.members.length,i=!0;i&&n--;)if(!e.members[n])i=!1;if(this.base&&i){var r=this.members.map(function(t){return W(String(t.get()))}),o=this.base.joinAll(r);if(o!==this.model){if(this.model)this.model.unregister(this),this.model.unregisterTwowayBinding(this);if(this.model=o,this.parent=o.parent,this.model.register(this),this.model.registerTwowayBinding(this),this.keypathModel)this.keypathModel.handleChange()}}return this.value=this.model?this.model.get(t):void 0,this.dirty=!1,this.mark(),this.value}else return this.model?this.model.get(t):void 0},e.prototype.getValue=function(){var t=this;this.value=this.model?this.model.get():void 0;for(var e=this.bindings.length;e--;){var n=t.bindings[e].getValue();if(n!==t.value)return n}var i=Lt(this.deps);if(i)return i.value;else return this.value},e.prototype.getKeypath=function(){return this.model?this.model.getKeypath():"@undefined"},e.prototype.handleChange=function(){this.dirty=!0,this.mark()},e.prototype.joinKey=function(t){if(void 0===t||""===t)return this;if(!this.childByKey.hasOwnProperty(t)){var e=new jl(this,t);this.children.push(e),this.childByKey[t]=e}return this.childByKey[t]},e.prototype.mark=function(){if(this.dirty)this.deps.forEach(jt);this.links.forEach(Tt),this.children.forEach(Ct),this.clearUnresolveds()},e.prototype.retrieve=function(){return this.value},e.prototype.rebinding=function(){},e.prototype.set=function(t){if(!this.model)throw new Error("Unresolved reference expression. This should not happen!");this.model.set(t)},e.prototype.unbind=function(){if(this.resolvers.forEach(Pt),this.model)this.model.unregister(this),this.model.unregisterTwowayBinding(this)},e}(La),Tl=function(t){function n(e){t.call(this,e),this.fragment=null}return n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.bind=function(){sr(this),this.fragment=new Tp({owner:this,template:this.template.f}).bind()},n.prototype.detach=function(){return this.fragment?this.fragment.detach():e()},n.prototype.find=function(t){if(this.fragment)return this.fragment.find(t);else return void 0},n.prototype.findAll=function(t,e){if(this.fragment)this.fragment.findAll(t,e)},n.prototype.findComponent=function(t){if(this.fragment)return this.fragment.findComponent(t);else return void 0},n.prototype.findAllComponents=function(t,e){if(this.fragment)this.fragment.findAllComponents(t,e)},n.prototype.firstNode=function(t){return this.fragment&&this.fragment.firstNode(t)},n.prototype.rebinding=function(){var t=this;if(!this.locked)this.locked=!0,la.scheduleTask(function(){t.locked=!1,sr(t)})},n.prototype.render=function(t){if(this.rendered=!0,this.fragment)this.fragment.render(t)},n.prototype.toString=function(t){return this.fragment?this.fragment.toString(t):""},n.prototype.unbind=function(){if(this.aliases={},this.fragment)this.fragment.unbind()},n.prototype.unrender=function(t){if(this.rendered&&this.fragment)this.fragment.unrender(t);this.rendered=!1},n.prototype.update=function(){if(this.dirty)this.dirty=!1,this.fragment.update()},n}(Ol),Fl=/\s+/,Nl={"float":"cssFloat"},Pl=/\/\*(?:[\s\S]*?)\*\//g,Bl=/url\(\s*(['"])(?:\\[\s\S]|(?!\1).)*\1\s*\)|url\((?:\\[\s\S]|[^)])*\)|(['"])(?:\\[\s\S]|(?!\1).)*\2/gi,Il=/\0(\d+)/g,Kl=[void 0,"text","search","url","email","hidden","password","search","reset","submit"],Rl={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Vl=function(t){function e(e){if(t.call(this,e),this.name=e.template.n,this.namespace=null,this.owner=e.owner||e.parentFragment.owner||e.element||ar(e.parentFragment),this.element=e.element||(this.owner.attributeByName?this.owner:ar(e.parentFragment)),this.parentFragment=e.parentFragment,this.ractive=this.parentFragment.ractive,this.rendered=!1,this.updateDelegate=null,this.fragment=null,this.element.attributeByName[this.name]=this,!f(e.template.f)){if(this.value=e.template.f,0===this.value)this.value=""}else this.fragment=new Tp({owner:this,template:e.template.f});if(this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Iu&&this.fragment.items[0],this.interpolator)this.interpolator.owner=this}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){if(this.fragment)this.fragment.bind()},e.prototype.bubble=function(){if(!this.dirty)this.parentFragment.bubble(),this.element.bubble(),this.dirty=!0},e.prototype.destroyed=function(){this.updateDelegate(!0)},e.prototype.getString=function(){return this.fragment?this.fragment.toString():null!=this.value?""+this.value:""},e.prototype.getValue=function(){return this.fragment?this.fragment.valueOf():Ch.test(this.name)?!0:this.value},e.prototype.render=function(){var t=this.element.node;if(this.node=t,!t.namespaceURI||t.namespaceURI===Ks.html){if(this.propertyName=Rl[this.name]||this.name,void 0!==t[this.propertyName])this.useProperty=!0;if(Ch.test(this.name)||this.isTwoway)this.isBoolean=!0;if("value"===this.propertyName)t._ractive.value=this.value}if(t.namespaceURI){var e=this.name.indexOf(":");if(-1!==e)this.namespace=jr(t,this.name.slice(0,e));else this.namespace=t.namespaceURI}this.rendered=!0,this.updateDelegate=lr(this),this.updateDelegate()},e.prototype.toString=function(){var t=this.getValue();if("value"!==this.name||void 0===this.element.getAttribute("contenteditable")&&"select"!==this.element.name&&"textarea"!==this.element.name){if("name"===this.name&&"input"===this.element.name&&this.interpolator&&"radio"===this.element.getAttribute("type"))return'name="{{'+this.interpolator.model.getKeypath()+'}}"';if(this.owner!==this.element||"style"!==this.name&&"class"!==this.name&&!this.styleName&&!this.inlineClass){if(Ch.test(this.name))return t?this.name:"";if(null==t)return"";var e=o(this.getString());return e?""+this.name+'="'+e+'"':this.name}}},e.prototype.unbind=function(){if(this.fragment)this.fragment.unbind()},e.prototype.unrender=function(){this.updateDelegate(!0),this.rendered=!1},e.prototype.update=function(){if(this.dirty){if(this.dirty=!1,this.fragment)this.fragment.update();if(this.rendered)this.updateDelegate();if(this.isTwoway&&!this.locked)this.interpolator.twowayBinding.lastVal(!0,this.interpolator.model.get())}},e}(Ol),Ml=function(t){function e(e){if(t.call(this,e),this.owner=e.owner||e.parentFragment.owner||ar(e.parentFragment),this.element=this.owner.attributeByName?this.owner:ar(e.parentFragment),this.flag="l"===e.template.v?"lazy":"twoway",this.element.type===Lu){if(f(e.template.f))this.fragment=new Tp({owner:this,template:e.template.f});this.interpolator=this.fragment&&1===this.fragment.items.length&&this.fragment.items[0].type===Iu&&this.fragment.items[0]}}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){if(this.fragment)this.fragment.bind();Cr(this,this.getValue(),!0)},e.prototype.bubble=function(){if(!this.dirty)this.element.bubble(),this.dirty=!0},e.prototype.getValue=function(){if(this.fragment)return this.fragment.valueOf();else if("value"in this)return this.value;else if("f"in this.template)return this.template.f;else return!0},e.prototype.render=function(){Cr(this,this.getValue(),!0)},e.prototype.toString=function(){return""},e.prototype.unbind=function(){if(this.fragment)this.fragment.unbind();delete this.element[this.flag]},e.prototype.unrender=function(){if(this.element.rendered)this.element.recreateTwowayBinding()},e.prototype.update=function(){if(this.dirty){if(this.fragment)this.fragment.update();Cr(this,this.getValue(),!0)}},e}(Ol),Ll=ps?ws("div"):null,Dl=!1,Wl=function(e){function n(n){e.call(this,n),this.attributes=[],this.owner=n.owner,this.fragment=new Tp({ractive:this.ractive,owner:this,template:this.template}),this.fragment.findNextNode=t,this.dirty=!1}return n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.bind=function(){this.fragment.bind()},n.prototype.bubble=function(){if(!this.dirty)this.dirty=!0,this.owner.bubble()},n.prototype.render=function(){if(this.node=this.owner.node,this.node)this.isSvg=this.node.namespaceURI===Ns;if(Dl=!0,!this.rendered)this.fragment.render();Dl=!1,this.rendered=!0,this.dirty=!0,this.update()},n.prototype.toString=function(){return this.fragment.toString()},n.prototype.unbind=function(){this.fragment.unbind()},n.prototype.unrender=function(){this.rendered=!1,this.fragment.unrender()},n.prototype.update=function(){var t,e,n=this;if(this.dirty)if(this.dirty=!1,Dl=!0,this.fragment.update(),Dl=!1,this.rendered&&this.node)t=this.fragment.toString(),e=Nr(t,this.isSvg),this.attributes.filter(function(t){return Pr(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},n}(Ol),Ul=["pop","push","reverse","shift","sort","splice","unshift"],zl=[];Ul.forEach(function(t){var e=function(){for(var e=this,n=[],i=arguments.length;i--;)n[i]=arguments[i];var r=Yt(this.length,t,n);this._ractive.wrappers.forEach(function(t){if(t.magic)t.magic.locked=!0});var o=Array.prototype[t].apply(this,arguments);la.start(),this._ractive.setting=!0;for(var s=this._ractive.wrappers.length;s--;)Br(e._ractive.wrappers[s],e,t,r);return la.end(),this._ractive.setting=!1,this._ractive.wrappers.forEach(function(t){if(t.magic)t.magic.locked=!1}),o};Vs(zl,t,{value:e})});var $l,ql;if({}.__proto__)$l=function(t){return t.__proto__=zl},ql=function(t){return t.__proto__=Array.prototype};else $l=function(t){for(var e=Ul.length;e--;){var n=Ul[e];Vs(t,n,{value:zl[n],configurable:!0})}},ql=function(t){for(var e=Ul.length;e--;)delete t[Ul[e]]};$l.unpatch=ql;var Zl=$l,Hl="Something went wrong in a rather interesting way",Ql={filter:function(t){return f(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Yl(t,e,n)}},Yl=function(t,e){if(this.root=t,this.value=e,this.__model=null,!e._ractive)Vs(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Zl(e);if(!e._ractive.instances[t._guid])e._ractive.instances[t._guid]=0,e._ractive.instances.push(t);e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)};Yl.prototype.get=function(){return this.value},Yl.prototype.reset=function(t){return this.value===t},Yl.prototype.teardown=function(){var t,e,n,i,r;if(t=this.value,e=t._ractive,n=e.wrappers,i=e.instances,e.setting)return!1;if(r=n.indexOf(this),-1===r)throw new Error(Hl);if(n.splice(r,1),!n.length)delete t._ractive,Zl.unpatch(this.value);else if(i[this.root._guid]-=1,!i[this.root._guid]){if(r=i.indexOf(this.root),-1===r)throw new Error(Hl);i.splice(r,1)}};var Gl;try{Object.defineProperty({},"test",{get:function(){},set:function(){}}),Gl={filter:function(t){return t&&"object"==typeof t},wrap:function(t,e,n){return new Xl(t,e,n)}}}catch(Ws){Gl=!1}var Jl=Gl,Xl=function(t,e,n){var i=this;this.ractive=t,this.value=e,this.keypath=n,this.originalDescriptors={},Object.keys(e).forEach(function(e){var r=Object.getOwnPropertyDescriptor(i.value,e);i.originalDescriptors[e]=r;var o=n?""+n+"."+W(e):W(e),s=Ir(r,t,o,i);Object.defineProperty(i.value,e,s)})};Xl.prototype.get=function(){return this.value},Xl.prototype.reset=function(t){return this.value===t},Xl.prototype.set=function(t,e){this.value[t]=e},Xl.prototype.teardown=function(){var t=this;Object.keys(this.value).forEach(function(e){var n=Object.getOwnPropertyDescriptor(t.value,e);if(n.set&&n.set.__magic)if(Kr(n),1===n.set.__magic.dependants.length)Object.defineProperty(t.value,e,n.set.__magic.originalDescriptor)})};var tc=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=Jl.wrap(t,e,n),this.arrayWrapper=Ql.wrap(t,e,n),this.arrayWrapper.magic=this.magicWrapper,Object.defineProperty(this,"__model",{get:function(){return this.arrayWrapper.__model},set:function(t){this.arrayWrapper.__model=t}})};tc.prototype.get=function(){return this.value},tc.prototype.teardown=function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},tc.prototype.reset=function(t){return this.arrayWrapper.reset(t)&&this.magicWrapper.reset(t)};var ec={filter:function(t,e,n){return Jl.filter(t,e,n)&&Ql.filter(t)},wrap:function(t,e,n){return new tc(t,e,n)}},nc=function(t){function e(e,n,i){t.call(this,null,null),this.root=this.parent=e,this.signature=n,this.key=i,this.isExpression=i&&"@"===i[0],this.isReadonly=!this.signature.setter,this.context=e.computationContext,this.dependencies=[],this.children=[],this.childByKey={},this.deps=[],this.dirty=!0,this.shuffle=void 0}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){if(t)Ot(this);if(this.dirty)this.dirty=!1,this.value=this.getValue(),this.adapt();return t&&this.wrapper?this.wrapper.value:this.value},e.prototype.getValue=function(){Et();var t;try{t=this.signature.getter.call(this.context)}catch(e){if(b("Failed to compute "+this.getKeypath()+": "+(e.message||e)),ms){if(console.groupCollapsed)console.groupCollapsed("%cshow details","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;");var n=Rr(this.signature.getterString),i=this.signature.getterUseStack?"\n\n"+Vr(e.stack):"";if(console.error(""+e.name+": "+e.message+"\n\n"+n+i),console.groupCollapsed)console.groupEnd()}}var r=_t();return this.setDependencies(r),t},e.prototype.handleChange=function(){this.dirty=!0,this.links.forEach(Tt),this.deps.forEach(jt),this.children.forEach(jt),this.clearUnresolveds()},e.prototype.joinKey=function(t){if(void 0===t||""===t)return this;if(!this.childByKey.hasOwnProperty(t)){var e=new Al(this,t);this.children.push(e),this.childByKey[t]=e}return this.childByKey[t]},e.prototype.mark=function(){this.handleChange()},e.prototype.rebinding=function(t,e){if(t!==e)this.handleChange()},e.prototype.set=function(t){if(!this.signature.setter)throw new Error("Cannot set read-only computed value '"+this.key+"'");this.signature.setter(t)},e.prototype.setDependencies=function(t){for(var e=this,n=this.dependencies.length;n--;){var i=e.dependencies[n];if(!~t.indexOf(i))i.unregister(e)}for(n=t.length;n--;){var r=t[n];if(!~e.dependencies.indexOf(r))r.register(e)}this.dependencies=t},e.prototype.teardown=function(){for(var e=this,n=this.dependencies.length;n--;)if(e.dependencies[n])e.dependencies[n].unregister(e);if(this.root.computations[this.key]===this)delete this.root.computations[this.key];t.prototype.teardown.call(this)},e.prototype.unregister=function(e){if(t.prototype.unregister.call(this,e),this.isExpression&&0===this.deps.length)this.teardown()},e}(La),ic=function(t){function e(e){t.call(this,null,""),this.value=e,this.isRoot=!0,this.root=this,this.adaptors=[],this.ractive=e,this.changes={}}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getKeypath=function(){return"@this"},e}(La),rc=Object.prototype.hasOwnProperty,oc=function(t){function e(e){t.call(this,null,null),this.changes={},this.isRoot=!0,this.root=this,this.ractive=e.ractive,this.value=e.data,this.adaptors=e.adapt,this.adapt(),this.computationContext=e.ractive,this.computations={},this.expressions={}}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyChanges=function(){return this._changeHash={},this.flush(),this._changeHash},e.prototype.compute=function(t,e){var n=new nc(this,e,t);return this.computations[t]=n,n},e.prototype.createLink=function(t,e,n){for(var i=this,r=z(t),o=this;r.length;){var s=r.shift();o=i.childByKey[s]||i.joinKey(s)}return o.link(e,n)},e.prototype.get=function(t,e){var n=this;if(t)Ot(this);if(!e||e.virtual!==!1){for(var i=this.getVirtual(),r=Object.keys(this.computations),o=r.length;o--;){var s=n.computations[r[o]];if(!s.isExpression)i[r[o]]=s.get()}return i}else return this.value},e.prototype.getKeypath=function(){return""},e.prototype.getRactiveModel=function(){return this.ractiveModel||(this.ractiveModel=new ic(this.ractive))},e.prototype.getValueChildren=function(){var e=t.prototype.getValueChildren.call(this,this.value);this.children.forEach(function(t){if(t._link){var n=e.indexOf(t);if(~n)e.splice(n,1,t._link);else e.push(t._link)}});for(var n in this.computations)e.push(this.computations[n]);return e},e.prototype.handleChange=function(){this.deps.forEach(jt)},e.prototype.has=function(t){var e=this.value;if(t=$(t),rc.call(e,t))return!0;if(t in this.computations||this.childByKey[t]&&this.childByKey[t]._link)return!0;if(t in this.expressions)return!0;for(var n=e.constructor;n!==Function&&n!==Array&&n!==Object;){if(rc.call(n.prototype,t))return!0;n=n.constructor}return!1},e.prototype.joinKey=function(e,n){if("@global"===e)return Wa;if("@this"===e)return this.getRactiveModel();if(this.expressions.hasOwnProperty(e))return b("Accessing expression keypaths ("+e.substr(1)+") from the instance is deprecated. You can used a getNodeInfo or event object to access keypaths with expression context."),this.expressions[e];else return this.computations.hasOwnProperty(e)?this.computations[e]:t.prototype.joinKey.call(this,e,n)},e.prototype.map=function(t,e){var n=this.joinKey(t);n.link(e)},e.prototype.rebinding=function(){},e.prototype.set=function(t){var e=this.wrapper;if(e){var n=!e.reset||e.reset(t)===!1;if(n)e.teardown(),this.wrapper=null,this.value=t,this.adapt()}else this.value=t,this.adapt();this.deps.forEach(jt),this.children.forEach(Ct),this.clearUnresolveds()},e.prototype.retrieve=function(){return this.value},e.prototype.update=function(){},e}(La),sc=new na("construct"),ac=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],uc=0,hc=function(t){this.hook=new na(t),this.inProcess={},this.queue={}};hc.prototype.begin=function(t){this.inProcess[t._guid]=!0},hc.prototype.end=function(t){var e=t.parent;if(!e||!this.inProcess[e._guid])qr(this,t);else $r(this.queue,e).push(t);delete this.inProcess[t._guid]};var fc=new na("config"),lc=new hc("init"),cc=function(t,e){if(-1!==t.indexOf("*"))m('Only component proxy-events may contain "*" wildcards, <'+e.name+" on-"+t+'="..."/> is not valid');this.name=t,this.owner=e,this.node=null,this.handler=null};cc.prototype.listen=function(t){var e=this.node=this.owner.node,n=this.name;if(!("on"+n in e))y(Xs(n,"events"));e.addEventListener(n,this.handler=function(n){t.fire({node:e,original:n})},!1)},cc.prototype.unlisten=function(){this.node.removeEventListener(this.name,this.handler,!1)};var pc=function(t,e){this.eventPlugin=t,this.owner=e,this.handler=null};pc.prototype.listen=function(t){var e=this.owner.node;this.handler=this.eventPlugin(e,function(n){if(void 0===n)n={};n.node=n.node||e,t.fire(n)})},pc.prototype.unlisten=function(){this.handler.teardown()};var dc=function(t,e){this.ractive=t,this.name=e,this.handler=null};dc.prototype.listen=function(t){var e=this.ractive;this.handler=e.on(this.name,function(){var n;if(arguments.length&&arguments[0]&&arguments[0].node)n=Array.prototype.shift.call(arguments),n.component=e;var i=Array.prototype.slice.call(arguments);return t.fire(n,i),!1})},dc.prototype.unlisten=function(){this.handler.cancel()};var mc=/^(event|arguments)(\..+)?$/,gc=/^\$(\d+)(\..+)?$/,vc=function(t){var e=this;if(this.owner=t.owner||t.parentFragment.owner||ar(t.parentFragment),this.element=this.owner.attributeByName?this.owner:ar(t.parentFragment),this.template=t.template,this.parentFragment=t.parentFragment,this.ractive=t.parentFragment.ractive,this.events=[],this.element.type===qu)this.template.n.split("-").forEach(function(t){e.events.push(new dc(e.element.instance,t))});else this.template.n.split("-").forEach(function(t){var n=k("events",e.ractive,t);e.events.push(n?new pc(n,e.element):new cc(t,e.element))});this.context=null,this.resolvers=null,this.models=null,this.action=null,this.args=null};vc.prototype.bind=function(){var t=this;this.context=this.parentFragment.findContext();var e=this.template.f;if(e.x)this.fn=gn(e.x.s,e.x.r.length),this.resolvers=[],this.models=e.x.r.map(function(e,n){var i=mc.exec(e);if(i)return{special:i[1],keys:i[2]?z(i[2].substr(1)):[]};var r=gc.exec(e);if(r)return{special:"arguments",keys:[r[1]-1].concat(r[2]?z(r[2].substr(1)):[])};var o,s=Zt(t.parentFragment,e);if(!s)o=t.parentFragment.resolve(e,function(e){t.models[n]=e,T(t.resolvers,o),e.register(t)}),t.resolvers.push(o);else s.register(t);return s});else this.action="string"==typeof e?e:"string"==typeof e.n?e.n:new Tp({owner:this,template:e.n}),this.args=e.a?"string"==typeof e.a?[e.a]:e.a:e.d?new Tp({owner:this,template:e.d}):[];if(this.action&&"string"!=typeof this.action)this.action.bind();if(this.args&&e.d)this.args.bind()},vc.prototype.bubble=function(){if(!this.dirty)this.dirty=!0,this.owner.bubble()},vc.prototype.destroyed=function(){this.events.forEach(function(t){return t.unlisten()})},vc.prototype.fire=function(t,e){if(void 0===e)e=[];if(t&&!t.hasOwnProperty("_element"))Ie(t,this.owner);if(this.fn){var n=[];if(t)e.unshift(t);if(this.models)this.models.forEach(function(i){if(!i)return n.push(void 0);if(i.special){for(var r="event"===i.special?t:e,o=i.keys.slice();o.length;)r=r[o.shift()];return n.push(r)}if(i.wrapper)return n.push(i.wrapper.value);else return void n.push(i.get())});var i=this.ractive,r=i.event;i.event=t;var o,s=this.fn.apply(i,n).pop();if(s===!1&&(o=t.original))o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation();i.event=r}else{var a=this.action.toString(),u=this.template.f.d?this.args.getArgsList():this.args;if(e.length)u=u.concat(e);if(t)t.name=a;gt(this.ractive,a,{event:t,args:u})}},vc.prototype.handleChange=function(){},vc.prototype.rebinding=function(t,e){var n=this;if(this.models){var i=this.models.indexOf(e);if(~i)if(this.models.splice(i,1,t),e.unregister(this),t)t.addShuffleTask(function(){return t.register(n)})}},vc.prototype.render=function(){var t=this;la.scheduleTask(function(){return t.events.forEach(function(e){return e.listen(t)},!0)})},vc.prototype.toString=function(){return""},vc.prototype.unbind=function(){var t=this,e=this.template.f;if(e.m){if(this.resolvers)this.resolvers.forEach(Pt);if(this.resolvers=[],this.models)this.models.forEach(function(e){if(e.unregister)e.unregister(t)});this.models=null}else{if(this.action&&this.action.unbind)this.action.unbind();if(this.args&&this.args.unbind)this.args.unbind()}},vc.prototype.unrender=function(){this.events.forEach(function(t){return t.unlisten()})},vc.prototype.update=function(){if(!this.method&&this.dirty){if(this.dirty=!1,this.action&&this.action.update)this.action.update();if(this.args&&this.args.update)this.args.update()}};var yc=new na("teardown"),bc=function(t){function e(e,n){var i=this;t.call(this,e),this.type=qu;var r=Rs(n.prototype);if(this.instance=r,this.name=e.template.e,this.parentFragment=e.parentFragment,this.liveQueries=[],r.el)b("The <"+this.name+"> component has a default 'el' property; it has been disregarded");var o=e.template.p||{};if(!("content"in o))o.content=e.template.f||[];this._partials=o,this.yielders={};for(var s,a=e.parentFragment;a;){if(a.owner.type===Zu){s=a.owner.container;break}a=a.parent}r.parent=this.parentFragment.ractive,r.container=s||null,r.root=r.parent.root,r.component=this,Lr(this.instance,{partials:o}),r._inlinePartials=o,this.attributeByName={},this.attributes=[];var u=[];if((this.template.m||[]).forEach(function(t){switch(t.t){case zu:case wh:case xh:i.attributes.push(Vo({owner:i,parentFragment:i.parentFragment,template:t}));break;case Eh:case kh:break;default:u.push(t)}}),this.attributes.push(new Wl({owner:this,parentFragment:this.parentFragment,template:u})),this.eventHandlers=[],this.template.v)this.setupEvents()}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){this.attributes.forEach(At),Zr(this.instance,{partials:this._partials},{cssIds:this.parentFragment.cssIds}),this.eventHandlers.forEach(At),this.bound=!0},e.prototype.bubble=function(){if(!this.dirty)this.dirty=!0,this.parentFragment.bubble()},e.prototype.checkYielders=function(){var t=this;Object.keys(this.yielders).forEach(function(e){if(t.yielders[e].length>1)throw la.end(),new Error("A component template can only have one {{yield"+(e?" "+e:"")+"}} declaration at a time")})},e.prototype.destroyed=function(){if(this.instance.fragment)this.instance.fragment.destroyed()},e.prototype.detach=function(){return this.instance.fragment.detach()},e.prototype.find=function(t){return this.instance.fragment.find(t)},e.prototype.findAll=function(t,e){this.instance.fragment.findAll(t,e)},e.prototype.findComponent=function(t){if(!t||this.name===t)return this.instance;if(this.instance.fragment)return this.instance.fragment.findComponent(t);else return void 0},e.prototype.findAllComponents=function(t,e){if(e.test(this))if(e.add(this.instance),e.live)this.liveQueries.push(e);this.instance.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(t){return this.instance.fragment.firstNode(t)},e.prototype.render=function(t,e){tn(this.instance,t,null,e),this.checkYielders(),this.attributes.forEach(Ft),this.eventHandlers.forEach(Ft),
Hr(this),this.rendered=!0},e.prototype.setupEvents=function(){var t=this,e=this.eventHandlers;Object.keys(this.template.v).forEach(function(n){var i=n.split("-"),r=t.template.v[n];i.forEach(function(n){var i=new dc(t.instance,n);e.push(new vc(t,i,r))})})},e.prototype.shuffled=function(){this.liveQueries.forEach(Yr),t.prototype.shuffled.call(this)},e.prototype.toString=function(){return this.instance.toHTML()},e.prototype.unbind=function(){this.bound=!1,this.attributes.forEach(Pt);var t=this.instance;if(t.viewmodel.teardown(),t.fragment.unbind(),t._observers.forEach(St),Qr(this),t.fragment.rendered&&t.el.__ractive_instances__)T(t.el.__ractive_instances__,t);yc.fire(t)},e.prototype.unrender=function(t){var e=this;this.rendered=!1,this.shouldDestroy=t,this.instance.unrender(),this.attributes.forEach(Bt),this.eventHandlers.forEach(Bt),this.liveQueries.forEach(function(t){return t.remove(e.instance)})},e.prototype.update=function(){this.dirty=!1,this.instance.fragment.update(),this.checkYielders(),this.attributes.forEach(Kt),this.eventHandlers.forEach(Kt)},e}(Ol),wc={update:t,teardown:t},kc=function(t){this.owner=t.owner||t.parentFragment.owner||ar(t.parentFragment),this.element=this.owner.attributeByName?this.owner:ar(t.parentFragment),this.parentFragment=this.owner.parentFragment,this.ractive=this.owner.ractive;var e=this.template=t.template;if(this.dynamicName="object"==typeof e.f.n,this.dynamicArgs=!!e.f.d,this.dynamicName)this.nameFragment=new Tp({owner:this,template:e.f.n});else this.name=e.f.n||e.f;if(this.dynamicArgs)this.argsFragment=new Tp({owner:this,template:e.f.d});else if(e.f.a&&e.f.a.s)this.args=[];else this.args=e.f.a||[];this.node=null,this.intermediary=null,this.element.decorators.push(this)};kc.prototype.bind=function(){var t=this;if(this.dynamicName)this.nameFragment.bind(),this.name=this.nameFragment.toString();if(this.dynamicArgs)this.argsFragment.bind();if(this.template.f.a&&this.template.f.a.s)this.resolvers=[],this.models=this.template.f.a.r.map(function(e,n){var i,r=Zt(t.parentFragment,e);if(!r)i=t.parentFragment.resolve(e,function(e){t.models[n]=e,T(t.resolvers,i),e.register(t)}),t.resolvers.push(i);else r.register(t);return r}),this.argsFn=gn(this.template.f.a.s,this.template.f.a.r.length)},kc.prototype.bubble=function(){if(!this.dirty)this.dirty=!0,this.owner.bubble()},kc.prototype.destroyed=function(){if(this.intermediary)this.intermediary.teardown()},kc.prototype.handleChange=function(){this.bubble()},kc.prototype.rebinding=function(t,e,n){var i=this.models.indexOf(e);if(~i)if(t=Wt(this.template.f.a.r[i],t,e),t!==e){if(e.unregister(this),this.models.splice(i,1,t),t)t.addShuffleRegister(this,"mark");if(!n)this.bubble()}},kc.prototype.render=function(){var t=this;la.scheduleTask(function(){var e=k("decorators",t.ractive,t.name);if(!e)return y(Xs(t.name,"decorator")),void(t.intermediary=wc);t.node=t.element.node;var n;if(t.argsFn)n=t.models.map(function(t){if(!t)return void 0;else return t.get()}),n=t.argsFn.apply(t.ractive,n);else n=t.dynamicArgs?t.argsFragment.getArgsList():t.args;if(t.intermediary=e.apply(t.ractive,[t.node].concat(n)),!t.intermediary||!t.intermediary.teardown)throw new Error("The '"+t.name+"' decorator must return an object with a teardown method")},!0),this.rendered=!0},kc.prototype.toString=function(){return""},kc.prototype.unbind=function(){var t=this;if(this.dynamicName)this.nameFragment.unbind();if(this.dynamicArgs)this.argsFragment.unbind();if(this.resolvers)this.resolvers.forEach(Pt);if(this.models)this.models.forEach(function(e){if(e)e.unregister(t)})},kc.prototype.unrender=function(t){if((!t||this.element.rendered)&&this.intermediary)this.intermediary.teardown();this.rendered=!1},kc.prototype.update=function(){if(this.dirty){this.dirty=!1;var t=!1;if(this.dynamicName&&this.nameFragment.dirty){var e=this.nameFragment.toString();t=e!==this.name,this.name=e}if(this.intermediary)if(t||!this.intermediary.update)this.unrender(),this.render();else if(this.dynamicArgs){if(this.argsFragment.dirty){var n=this.argsFragment.getArgsList();this.intermediary.update.apply(this.ractive,n)}}else if(this.argsFn){var i=this.models.map(function(t){if(!t)return void 0;else return t.get()});this.intermediary.update.apply(this.ractive,this.argsFn.apply(this.ractive,i))}else this.intermediary.update.apply(this.ractive,this.args);if(this.dynamicName&&this.nameFragment.dirty)this.nameFragment.update();if(this.dynamicArgs&&this.argsFragment.dirty)this.argsFragment.update()}};var xc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){},e.prototype.render=function(){},e.prototype.teardown=function(){},e.prototype.toString=function(){return"<!DOCTYPE"+this.template.a+">"},e.prototype.unbind=function(){},e.prototype.unrender=function(){},e}(Ol),Ec=function(t,e){if(void 0===e)e="value";this.element=t,this.ractive=t.ractive,this.attribute=t.attributeByName[e];var n=this.attribute.interpolator;n.twowayBinding=this;var i=n.model;if(!i)n.resolver.forceResolution(),i=n.model,Xr("'"+n.template.r+"' reference",this.ractive);else if(i.isUnresolved)i.forceResolution(),Xr("expression",this.ractive);else if(i.isReadonly){var r=i.getKeypath().replace(/^@/,"");return w("Cannot use two-way binding on <"+t.name+"> element: "+r+" is read-only. To suppress this warning use <"+t.name+" twoway='false'...>",{ractive:this.ractive}),!1}this.attribute.isTwoway=!0,this.model=i;var o=i.get();if(this.wasUndefined=void 0===o,void 0===o&&this.getInitialValue)o=this.getInitialValue(),i.set(o);var s=Jr(t);if(s)this.resetValue=o,s.formBindings.push(this)};Ec.prototype.bind=function(){this.model.registerTwowayBinding(this)},Ec.prototype.handleChange=function(){var t=this,e=this.getValue();if(this.lastVal()!==e){if(la.start(this.root),this.attribute.locked=!0,this.model.set(e),this.lastVal(!0,e),this.model.get()!==e)this.attribute.locked=!1;else la.scheduleTask(function(){return t.attribute.locked=!1});la.end()}},Ec.prototype.lastVal=function(t,e){if(t)this.lastValue=e;else return this.lastValue},Ec.prototype.rebinding=function(t,e){var n=this;if(this.model&&this.model===e)e.unregisterTwowayBinding(this);if(t)this.model=t,la.scheduleTask(function(){return t.registerTwowayBinding(n)})},Ec.prototype.render=function(){this.node=this.element.node,this.node._ractive.binding=this,this.rendered=!0},Ec.prototype.setFromNode=function(t){this.model.set(t.value)},Ec.prototype.unbind=function(){this.model.unregisterTwowayBinding(this)},Ec.prototype.unrender=function(){};var _c=function(t){function e(e){t.call(this,e,"checked")}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){if(t.prototype.render.call(this),this.node.addEventListener("change",to,!1),this.node.attachEvent)this.node.addEventListener("click",to,!1)},e.prototype.unrender=function(){this.node.removeEventListener("change",to,!1),this.node.removeEventListener("click",to,!1)},e.prototype.getInitialValue=function(){return!!this.element.getAttribute("checked")},e.prototype.getValue=function(){return this.node.checked},e.prototype.setFromNode=function(t){this.model.set(t.checked)},e}(Ec),Oc=function(t,e,n){var i=this;this.model=e,this.hash=t,this.getValue=function(){return i.value=n.call(i),i.value},this.bindings=[]};Oc.prototype.add=function(t){this.bindings.push(t)},Oc.prototype.bind=function(){this.value=this.model.get(),this.model.registerTwowayBinding(this),this.bound=!0},Oc.prototype.remove=function(t){if(T(this.bindings,t),!this.bindings.length)this.unbind()},Oc.prototype.unbind=function(){this.model.unregisterTwowayBinding(this),this.bound=!1,delete this.model[this.hash]};var Ac=[].push,Sc=function(t){function e(e){if(t.call(this,e,"name"),this.checkboxName=!0,this.group=eo("checkboxes",this.model,no),this.group.add(this),this.noInitialValue)this.group.noInitialValue=!0;if(this.group.noInitialValue&&this.element.getAttribute("checked")){var n=this.model.get(),i=this.element.getAttribute("value");if(!A(n,i))Ac.call(n,i)}}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){if(!this.group.bound)this.group.bind()},e.prototype.changed=function(){var t=!!this.isChecked;return this.isChecked=this.node.checked,this.isChecked===t},e.prototype.getInitialValue=function(){return this.noInitialValue=!0,[]},e.prototype.getValue=function(){return this.group.value},e.prototype.handleChange=function(){this.isChecked=this.element.node.checked,this.group.value=this.model.get();var e=this.element.getAttribute("value");if(this.isChecked&&!A(this.group.value,e))this.group.value.push(e);else if(!this.isChecked&&A(this.group.value,e))T(this.group.value,e);this.lastValue=null,t.prototype.handleChange.call(this)},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node,n=this.model.get(),i=this.element.getAttribute("value");if(f(n))this.isChecked=A(n,i);else this.isChecked=n==i;if(e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.isChecked,e.addEventListener("change",to,!1),e.attachEvent)e.addEventListener("click",to,!1)},e.prototype.setFromNode=function(t){if(this.group.bindings.forEach(function(t){return t.wasUndefined=!0}),t.checked){var e=this.group.getValue();e.push(this.element.getAttribute("value")),this.group.model.set(e)}},e.prototype.unbind=function(){this.group.remove(this)},e.prototype.unrender=function(){var t=this.element.node;t.removeEventListener("change",to,!1),t.removeEventListener("click",to,!1)},e}(Ec),jc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getInitialValue=function(){return this.element.fragment?this.element.fragment.toString():""},e.prototype.getValue=function(){return this.element.node.innerHTML},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;if(e.addEventListener("change",to,!1),e.addEventListener("blur",to,!1),!this.ractive.lazy)if(e.addEventListener("input",to,!1),e.attachEvent)e.addEventListener("keyup",to,!1)},e.prototype.setFromNode=function(t){this.model.set(t.innerHTML)},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("blur",to,!1),t.removeEventListener("change",to,!1),t.removeEventListener("input",to,!1),t.removeEventListener("keyup",to,!1)},e}(Ec),Cc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getInitialValue=function(){return""},e.prototype.getValue=function(){return this.node.value},e.prototype.render=function(){t.prototype.render.call(this);var e=this.ractive.lazy,n=!1;if("lazy"in this.element)e=this.element.lazy;if(c(e))n=+e,e=!1;this.handler=n?ro(n):to;var i=this.node;if(i.addEventListener("change",to,!1),!e)if(i.addEventListener("input",this.handler,!1),i.attachEvent)i.addEventListener("keyup",this.handler,!1);i.addEventListener("blur",io,!1)},e.prototype.unrender=function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",to,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",io,!1)},e}(Ec),Tc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.forceUpdate=function(){var t=this,e=this.getValue();if(void 0!==e)this.attribute.locked=!0,la.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e)},e.prototype.getInitialValue=function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},e.prototype.getValue=function(){for(var t=this.element.node.options,e=t.length,n=[],i=0;e>i;i+=1){var r=t[i];if(r.selected){var o=r._ractive?r._ractive.value:r.value;n.push(o)}}return n},e.prototype.handleChange=function(){var e=this.attribute,n=e.getValue(),i=this.getValue();if(void 0===n||!S(i,n))t.prototype.handleChange.call(this);return this},e.prototype.render=function(){if(t.prototype.render.call(this),this.node.addEventListener("change",to,!1),void 0===this.model.get())this.handleChange()},e.prototype.setFromNode=function(t){for(var e=oo(t),n=e.length,i=new Array(n);n--;){var r=e[n];i[n]=r._ractive?r._ractive.value:r.value}this.model.set(i)},e.prototype.setValue=function(){throw new Error("TODO not implemented yet")},e.prototype.unrender=function(){this.node.removeEventListener("change",to,!1)},e.prototype.updateModel=function(){if(void 0===this.attribute.value||!this.attribute.value.length)this.keypath.set(this.initialValue)},e}(Ec),Fc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getInitialValue=function(){return void 0},e.prototype.getValue=function(){var t=parseFloat(this.node.value);return isNaN(t)?void 0:t},e.prototype.setFromNode=function(t){var e=parseFloat(t.value);if(!isNaN(e))this.model.set(e)},e}(Cc),Nc={},Pc=function(t){function e(e){t.call(this,e,"checked"),this.siblings=so(this.ractive._guid+this.element.getAttribute("name")),this.siblings.push(this)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getValue=function(){return this.node.checked},e.prototype.handleChange=function(){la.start(this.root),this.siblings.forEach(function(t){t.model.set(t.getValue())}),la.end()},e.prototype.render=function(){if(t.prototype.render.call(this),this.node.addEventListener("change",to,!1),this.node.attachEvent)this.node.addEventListener("click",to,!1)},e.prototype.setFromNode=function(t){this.model.set(t.checked)},e.prototype.unbind=function(){T(this.siblings,this)},e.prototype.unrender=function(){this.node.removeEventListener("change",to,!1),this.node.removeEventListener("click",to,!1)},e}(Ec),Bc=function(t){function e(e){if(t.call(this,e,"name"),this.group=eo("radioname",this.model,ao),this.group.add(this),e.checked)this.group.value=this.getValue()}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){var t=this;if(!this.group.bound)this.group.bind();this.nameAttributeBinding={handleChange:function(){return t.node.name="{{"+t.model.getKeypath()+"}}"}},this.model.getKeypathModel().register(this.nameAttributeBinding)},e.prototype.getInitialValue=function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value");else return void 0},e.prototype.getValue=function(){return this.element.getAttribute("value")},e.prototype.handleChange=function(){if(this.node.checked)this.group.value=this.getValue(),t.prototype.handleChange.call(this)},e.prototype.lastVal=function(t,e){if(t)this.group.lastValue=e;else return this.group.lastValue},e.prototype.render=function(){t.prototype.render.call(this);var e=this.node;if(e.name="{{"+this.model.getKeypath()+"}}",e.checked=this.model.get()==this.element.getAttribute("value"),e.addEventListener("change",to,!1),e.attachEvent)e.addEventListener("click",to,!1)},e.prototype.setFromNode=function(t){if(t.checked)this.group.model.set(this.element.getAttribute("value"))},e.prototype.unbind=function(){this.group.remove(this),this.model.getKeypathModel().unregister(this.nameAttributeBinding)},e.prototype.unrender=function(){var t=this.node;t.removeEventListener("change",to,!1),t.removeEventListener("click",to,!1)},e}(Ec),Ic=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.forceUpdate=function(){var t=this,e=this.getValue();if(void 0!==e)this.attribute.locked=!0,la.scheduleTask(function(){return t.attribute.locked=!1}),this.model.set(e)},e.prototype.getInitialValue=function(){if(void 0===this.element.getAttribute("value")){var t=this.element.options,e=t.length;if(e){for(var n,i,r=e;r--;){var o=t[r];if(o.getAttribute("selected")){if(!o.getAttribute("disabled"))n=o.getAttribute("value");i=!0;break}}if(!i)for(;++r<e;)if(!t[r].getAttribute("disabled")){n=t[r].getAttribute("value");break}if(void 0!==n)this.element.attributeByName.value.value=n;return n}}},e.prototype.getValue=function(){var t,e=this.node.options,n=e.length;for(t=0;n>t;t+=1){var i=e[t];if(e[t].selected&&!e[t].disabled)return i._ractive?i._ractive.value:i.value}},e.prototype.render=function(){t.prototype.render.call(this),this.node.addEventListener("change",to,!1)},e.prototype.setFromNode=function(t){var e=oo(t)[0];this.model.set(e._ractive?e._ractive.value:e.value)},e.prototype.setValue=function(t){this.model.set(t)},e.prototype.unrender=function(){this.node.removeEventListener("change",to,!1)},e}(Ec),Kc=/;\s*$/,Rc=function(t){function e(e){var n=this;if(t.call(this,e),this.liveQueries=[],this.name=e.template.e.toLowerCase(),this.isVoid=Th.test(this.name),this.parent=ar(this.parentFragment,!1),this.parent&&"option"===this.parent.name)throw new Error("An <option> element cannot contain other elements (encountered <"+this.name+">)");this.decorators=[],this.attributeByName={},this.attributes=[];var i=[];(this.template.m||[]).forEach(function(t){switch(t.t){case zu:case Eh:case kh:case wh:case xh:n.attributes.push(Vo({owner:n,parentFragment:n.parentFragment,template:t}));break;default:i.push(t)}}),this.attributes.push(new Wl({owner:this,parentFragment:this.parentFragment,template:i}));for(var r=this.attributes.length;r--;){var o=n.attributes[r];if("type"===o.name)n.attributes.unshift(n.attributes.splice(r,1)[0]);else if("max"===o.name)n.attributes.unshift(n.attributes.splice(r,1)[0]);else if("min"===o.name)n.attributes.unshift(n.attributes.splice(r,1)[0]);else if("class"===o.name)n.attributes.unshift(n.attributes.splice(r,1)[0]);else if("value"===o.name)n.attributes.push(n.attributes.splice(r,1)[0])}if(e.template.f&&!e.deferContent)this.fragment=new Tp({template:e.template.f,owner:this,cssIds:null});this.binding=null}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){if(this.attributes.binding=!0,this.attributes.forEach(At),this.attributes.binding=!1,this.fragment)this.fragment.bind();if(!this.binding)this.recreateTwowayBinding()},e.prototype.createTwowayBinding=function(){var t="twoway"in this?this.twoway:this.ractive.twoway;if(!t)return null;var e=ho(this);if(!e)return null;var n=new e(this);return n&&n.model?n:null},e.prototype.destroyed=function(){if(this.attributes.forEach(function(t){return t.destroyed()}),this.fragment)this.fragment.destroyed()},e.prototype.detach=function(){if(!this.rendered)this.destroyed();return i(this.node)},e.prototype.find=function(t){if(ks(this.node,t))return this.node;if(this.fragment)return this.fragment.find(t);else return void 0},e.prototype.findAll=function(t,e){var n=e.test(this.node);if(n)if(e.add(this.node),e.live)this.liveQueries.push(e);if(this.fragment)this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){if(this.fragment)return this.fragment.findComponent(t);else return void 0},e.prototype.findAllComponents=function(t,e){if(this.fragment)this.fragment.findAllComponents(t,e)},e.prototype.findNextNode=function(){return null},e.prototype.firstNode=function(){return this.node},e.prototype.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():void 0},e.prototype.recreateTwowayBinding=function(){if(this.binding)this.binding.unbind(),this.binding.unrender();if(this.binding=this.createTwowayBinding())if(this.binding.bind(),this.rendered)this.binding.render()},e.prototype.render=function(t,e){var n=this;this.namespace=mo(this);var r,o=!1;if(e)for(var s;s=e.shift();)if(s.nodeName.toUpperCase()===n.template.e.toUpperCase()&&s.namespaceURI===n.namespace){n.node=r=s,o=!0;break}else i(s);if(!r)r=ws(this.template.e,this.namespace,this.getAttribute("is")),this.node=r;if(Vs(r,"_ractive",{value:{proxy:this}}),this.parentFragment.cssIds)r.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" "));if(o&&this.foundNode)this.foundNode(r);if(this.fragment){var a=o?F(r.childNodes):void 0;if(this.fragment.render(r,a),a)a.forEach(i)}if(o){if(this.binding&&this.binding.wasUndefined)this.binding.setFromNode(r);for(var u=r.attributes.length;u--;){var h=r.attributes[u].name;if(!(h in n.attributeByName))r.removeAttribute(h)}}if(this.attributes.forEach(Ft),this.binding)this.binding.render();if(Gr(this),this._introTransition&&this.ractive.transitionsEnabled)this._introTransition.isIntro=!0,la.registerTransition(this._introTransition);if(!o)t.appendChild(r);this.rendered=!0},e.prototype.shuffled=function(){this.liveQueries.forEach(fo),t.prototype.shuffled.call(this)},e.prototype.toString=function(){var t=this.template.e,e=this.attributes.map(co).join("");if("option"===this.name&&this.isSelected())e+=" selected";if("input"===this.name&&lo(this))e+=" checked";var n,i;if(this.attributes.forEach(function(t){if("class"===t.name)i=(i||"")+(i?" ":"")+o(t.getString());else if("style"===t.name){if(n=(n||"")+(n?" ":"")+o(t.getString()),n&&!Kc.test(n))n+=";"}else if(t.styleName)n=(n||"")+(n?" ":"")+a(t.styleName)+": "+o(t.getString())+";";else if(t.inlineClass&&t.getValue())i=(i||"")+(i?" ":"")+t.inlineClass}),void 0!==n)e=" style"+(n?'="'+n+'"':"")+e;if(void 0!==i)e=" class"+(i?'="'+i+'"':"")+e;var r="<"+t+e+">";if(this.isVoid)return r;if("textarea"===this.name&&void 0!==this.getAttribute("value"))r+=En(this.getAttribute("value"));else if(void 0!==this.getAttribute("contenteditable"))r+=this.getAttribute("value")||"";if(this.fragment)r+=this.fragment.toString(!/^(?:script|style)$/i.test(this.template.e));return r+="</"+t+">"},e.prototype.unbind=function(){if(this.attributes.forEach(Pt),this.binding)this.binding.unbind();if(this.fragment)this.fragment.unbind()},e.prototype.unrender=function(t){if(this.rendered){this.rendered=!1;var e=this._introTransition;if(e&&e.complete)e.complete();if("option"===this.name)this.detach();else if(t)la.detachWhenReady(this);if(this.fragment)this.fragment.unrender();if(this.binding)this.binding.unrender();if(this._outroTransition&&this.ractive.transitionsEnabled)this._outroTransition.isIntro=!1,la.registerTransition(this._outroTransition);po(this)}},e.prototype.update=function(){if(this.dirty)if(this.dirty=!1,this.attributes.forEach(Kt),this.fragment)this.fragment.update()},e}(Ol),Vc=function(t){function e(e){t.call(this,e),this.formBindings=[]}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(e,n){t.prototype.render.call(this,e,n),this.node.addEventListener("reset",go,!1)},e.prototype.unrender=function(e){this.node.removeEventListener("reset",go,!1),t.prototype.unrender.call(this,e)},e}(Rc),Mc=function(t){function e(e){if(t.call(this,e),this.parentFragment=e.parentFragment,this.template=e.template,this.index=e.index,e.owner)this.parent=e.owner;this.isStatic=!!e.template.s,this.model=null,this.dirty=!1}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){var t=this,e=or(this.parentFragment,this.template),n=e?e.get():void 0;if(this.isStatic)return void(this.model={get:function(){return n}});if(e)e.register(this),this.model=e;else this.resolver=this.parentFragment.resolve(this.template.r,function(e){t.model=e,e.register(t),t.handleChange(),t.resolver=null})},e.prototype.handleChange=function(){this.bubble()},e.prototype.rebinding=function(t,e,n){if(t=Wt(this.template,t,e),this["static"])return!1;if(t===this.model)return!1;if(this.model)this.model.unregister(this);if(t)t.addShuffleRegister(this,"mark");if(this.model=t,!n)this.handleChange();return!0},e.prototype.unbind=function(){if(!this.isStatic)this.model&&this.model.unregister(this),this.model=void 0,this.resolver&&this.resolver.unbind()},e}(Ol),Lc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bubble=function(){if(this.owner)this.owner.bubble();t.prototype.bubble.call(this)},e.prototype.detach=function(){return i(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.getString=function(){return this.model?r(this.model.get()):""},e.prototype.render=function(t,e){if(!Tr()){var n=this.getString();if(this.rendered=!0,e){var i=e[0];if(i&&3===i.nodeType){if(e.shift(),i.nodeValue!==n)i.nodeValue=n}else if(i=this.node=ps.createTextNode(n),e[0])t.insertBefore(i,e[0]);else t.appendChild(i);this.node=i}else this.node=ps.createTextNode(n),t.appendChild(this.node)}},e.prototype.toString=function(t){var e=this.getString();return t?En(e):e},e.prototype.unrender=function(t){if(t)this.detach();this.rendered=!1},e.prototype.update=function(){if(this.dirty)if(this.dirty=!1,this.rendered)this.node.data=this.getString()},e.prototype.valueOf=function(){return this.model?this.model.get():void 0},e}(Mc),Dc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(e,n){t.prototype.render.call(this,e,n),this.node.defaultValue=this.node.value},e}(Rc),Wc=function(t){function e(e){t.call(this,e),this.name=e.template.n,this.owner=e.owner||e.parentFragment.owner||e.element||ar(e.parentFragment),this.element=e.element||(this.owner.attributeByName?this.owner:ar(e.parentFragment)),this.parentFragment=this.element.parentFragment,this.ractive=this.parentFragment.ractive,this.fragment=null,this.element.attributeByName[this.name]=this,this.value=e.template.f}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){if(this.fragment)this.fragment.bind();var t=this.template.f,e=this.element.instance.viewmodel;if(0===t)e.joinKey(this.name).set(!0);else if("string"==typeof t){var n=qn(t);e.joinKey(this.name).set(n?n.value:t)}else if(f(t))yo(this,!0)},e.prototype.render=function(){},e.prototype.unbind=function(){if(this.fragment)this.fragment.unbind();if(this.boundFragment)this.boundFragment.unbind();if(this.element.bound)if(this.link.target===this.model)this.link.owner.unlink()},e.prototype.unrender=function(){},e.prototype.update=function(){if(this.dirty){if(this.dirty=!1,this.fragment)this.fragment.update();if(this.boundFragment)this.boundFragment.update();if(this.rendered)this.updateDelegate()}},e}(Ol),Uc=function(t){function e(e){var n=e.template;if(!n.a)n.a={};if(void 0===n.a.value&&!("disabled"in n.a))n.a.value=n.f||"";t.call(this,e),this.select=bo(this.parent)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){if(!this.select)return void t.prototype.bind.call(this);var e=this.attributeByName.selected;if(e&&void 0!==this.select.getAttribute("value")){var n=this.attributes.indexOf(e);this.attributes.splice(n,1),delete this.attributeByName.selected}t.prototype.bind.call(this),this.select.options.push(this)},e.prototype.bubble=function(){var e=this.getAttribute("value");if(this.node.value!==e)this.node._ractive.value=e;t.prototype.bubble.call(this)},e.prototype.getAttribute=function(t){var e=this.attributeByName[t];return e?e.getValue():"value"===t&&this.fragment?this.fragment.valueOf():void 0},e.prototype.isSelected=function(){var t=this.getAttribute("value");if(void 0===t||!this.select)return!1;var e=this.select.getAttribute("value");if(e==t)return!0;if(this.select.getAttribute("multiple")&&f(e))for(var n=e.length;n--;)if(e[n]==t)return!0},e.prototype.render=function(e,n){if(t.prototype.render.call(this,e,n),!this.attributeByName.value)this.node._ractive.value=this.getAttribute("value")},e.prototype.unbind=function(){if(t.prototype.unbind.call(this),this.select)T(this.select.options,this)},e}(Rc),zc=function(t){function e(){t.apply(this,arguments)}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){this.refName=this.template.r;var e,n=this.refName?wo(this.ractive,this.refName,this.parentFragment)||null:null;if(n)this.named=!0,this.setTemplate(this.template.r,n);if(!n)if(t.prototype.bind.call(this),this.model&&(e=this.model.get())&&"object"==typeof e&&("string"==typeof e.template||f(e.t))){if(e.template)this.source=e.template,e=Oo(this.template.r,e.template,this.ractive);else this.source=e.t;this.setTemplate(this.template.r,e.t)}else if((!this.model||"string"!=typeof this.model.get())&&this.refName)this.setTemplate(this.refName,n);else this.setTemplate(this.model.get());this.fragment=new Tp({owner:this,template:this.partialTemplate}).bind()},e.prototype.destroyed=function(){this.fragment.destroyed()},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.findAll(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.firstNode=function(t){return this.fragment.firstNode(t)},e.prototype.forceResetTemplate=function(){var t=this;if(this.partialTemplate=void 0,this.refName)this.partialTemplate=wo(this.ractive,this.refName,this.parentFragment);if(!this.partialTemplate)this.partialTemplate=wo(this.ractive,this.name,this.parentFragment);if(!this.partialTemplate)w("Could not find template for partial '"+this.name+"'"),this.partialTemplate=[];if(this.inAttribute)Fr(function(){return t.fragment.resetTemplate(t.partialTemplate)});else this.fragment.resetTemplate(this.partialTemplate);this.bubble()},e.prototype.render=function(t,e){this.fragment.render(t,e)},e.prototype.setTemplate=function(t,e){if(this.name=t,!e&&null!==e)e=wo(this.ractive,t,this.parentFragment);if(!e)w("Could not find template for partial '"+t+"'");this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){t.prototype.unbind.call(this),this.fragment.unbind()},e.prototype.unrender=function(t){this.fragment.unrender(t)},e.prototype.update=function(){var t;if(this.dirty){if(this.dirty=!1,!this.named){if(this.model)t=this.model.get();if(t&&"string"==typeof t&&t!==this.name)this.setTemplate(t),this.fragment.resetTemplate(this.partialTemplate);else if(t&&"object"==typeof t&&("string"==typeof t.template||f(t.t)))if(t.t!==this.source&&t.template!==this.source){if(t.template)this.source=t.template,t=Oo(this.name,t.template,this.ractive);else this.source=t.t;this.setTemplate(this.name,t.t),this.fragment.resetTemplate(this.partialTemplate)}}this.fragment.update()}},e}(Mc),$c=function(t){this.parent=t.owner.parentFragment,this.parentFragment=this,this.owner=t.owner,this.ractive=this.parent.ractive,this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.context=null,this.rendered=!1,this.iterations=[],this.template=t.template,this.indexRef=t.indexRef,this.keyRef=t.keyRef,this.pendingNewIndices=null,this.previousIterations=null,this.isArray=!1};$c.prototype.bind=function(t){var e=this;this.context=t;var n=t.get();if(this.isArray=f(n)){this.iterations=[];for(var i=n.length,r=0;i>r;r+=1)e.iterations[r]=e.createIteration(r,r)}else if(p(n)){if(this.isArray=!1,this.indexRef){var o=this.indexRef.split(",");this.keyRef=o[0],this.indexRef=o[1]}this.iterations=Object.keys(n).map(function(t,n){return e.createIteration(t,n)})}return this},$c.prototype.bubble=function(){this.owner.bubble()},$c.prototype.createIteration=function(t,e){var n=new Tp({owner:this,template:this.template});n.key=t,n.index=e,n.isIteration=!0;var i=this.context.joinKey(t);if(this.owner.template.z)n.aliases={},n.aliases[this.owner.template.z[0].n]=i;return n.bind(i)},$c.prototype.destroyed=function(){this.iterations.forEach(function(t){return t.destroyed()})},$c.prototype.detach=function(){var t=e();return this.iterations.forEach(function(e){return t.appendChild(e.detach())}),t},$c.prototype.find=function(t){var e,n=this,i=this.iterations.length;for(e=0;i>e;e+=1){var r=n.iterations[e].find(t);if(r)return r}},$c.prototype.findAll=function(t,e){var n,i=this,r=this.iterations.length;for(n=0;r>n;n+=1)i.iterations[n].findAll(t,e);

},$c.prototype.findComponent=function(t){var e,n=this,i=this.iterations.length;for(e=0;i>e;e+=1){var r=n.iterations[e].findComponent(t);if(r)return r}},$c.prototype.findAllComponents=function(t,e){var n,i=this,r=this.iterations.length;for(n=0;r>n;n+=1)i.iterations[n].findAllComponents(t,e)},$c.prototype.findNextNode=function(t){var e=this;if(t.index<this.iterations.length-1)for(var n=t.index+1;n<e.iterations.length;n++){var i=e.iterations[n].firstNode(!0);if(i)return i}return this.owner.findNextNode()},$c.prototype.firstNode=function(t){return this.iterations[0]?this.iterations[0].firstNode(t):null},$c.prototype.rebinding=function(t){var e=this;this.context=t,this.iterations.forEach(function(n){var i=t?t.joinKey(n.key||n.index):void 0;if(e.owner.template.z)n.aliases={},n.aliases[e.owner.template.z[0].n]=i})},$c.prototype.render=function(t,e){if(this.iterations)this.iterations.forEach(function(n){return n.render(t,e)});this.rendered=!0},$c.prototype.shuffle=function(t){var e=this;if(!this.pendingNewIndices)this.previousIterations=this.iterations.slice();if(!this.pendingNewIndices)this.pendingNewIndices=[];this.pendingNewIndices.push(t);var n=[];t.forEach(function(t,i){if(-1!==t){var r=e.iterations[i];if(n[t]=r,t!==i&&r)r.dirty=!0}}),this.iterations=n,this.bubble()},$c.prototype.shuffled=function(){this.iterations.forEach(function(t){return t.shuffled()})},$c.prototype.toString=function(t){return this.iterations?this.iterations.map(t?Vt:Rt).join(""):""},$c.prototype.unbind=function(){return this.iterations.forEach(Pt),this},$c.prototype.unrender=function(t){if(this.iterations.forEach(t?It:Bt),this.pendingNewIndices&&this.previousIterations)this.previousIterations.forEach(function(e){if(e.rendered)t?It(e):Bt(e)});this.rendered=!1},$c.prototype.update=function(){var t=this;if(this.pendingNewIndices)return void this.updatePostShuffle();if(!this.updating){this.updating=!0;var n,i,r,o=this.context.get(),s=this.isArray,a=!0;if(this.isArray=f(o)){if(s)if(a=!1,this.iterations.length>o.length)n=this.iterations.splice(o.length)}else if(p(o)&&!s)for(a=!1,n=[],i={},r=this.iterations.length;r--;){var u=t.iterations[r];if(u.key in o)i[u.key]=!0;else t.iterations.splice(r,1),n.push(u)}if(a)n=this.iterations,this.iterations=[];if(n)n.forEach(function(t){t.unbind(),t.unrender(!0)});this.iterations.forEach(Kt);var h,l,c=f(o)?o.length:p(o)?Object.keys(o).length:0;if(c>this.iterations.length){if(h=this.rendered?e():null,r=this.iterations.length,f(o))for(;r<o.length;){if(l=t.createIteration(r,r),t.iterations.push(l),t.rendered)l.render(h);r+=1}else if(p(o)){if(this.indexRef&&!this.keyRef){var d=this.indexRef.split(",");this.keyRef=d[0],this.indexRef=d[1]}Object.keys(o).forEach(function(e){if(!(i&&e in i)){if(l=t.createIteration(e,r),t.iterations.push(l),t.rendered)l.render(h);r+=1}})}if(this.rendered){var m=this.parent.findParentNode(),g=this.parent.findNextNode(this.owner);m.insertBefore(h,g)}}this.updating=!1}},$c.prototype.updatePostShuffle=function(){var t=this,n=this.pendingNewIndices[0];this.pendingNewIndices.slice(1).forEach(function(t){n.forEach(function(e,i){n[i]=t[e]})});var i,r=this.context.get().length,o=this.previousIterations.length,s={};n.forEach(function(e,n){var i=t.previousIterations[n];if(t.previousIterations[n]=null,-1===e)s[n]=i;else if(i.index!==e){var r=t.context.joinKey(e);if(i.index=e,i.context=r,t.owner.template.z)i.aliases={},i.aliases[t.owner.template.z[0].n]=r}}),this.previousIterations.forEach(function(t,e){if(t)s[e]=t});var a=this.rendered?e():null,u=this.rendered?this.parent.findParentNode():null,h="startIndex"in n;for(i=h?n.startIndex:0;r>i;i++){var f=t.iterations[i];if(!f||!h){if(!f)t.iterations[i]=t.createIteration(i,i);if(t.rendered){if(s[i])a.appendChild(s[i].detach());if(f)a.appendChild(f.detach());else t.iterations[i].render(a)}}else if(t.rendered){if(s[i])a.appendChild(s[i].detach());if(a.childNodes.length)u.insertBefore(a,f.firstNode())}}if(this.rendered){for(i=r;o>i;i++)if(s[i])a.appendChild(s[i].detach());if(a.childNodes.length)u.insertBefore(a,this.owner.findNextNode())}Object.keys(s).forEach(function(t){return s[t].unbind().unrender(!0)}),this.iterations.forEach(Kt),this.pendingNewIndices=null,this.shuffled()};var qc,Zc=function(t){function n(e){t.call(this,e),this.sectionType=e.template.n||null,this.templateSectionType=this.sectionType,this.subordinate=1===e.template.l,this.fragment=null}return n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.bind=function(){if(t.prototype.bind.call(this),this.subordinate)this.sibling=this.parentFragment.items[this.parentFragment.items.indexOf(this)-1],this.sibling.nextSibling=this;if(this.model)this.dirty=!0,this.update();else if(this.sectionType&&this.sectionType===dh&&(!this.sibling||!this.sibling.isTruthy()))this.fragment=new Tp({owner:this,template:this.template.f}).bind()},n.prototype.destroyed=function(){if(this.fragment)this.fragment.destroyed()},n.prototype.detach=function(){return this.fragment?this.fragment.detach():e()},n.prototype.find=function(t){if(this.fragment)return this.fragment.find(t);else return void 0},n.prototype.findAll=function(t,e){if(this.fragment)this.fragment.findAll(t,e)},n.prototype.findComponent=function(t){if(this.fragment)return this.fragment.findComponent(t);else return void 0},n.prototype.findAllComponents=function(t,e){if(this.fragment)this.fragment.findAllComponents(t,e)},n.prototype.firstNode=function(t){return this.fragment&&this.fragment.firstNode(t)},n.prototype.isTruthy=function(){if(this.subordinate&&this.sibling.isTruthy())return!0;var t=!this.model?void 0:this.model.isRoot?this.model.value:this.model.get();return!!t&&!Ao(t)},n.prototype.rebinding=function(e,n,i){if(t.prototype.rebinding.call(this,e,n,i))if(this.fragment&&this.sectionType!==ph&&this.sectionType!==dh)this.fragment.rebinding(e,n)},n.prototype.render=function(t,e){if(this.rendered=!0,this.fragment)this.fragment.render(t,e)},n.prototype.shuffle=function(t){if(this.fragment&&this.sectionType===mh)this.fragment.shuffle(t)},n.prototype.toString=function(t){return this.fragment?this.fragment.toString(t):""},n.prototype.unbind=function(){if(t.prototype.unbind.call(this),this.fragment)this.fragment.unbind()},n.prototype.unrender=function(t){if(this.rendered&&this.fragment)this.fragment.unrender(t);this.rendered=!1},n.prototype.update=function(){if(this.dirty){if(this.fragment&&this.sectionType!==ph&&this.sectionType!==dh)this.fragment.context=this.model;if(this.model||this.sectionType===dh){this.dirty=!1;var t=!this.model?void 0:this.model.isRoot?this.model.value:this.model.get(),n=!this.subordinate||!this.sibling.isTruthy(),i=this.sectionType;if(null===this.sectionType||null===this.templateSectionType)this.sectionType=So(t,this.template.i);if(i&&i!==this.sectionType&&this.fragment){if(this.rendered)this.fragment.unbind().unrender(!0);this.fragment=null}var r;if(this.sectionType===mh)if(this.fragment)this.fragment.update();else r=new $c({owner:this,template:this.template.f,indexRef:this.template.i}).bind(this.model);else if(this.sectionType===gh)if(this.fragment)this.fragment.update();else r=new Tp({owner:this,template:this.template.f}).bind(this.model);else if(this.sectionType===vh){if(this.fragment)if(Ao(t)){if(this.rendered)this.fragment.unbind().unrender(!0);this.fragment=null}else this.fragment.update();else if(!Ao(t))r=new Tp({owner:this,template:this.template.f}).bind(this.model)}else{var o=n&&(this.sectionType===dh?Ao(t):!!t&&!Ao(t));if(this.fragment)if(o)this.fragment.update();else{if(this.rendered)this.fragment.unbind().unrender(!0);this.fragment=null}else if(o)r=new Tp({owner:this,template:this.template.f}).bind(null)}if(r){if(this.rendered){var s=this.parentFragment.findParentNode(),a=this.parentFragment.findNextNode(this);if(a){var u=e();r.render(u),a.parentNode.insertBefore(u,a)}else r.render(s)}this.fragment=r}if(this.nextSibling)this.nextSibling.dirty=!0,this.nextSibling.update()}}},n}(Mc),Hc=function(t){function e(e){t.call(this,e),this.options=[]}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.foundNode=function(t){if(this.binding){var e=oo(t);if(e.length>0)this.selectedOptions=e}},e.prototype.render=function(e,n){t.prototype.render.call(this,e,n),this.sync();for(var i=this.node,r=i.options.length;r--;)i.options[r].defaultSelected=i.options[r].selected;this.rendered=!0},e.prototype.sync=function(){var t=this,e=this.node;if(e){var n=F(e.options);if(this.selectedOptions)return n.forEach(function(e){if(t.selectedOptions.indexOf(e)>=0)e.selected=!0;else e.selected=!1}),this.binding.setFromNode(e),void delete this.selectedOptions;var i=this.getAttribute("value"),r=this.getAttribute("multiple");if(void 0!==i){var o;if(n.forEach(function(t){var e=t._ractive?t._ractive.value:t.value,n=r?jo(i,e):i==e;if(n)o=!0;t.selected=n}),!o&&!r)if(this.binding)this.binding.forceUpdate()}else if(this.binding)this.binding.forceUpdate()}},e.prototype.update=function(){t.prototype.update.call(this),this.sync()},e}(Rc),Qc=function(t){function e(e){var n=e.template;if(e.deferContent=!0,t.call(this,e),!this.attributeByName.value)if(n.f&&uo({template:n}))this.attributes.push(Vo({owner:this,template:{t:zu,f:n.f,n:"value"},parentFragment:this.parentFragment}));else this.fragment=new Tp({owner:this,cssIds:null,template:n.f})}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bubble=function(){var t=this;if(!this.dirty){if(this.dirty=!0,this.rendered&&!this.binding&&this.fragment)la.scheduleTask(function(){t.dirty=!1,t.node.value=t.fragment.toString()});this.parentFragment.bubble()}},e}(Dc),Yc=function(t){function e(e){t.call(this,e),this.type=Bu}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){},e.prototype.detach=function(){return i(this.node)},e.prototype.firstNode=function(){return this.node},e.prototype.render=function(t,e){if(!Tr())if(this.rendered=!0,e){var n=e[0];if(n&&3===n.nodeType){if(e.shift(),n.nodeValue!==this.template)n.nodeValue=this.template}else if(n=this.node=ps.createTextNode(this.template),e[0])t.insertBefore(n,e[0]);else t.appendChild(n);this.node=n}else this.node=ps.createTextNode(this.template),t.appendChild(this.node)},e.prototype.toString=function(t){return t?En(this.template):this.template},e.prototype.unbind=function(){},e.prototype.unrender=function(t){if(this.rendered&&t)this.detach();this.rendered=!1},e.prototype.update=function(){},e.prototype.valueOf=function(){return this.template},e}(Ol);if(!ds)qc=null;else{var Gc={},Jc=ws("div").style;qc=function(t){if(t=ur(t),!Gc[t])if(void 0!==Jc[t])Gc[t]=t;else for(var e=t.charAt(0).toUpperCase()+t.substring(1),n=bs.length;n--;){var i=bs[n];if(void 0!==Jc[i+e]){Gc[t]=i+e;break}}return Gc[t]}}var Xc,tp=qc,ep="hidden";if(ps){var np;if(ep in ps)np="";else for(var ip=bs.length;ip--;){var rp=bs[ip];if(ep=rp+"Hidden",ep in ps){np=rp;break}}if(void 0!==np)ps.addEventListener(np+"visibilitychange",Co),Co();else{if("onfocusout"in ps)ps.addEventListener("focusout",To),ps.addEventListener("focusin",Fo);else cs.addEventListener("pagehide",To),cs.addEventListener("blur",To),cs.addEventListener("pageshow",Fo),cs.addEventListener("focus",Fo);Xc=!0}}var op,sp=new RegExp("^-(?:"+bs.join("|")+")-"),ap=new RegExp("^(?:"+bs.join("|")+")([A-Z])");if(!ds)op=null;else{var up,hp,fp,lp,cp,pp,dp=ws("div").style,mp=function(t){return t},gp={},vp={};if(void 0!==dp.transition)up="transition",hp="transitionend",fp=!0;else if(void 0!==dp.webkitTransition)up="webkitTransition",hp="webkitTransitionEnd",fp=!0;else fp=!1;if(up)lp=up+"Duration",cp=up+"Property",pp=up+"TimingFunction";op=function(t,e,n,i,r){setTimeout(function(){function o(){clearTimeout(l)}function s(){if(h&&f)t.unregisterCompleteHandler(o),t.ractive.fire(t.name+":end",t.node,t.isIntro),r()}function a(t){var e=i.indexOf(ur(No(t.propertyName)));if(-1!==e)i.splice(e,1);if(!i.length)clearTimeout(l),u()}function u(){p[cp]=d.property,p[pp]=d.duration,p[lp]=d.timing,t.node.removeEventListener(hp,a,!1),f=!0,s()}var h,f,l,c=(t.node.namespaceURI||"")+t.node.tagName,p=t.node.style,d={property:p[cp],timing:p[pp],duration:p[lp]};p[cp]=i.map(tp).map(Po).join(","),p[pp]=Po(n.easing||"linear"),p[lp]=n.duration/1e3+"s",t.node.addEventListener(hp,a,!1),l=setTimeout(function(){i=[],u()},n.duration+(n.delay||0)+50),t.registerCompleteHandler(o),setTimeout(function(){for(var r,o,u,l,d,m,g=i.length,v=[];g--;){if(l=i[g],r=c+l,fp&&!vp[r])if(p[tp(l)]=e[l],!gp[r])if(o=t.getStyle(l),gp[r]=t.getStyle(l)!=e[l],vp[r]=!gp[r],vp[r])p[tp(l)]=o;if(!fp||vp[r]){if(void 0===o)o=t.getStyle(l);if(u=i.indexOf(l),-1===u)b("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node});else i.splice(u,1);d=/[^\d]*$/.exec(e[l])[0],m=E(parseFloat(o),parseFloat(e[l]))||function(){return e[l]},v.push({name:tp(l),interpolator:m,suffix:d})}}if(v.length){var y;if("string"==typeof n.easing){if(y=t.ractive.easing[n.easing],!y)w(Xs(n.easing,"easing")),y=mp}else if("function"==typeof n.easing)y=n.easing;else y=mp;new Va({duration:n.duration,easing:y,step:function(e){for(var n=v.length;n--;){var i=v[n];t.node.style[i.name]=i.interpolator(e)+i.suffix}},complete:function(){h=!0,s()}})}else h=!0;if(!i.length)t.node.removeEventListener(hp,a,!1),f=!0,s()},0)},n.delay||0)}}var yp=op,bp=cs&&(cs.getComputedStyle||Cs.getComputedStyle),wp=aa.resolve(),kp={t0:"intro-outro",t1:"intro",t2:"outro"},xp=function(t){this.owner=t.owner||t.parentFragment.owner||ar(t.parentFragment),this.element=this.owner.attributeByName?this.owner:ar(t.parentFragment),this.ractive=this.owner.ractive,this.template=t.template,this.parentFragment=t.parentFragment,this.options=t,this.onComplete=[]};xp.prototype.animateStyle=function(t,e,n){var i=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(!Xc)return this.setStyle(t,e),wp;var r;if("string"==typeof t)r={},r[t]=e;else r=t,n=e;if(!n)w('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this;return new aa(function(t){if(!n.duration)return i.setStyle(r),void t();for(var e=Object.keys(r),o=[],s=bp(i.owner.node),a=e.length;a--;){var u=e[a],h=s[tp(u)];if("0px"===h)h=0;if(h!=r[u])o.push(u),i.owner.node.style[tp(u)]=h}if(!o.length)return void t();else return void yp(i,r,n,o,t)})},xp.prototype.bind=function(){var t=this,e=this.options;if(e.template){if("t0"===e.template.v||"t1"==e.template.v)this.element._introTransition=this;if("t0"===e.template.v||"t2"==e.template.v)this.element._outroTransition=this;this.eventName=kp[e.template.v]}var n=this.owner.ractive;if(e.name)this.name=e.name;else{var i=e.template.f;if("string"==typeof i.n)i=i.n;if("string"!=typeof i){var r=new Tp({owner:this.owner,template:i.n}).bind();if(i=r.toString(),r.unbind(),""===i)return}this.name=i}if(e.params)this.params=e.params;else if(e.template.f.a&&!e.template.f.a.s)this.params=e.template.f.a;else if(e.template.f.d){var o=new Tp({owner:this.owner,template:e.template.f.d}).bind();this.params=o.getArgsList(),o.unbind()}if("function"==typeof this.name)this._fn=this.name,this.name=this._fn.name;else this._fn=k("transitions",n,this.name);if(!this._fn)w(Xs(this.name,"transition"),{ractive:n});if(e.template&&this.template.f.a&&this.template.f.a.s)this.resolvers=[],this.models=this.template.f.a.r.map(function(e,n){var i,r=Zt(t.parentFragment,e);if(!r)i=t.parentFragment.resolve(e,function(e){t.models[n]=e,T(t.resolvers,i),e.register(t)}),t.resolvers.push(i);else r.register(t);return r}),this.argsFn=gn(this.template.f.a.s,this.template.f.a.r.length)},xp.prototype.destroyed=function(){},xp.prototype.getStyle=function(t){var e=bp(this.owner.node);if("string"==typeof t){var n=e[tp(t)];return"0px"===n?0:n}if(!f(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(var i={},r=t.length;r--;){var o=t[r],s=e[tp(o)];if("0px"===s)s=0;i[o]=s}return i},xp.prototype.processParams=function(t,e){if("number"==typeof t)t={duration:t};else if("string"==typeof t)if("slow"===t)t={duration:600};else if("fast"===t)t={duration:200};else t={duration:400};else if(!t)t={};return u({},e,t)},xp.prototype.rebinding=function(t,e){var n=this.models.indexOf(e);if(~n)if(t=Wt(this.template.f.a.r[n],t,e),t!==e)if(e.unregister(this),this.models.splice(n,1,t),t)t.addShuffleRegister(this,"mark")},xp.prototype.registerCompleteHandler=function(t){O(this.onComplete,t)},xp.prototype.render=function(){},xp.prototype.setStyle=function(t,e){if("string"==typeof t)this.owner.node.style[tp(t)]=e;else{var n;for(n in t)if(t.hasOwnProperty(n))this.owner.node.style[tp(n)]=t[n]}return this},xp.prototype.start=function(){var t,e=this,n=this.node=this.element.node,i=n.getAttribute("style"),r=this.params;if(this.complete=function(r){if(!t){if(e.onComplete.forEach(function(t){return t()}),!r&&e.isIntro)Bo(n,i);e._manager.remove(e),t=!0}},!this._fn)return void this.complete();if(this.argsFn){var o=this.models.map(function(t){if(!t)return void 0;else return t.get()});r=this.argsFn.apply(this.ractive,o)}var s=this._fn.apply(this.ractive,[this].concat(r));if(s)s.then(this.complete)},xp.prototype.toString=function(){return""},xp.prototype.unbind=function(){if(this.resolvers)this.resolvers.forEach(Pt)},xp.prototype.unregisterCompleteHandler=function(t){T(this.onComplete,t)},xp.prototype.unrender=function(){},xp.prototype.update=function(){};var Ep,_p,Op={};try{ws("table").innerHTML="foo"}catch(Ws){Ep=!0,_p={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Ap=function(t){function n(e){t.call(this,e)}return n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.detach=function(){var t=e();return this.nodes.forEach(function(e){return t.appendChild(e)}),t},n.prototype.find=function(t){var e,n=this,i=this.nodes.length;for(e=0;i>e;e+=1){var r=n.nodes[e];if(1===r.nodeType){if(ks(r,t))return r;var o=r.querySelector(t);if(o)return o}else;}return null},n.prototype.findAll=function(t,e){var n,i=this,r=this.nodes.length;for(n=0;r>n;n+=1){var o=i.nodes[n];if(1===o.nodeType){if(e.test(o))e.add(o);var s=o.querySelectorAll(t);if(s){var a,u=s.length;for(a=0;u>a;a+=1)e.add(s[a])}}else;}},n.prototype.findComponent=function(){return null},n.prototype.firstNode=function(){return this.nodes[0]},n.prototype.render=function(t){var e=this.model?this.model.get():"";this.nodes=Io(e,this.parentFragment.findParentNode(),t),this.rendered=!0},n.prototype.toString=function(){return this.model&&null!=this.model.get()?xn(""+this.model.get()):""},n.prototype.unrender=function(){if(this.nodes)this.nodes.forEach(function(t){return i(t)});this.rendered=!1},n.prototype.update=function(){if(this.rendered&&this.dirty){this.dirty=!1,this.unrender();var t=e();this.render(t);var n=this.parentFragment.findParentNode(),i=this.parentFragment.findNextNode(this);n.insertBefore(t,i)}},n}(Mc),Sp=function(t){function e(e){t.call(this,e),this.container=e.parentFragment.ractive,this.component=this.container.component,this.containerFragment=e.parentFragment,this.parentFragment=this.component.parentFragment,this.name=e.template.n||""}return e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(){var t=this.name;(this.component.yielders[t]||(this.component.yielders[t]=[])).push(this);var e=this.container._inlinePartials[t||"content"];if("string"==typeof e)e=Ki(e).t;if(!e)b('Could not find template for partial "'+t+'"',{ractive:this.ractive}),e=[];this.fragment=new Tp({owner:this,ractive:this.container.parent,template:e}).bind()},e.prototype.bubble=function(){if(!this.dirty)this.containerFragment.bubble(),this.dirty=!0},e.prototype.detach=function(){return this.fragment.detach()},e.prototype.find=function(t){return this.fragment.find(t)},e.prototype.findAll=function(t,e){this.fragment.find(t,e)},e.prototype.findComponent=function(t){return this.fragment.findComponent(t)},e.prototype.findAllComponents=function(t,e){this.fragment.findAllComponents(t,e)},e.prototype.findNextNode=function(){return this.containerFragment.findNextNode(this)},e.prototype.firstNode=function(t){return this.fragment.firstNode(t)},e.prototype.render=function(t,e){return this.fragment.render(t,e)},e.prototype.setTemplate=function(t){var e=this.parentFragment.ractive.partials[t];if("string"==typeof e)e=Ki(e).t;this.partialTemplate=e||[]},e.prototype.toString=function(t){return this.fragment.toString(t)},e.prototype.unbind=function(){this.fragment.unbind(),T(this.component.yielders[this.name],this)},e.prototype.unrender=function(t){this.fragment.unrender(t)},e.prototype.update=function(){this.dirty=!1,this.fragment.update()},e}(Ol),jp={};jp[Yu]=Tl,jp[Qu]=xc,jp[Iu]=Lc,jp[Du]=zc,jp[Ru]=Zc,jp[Ku]=Ap,jp[Zu]=Sp,jp[zu]=Vl,jp[Eh]=Ml,jp[kh]=kc,jp[wh]=vc,jp[xh]=xp;var Cp={doctype:xc,form:Vc,input:Dc,option:Uc,select:Hc,textarea:Qc},Tp=function(t){this.owner=t.owner,this.isRoot=!t.owner.parentFragment,this.parent=this.isRoot?null:this.owner.parentFragment,this.ractive=t.ractive||(this.isRoot?t.owner:this.parent.ractive),this.componentParent=this.isRoot&&this.ractive.component?this.ractive.component.parentFragment:null,this.context=null,this.rendered=!1,this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.resolvers=[],this.dirty=!1,this.dirtyArgs=this.dirtyValue=!0,this.template=t.template||[],this.createItems()};Tp.prototype.bind=function(t){if(this.context=t,this.items.forEach(At),this.bound=!0,this.dirty)this.update();return this},Tp.prototype.bubble=function(){if(this.dirtyArgs=this.dirtyValue=!0,!this.dirty)if(this.dirty=!0,this.isRoot){if(this.ractive.component)this.ractive.component.bubble();else if(this.bound)la.addFragment(this)}else this.owner.bubble()},Tp.prototype.createItems=function(){var t=this,e=this.template.length;this.items=[];for(var n=0;e>n;n++)t.items[n]=Vo({parentFragment:t,template:t.template[n],index:n})},Tp.prototype.destroyed=function(){this.items.forEach(function(t){return t.destroyed()})},Tp.prototype.detach=function(){var t=e();return this.items.forEach(function(e){return t.appendChild(e.detach())}),t},Tp.prototype.find=function(t){var e,n=this,i=this.items.length;for(e=0;i>e;e+=1){var r=n.items[e].find(t);if(r)return r}},Tp.prototype.findAll=function(t,e){var n=this;if(this.items){var i,r=this.items.length;for(i=0;r>i;i+=1){var o=n.items[i];if(o.findAll)o.findAll(t,e)}}return e},Tp.prototype.findComponent=function(t){var e,n=this,i=this.items.length;for(e=0;i>e;e+=1){var r=n.items[e].findComponent(t);if(r)return r}},Tp.prototype.findAllComponents=function(t,e){var n=this;if(this.items){var i,r=this.items.length;for(i=0;r>i;i+=1){var o=n.items[i];if(o.findAllComponents)o.findAllComponents(t,e)}}return e},Tp.prototype.findContext=function(){for(var t=this;t&&!t.context;)t=t.parent;if(!t)return this.ractive.viewmodel;else return t.context},Tp.prototype.findNextNode=function(t){for(var e=this,n=t.index+1;n<e.items.length;n++)if(e.items[n]){var i=e.items[n].firstNode(!0);if(i)return i}else;if(this.isRoot)if(this.ractive.component)return this.ractive.component.parentFragment.findNextNode(this.ractive.component);else return null;return this.owner.findNextNode(this)},Tp.prototype.findParentNode=function(){var t=this;do{if(t.owner.type===Lu)return t.owner.node;if(t.isRoot&&!t.ractive.component)return t.ractive.el;if(t.owner.type===Zu)t=t.owner.containerFragment;else t=t.componentParent||t.parent}while(t);throw new Error("Could not find parent node")},Tp.prototype.findRepeatingFragment=function(){for(var t=this;(t.parent||t.componentParent)&&!t.isIteration;)t=t.parent||t.componentParent;return t},Tp.prototype.firstNode=function(t){for(var e,n=this,i=0;i<n.items.length;i++)if(e=n.items[i].firstNode(!0))return e;if(t)return null;else return this.parent.findNextNode(this.owner)},Tp.prototype.getArgsList=function(){if(this.dirtyArgs){var t={},e=Mo(this.items,t,this.ractive._guid),n=qn("["+e+"]",t);this.argsList=n?n.value:[this.toString()],this.dirtyArgs=!1}return this.argsList},Tp.prototype.rebinding=function(t){this.context=t},Tp.prototype.render=function(t,e){if(this.rendered)throw new Error("Fragment is already rendered!");this.rendered=!0,this.items.forEach(function(n){return n.render(t,e)})},Tp.prototype.resetTemplate=function(t){var n=this.bound,i=this.rendered;if(n){if(i)this.unrender(!0);this.unbind()}if(this.template=t,this.createItems(),n)if(this.bind(this.context),i){var r=this.findParentNode(),o=this.parent?this.parent.findNextNode(this.owner):null;if(o){var s=e();this.render(s),r.insertBefore(s,o)}else this.render(r)}},Tp.prototype.resolve=function(t,e){if(!this.context&&this.parent.resolve)return this.parent.resolve(t,e);var n=new nu(this,t,e);return this.resolvers.push(n),n},Tp.prototype.shuffled=function(){this.items.forEach(function(t){return t.shuffled()})},Tp.prototype.toHtml=function(){return this.toString()},Tp.prototype.toString=function(t){return this.items.map(t?Vt:Rt).join("")},Tp.prototype.unbind=function(){return this.items.forEach(Pt),this.bound=!1,this},Tp.prototype.unrender=function(t){this.items.forEach(t?Lo:Bt),this.rendered=!1},Tp.prototype.update=function(){if(this.dirty)if(!this.updating)this.dirty=!1,this.updating=!0,this.items.forEach(Kt),this.updating=!1;else if(this.isRoot)la.addFragmentToRoot(this)},Tp.prototype.valueOf=function(){if(1===this.items.length)return this.items[0].valueOf();if(this.dirtyValue){var t={},e=Mo(this.items,t,this.ractive._guid),n=qn(e,t);this.value=n?n.value:this.toString(),this.dirtyValue=!1}return this.value};var Fp=Jt("reverse").path,Np=Jt("shift").path,Pp=Jt("sort").path,Bp=Jt("splice").path,Ip=new na("teardown"),Kp=new na("unrender"),Rp=Jt("unshift").path,Vp={add:G,animate:tt,detach:et,find:nt,findAll:at,findAllComponents:ut,findComponent:ht,findContainer:ft,findParent:lt,fire:wt,get:Ht,getNodeInfo:Re,insert:Ve,link:Le,merge:ee,observe:De,observeList:Ue,observeOnce:$e,off:He,on:Qe,once:Ye,pop:au,push:uu,render:en,reset:tr,resetPartial:ir,resetTemplate:Do,reverse:Fp,set:Wo,shift:Np,sort:Pp,splice:Bp,subtract:Uo,teardown:zo,toggle:$o,toCSS:qo,toCss:qo,toHTML:Zo,toHtml:Zo,transition:Ho,unlink:Qo,unrender:Yo,unshift:Rp,update:ie,updateModel:Go},Mp="function";if(typeof Date.now!==Mp||typeof String.prototype.trim!==Mp||typeof Object.keys!==Mp||typeof Array.prototype.indexOf!==Mp||typeof Array.prototype.forEach!==Mp||typeof Array.prototype.map!==Mp||typeof Array.prototype.filter!==Mp||cs&&typeof cs.addEventListener!==Mp)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return u(us.prototype,Vp,fs),us.prototype.constructor=us,us.defaults=us.prototype,Ms(us,{DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:rs},escapeKey:{value:W},getNodeInfo:{value:Ke},joinKeys:{value:ss},parse:{value:Ki},splitKeypath:{value:as},unescapeKey:{value:$},getCSS:{value:Xe},Promise:{value:aa},enhance:{writable:!0,value:!1},svg:{value:ys},magic:{value:hs},VERSION:{value:"0.8.0-edge-fbaba751cc3b07d2d452766f33eebb99190dc267"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:ls},events:{writable:!0,value:{}},interpolators:{writable:!0,value:ta},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}}),us});