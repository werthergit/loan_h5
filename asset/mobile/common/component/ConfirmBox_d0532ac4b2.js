define('mobile/common/component/ConfirmBox_html',function(){return'<div class="confirm-dialog"><div class="code-wrapper">手机验证码<input type="text" pattern="[0-9]*" value="{{smsCode}}"><span class="code-btn {{colorClassName}}"><CodeButton options="{{verifyCodeButtonOptions}}" on-click="sendSmsCode()" /></span></div>{{#if options.protocolName}}<div class="protocol-wrapper">{{#if agree}}<i class="icon-check-o" on-click="set(\'agree\', false)"></i>{{else}}<i class="icon-circle-o" on-click="set(\'agree\', true)"></i>{{/if}}<span class="protocol">同意<span>{{options.protocolName}}</span></span></div>{{/if}}<div class="error-tip error">{{errorContent}}</div><button class="btn-submit{{#if submitDisabled || submitting}} disabled{{/if}}" on-click="submit()" {{#if submitting}}disabled{{/if}}>{{#if submitting}}提交中{{>loader}}{{else}}{{options.submitButtonName}}{{/if}}</button><style>{{style}}</style></div>';}),define('mobile/common/component/ConfirmBox_css',function(){return'.confirm-dialog{background-color:#fff;padding:10px 20px;min-width:300px;}.confirm-dialog > .code-wrapper{margin:20px 0;}.confirm-dialog > .code-wrapper > input{border:1px solid #d9d9d9;width:80px;margin:0 5px;padding:5px}.confirm-dialog > .code-wrapper > .code-btn > .verify-code-button{font-size:14px;width:100px;padding:0 5px;text-align:left}.confirm-dialog > .protocol-wrapper{padding-left:20px;text-indent:-21px;line-height:1.5;}.confirm-dialog > .protocol-wrapper > i{margin-right:5px;font-size:16px;position:relative;top:3px;}.confirm-dialog > .protocol-wrapper > i.icon-check-o{color:#56b02a}.confirm-dialog > .protocol-wrapper .protocol > span{color:#146afb}.confirm-dialog > .error-tip{font-size:12px;margin-top:5px;height:12px}.confirm-dialog > .btn-submit{font-size:16px;color:#fff;background-color:#146afb;border:1px solid #146afb;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;margin-top:10px;padding:12px;width:100%;outline:0;}.confirm-dialog > .btn-submit.disabled{color:#d9d9d9;border-color:#d9d9d9;background-color:#fff}.confirm-dialog > .btn-submit .loader{display:inline-block;}.confirm-dialog > .btn-submit .loader > .ball-pulse > div{width:3px;height:3px}';}),define('cc/util/etpl',function(){function t(t,e){for(var n in e)if(e.hasOwnProperty(n))t[n]=e[n];return t;}function e(){this.raw=[],this.length=0;}function n(){return'___'+O++;}function o(t,e){var n=new Function();n.prototype=e.prototype,t.prototype=new n(),t.prototype.constructor=t;}function i(t){return _[t];}function r(t){return'"'+t.replace(/\x5C/g,'\\\\').replace(/"/g,'\\"').replace(/\x0A/g,'\\n').replace(/\x09/g,'\\t').replace(/\x0D/g,'\\r')+'"';}function s(t){return t.replace(/[\^\[\]\$\(\)\{\}\?\*\.\+]/g,function(t){return'\\'+t;});}function a(t){var e=arguments;return t.replace(/\{([0-9]+)\}/g,function(t,n){return e[n-0+1];});}function p(t){return t=t.replace(/^\s*\*/,''),a('gv({0},["{1}"])',r(t),t.replace(/\[['"]?([^'"]+)['"]?\]/g,function(t,e){return'.'+e;}).split('.').join('","'));}function c(t,e,n,o,i,r){for(var s=n.length,a=t.split(e),p=0,c=[],l=0,u=a.length;u>l;l++){var f=a[l];if(l){var d=1;for(p++;;){var h=f.indexOf(n);if(0>h){c.push(p>1&&d?e:'',f);break;}if(p=o?p-1:0,c.push(p>0&&d?e:'',f.slice(0,h),p>0?n:''),f=f.slice(h+s),d=0,0===p)break;}if(0===p)i(c.join('')),r(f),c=[];}else f&&r(f);}if(p>0&&c.length>0)r(e),r(c.join(''));}function l(t,e,n){var o,i=[],s=e.options,a='',u='',f='',d='';if(n)a='ts(',u=')',f=N,d=P,o=s.defaultFilter;return c(t,s.variableOpen,s.variableClose,1,function(t){if(n&&t.indexOf('|')<0&&o)t+='|'+o;var r=t.indexOf('|'),s=(r>0?t.slice(0,r):t).replace(/^\s+/,'').replace(/\s+$/,''),c=r>0?t.slice(r+1):'',h=0===s.indexOf('*'),g=[h?'':a,p(s),h?'':u];if(c){c=l(c,e);for(var m=c.split('|'),v=0,y=m.length;y>v;v++){var b=m[v];if(/^\s*([a-z0-9_-]+)(\((.*)\))?\s*$/i.test(b)){if(g.unshift('fs["'+RegExp.$1+'"]('),RegExp.$3)g.push(',',RegExp.$3);g.push(')');}}}i.push(f,g.join(''),d);},function(t){i.push(f,n?r(t):t,d);}),i.join('');}function u(t,e){this.value=t,this.engine=e;}function f(t,e){this.value=t,this.engine=e,this.children=[],this.cloneProps=[];}function d(t,e){var n=t.stack,o=e?n.find(function(t){return t instanceof e;}):n.bottom();if(o){for(var i;(i=n.top())!==o;){if(!i.autoClose)throw new Error(i.type+' must be closed manually: '+i.value);i.autoClose(t);}o.close(t);}return o;}function h(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(\s*master\s*=\s*([a-z0-9\/_-]+)\s*\))?\s*/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.master=RegExp.$3,this.name=RegExp.$1,f.call(this,t,e),this.blocks={};}function g(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,f.call(this,t,e),this.cloneProps=['name'];}function m(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,f.call(this,t,e),this.cloneProps=['name','state','blocks'],this.blocks={};}function v(t,e){if(!/^\s*([a-z0-9_]+)\s*=([\s\S]*)$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.expr=RegExp.$2,f.call(this,t,e),this.cloneProps=['name','expr'];}function y(t,e){if(!/^\s*([a-z0-9_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.args=RegExp.$3,f.call(this,t,e),this.cloneProps=['name','args'];}function b(t,e){if(!/^\s*([a-z0-9\/_-]+)\s*(\(([\s\S]*)\))?\s*$/i.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.name=RegExp.$1,this.args=RegExp.$3,f.call(this,t,e),this.cloneProps=['name','args'];}function x(t,e){var n=new RegExp(a('^\\s*({0}[\\s\\S]+{1})\\s+as\\s+{0}([0-9a-z_]+){1}\\s*(,\\s*{0}([0-9a-z_]+){1})?\\s*$',s(e.options.variableOpen),s(e.options.variableClose)),'i');if(!n.test(t))throw new Error('Invalid '+this.type+' syntax: '+t);this.list=RegExp.$1,this.item=RegExp.$2,this.index=RegExp.$4,f.call(this,t,e),this.cloneProps=['list','item','index'];}function w(t,e){f.call(this,t,e);}function C(t,e){w.call(this,t,e);}function R(t,e){f.call(this,t,e);}function E(t,e){e.target=t;var n=e.engine,o=t.name;if(n.targets[o])switch(n.options.namingConflict){case'override':n.targets[o]=t,e.targets.push(o);case'ignore':break;default:throw new Error('Target exists: '+o);}else n.targets[o]=t,e.targets.push(o);}function k(t,e){j[t]=e,e.prototype.type=t;}function B(e){this.options={commandOpen:'<!--',commandClose:'-->',commandSyntax:/^\s*(\/)?([a-z]+)\s*(?::([\s\S]*))?$/,variableOpen:'${',variableClose:'}',defaultFilter:'html'},this.config(e),this.targets={},this.filters=t({},A);}function $(t,n){function o(){var t;if(h.length>0&&(t=h.join(''))){var e=new u(t,n);if(e.beforeAdd(l),p.top().addChild(e),h=[],n.options.strip&&l.current instanceof f)e.value=t.replace(/^[\x20\t\r]*\n/,'');l.current=e;}}var i,r=n.options.commandOpen,s=n.options.commandClose,a=n.options.commandSyntax,p=new e(),l={engine:n,targets:[],stack:p,target:null},h=[];return c(t,r,s,0,function(t){var e=a.exec(t);if(e&&(i=j[e[2].toLowerCase()])&&'function'==typeof i){o();var p=l.current;if(n.options.strip&&p instanceof u)p.value=p.value.replace(/\r?\n[\x20\t]*$/,'\n');if(e[1])p=d(l,i);else{if(p=new i(e[3],n),'function'==typeof p.beforeOpen)p.beforeOpen(l);p.open(l);}l.current=p;}else if(!/^\s*\/\//.test(t))h.push(r,t,s);i=null;},function(t){h.push(t);}),o(),d(l),l.targets;}e.prototype={push:function(t){this.raw[this.length++]=t;},pop:function(){if(this.length>0){var t=this.raw[--this.length];return this.raw.length=this.length,t;}},top:function(){return this.raw[this.length-1];},bottom:function(){return this.raw[0];},find:function(t){for(var e=this.length;e--;){var n=this.raw[e];if(t(n))return n;}}};var O=178245,_={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'},A={html:function(t){return t.replace(/[&<>"']/g,i);},url:encodeURIComponent,raw:function(t){return t;}},D='var r="";',N='r+=',P=';',z='return r;';if('undefined'!=typeof navigator&&/msie\s*([0-9]+)/i.test(navigator.userAgent)&&RegExp.$1-0<8)D='var r=[],ri=0;',N='r[ri++]=',z='return r.join("");';u.prototype={getRendererBody:function(){var t=this.value,e=this.engine.options;if(!t||e.strip&&/^\s*$/.test(t))return'';else return l(t,this.engine,1);},clone:function(){return this;}},f.prototype={addChild:function(t){this.children.push(t);},open:function(t){var e=t.stack.top();e&&e.addChild(this),t.stack.push(this);},close:function(t){if(t.stack.top()===this)t.stack.pop();},getRendererBody:function(){for(var t=[],e=this.children,n=0;n<e.length;n++)t.push(e[n].getRendererBody());return t.join('');},clone:function(){for(var t=this.constructor,e=new t(this.value,this.engine),n=0,o=this.children.length;o>n;n++)e.addChild(this.children[n].clone());for(var n=0,o=this.cloneProps.length;o>n;n++){var i=this.cloneProps[n];e[i]=this[i];}return e;}};var S='data=data||{};var v={},fs=engine.filters,hg=typeof data.get=="function",gv=function(n,ps){var p=ps[0],d=v[p];if(d==null){if(hg){return data.get(n);}d=data[p];}for(var i=1,l=ps.length;i<l;i++)if(d!=null)d = d[ps[i]];return d;},ts=function(s){if(typeof s==="string"){return s;}if(s==null){s="";}return ""+s;};';o(h,f),o(g,f),o(m,f),o(v,f),o(y,f),o(b,f),o(x,f),o(w,f),o(C,w),o(R,w);var I={READING:1,READED:2,APPLIED:3,READY:4};m.prototype.applyMaster=h.prototype.applyMaster=function(t){function e(t){var o=t.children;if(o instanceof Array)for(var i=0,r=o.length;r>i;i++){var s=o[i];if(s instanceof g&&n[s.name])s=o[i]=n[s.name];e(s);}}if(this.state>=I.APPLIED)return 1;var n=this.blocks,o=this.engine.targets[t];if(o&&o.applyMaster(o.master))return this.children=o.clone().children,e(this),this.state=I.APPLIED,1;else return void 0;},h.prototype.isReady=function(){function t(o){for(var i=0,r=o.children.length;r>i;i++){var s=o.children[i];if(s instanceof m){var a=e.targets[s.name];n=n&&a&&a.isReady(e);}else if(s instanceof f)t(s);}}if(this.state>=I.READY)return 1;var e=this.engine,n=1;if(this.applyMaster(this.master))return t(this),n&&(this.state=I.READY),n;else return void 0;},h.prototype.getRenderer=function(){if(this.renderer)return this.renderer;if(this.isReady()){var t=new Function('data','engine',[S,D,this.getRendererBody(),z].join('\n')),e=this.engine;return this.renderer=function(n){return t(n,e);},this.renderer;}return null;},h.prototype.open=function(t){d(t),f.prototype.open.call(this,t),this.state=I.READING,E(this,t);},v.prototype.open=b.prototype.open=function(t){t.stack.top().addChild(this);},g.prototype.open=function(t){f.prototype.open.call(this,t),t.stack.find(function(t){return t.blocks;}).blocks[this.name]=this;},C.prototype.open=function(t){var e=new R();e.open(t);var n=d(t,w);n.addChild(this),t.stack.push(this);},R.prototype.open=function(t){var e=d(t,w);e.addChild(this),t.stack.push(this);},m.prototype.open=function(t){this.parent=t.stack.top(),this.target=t.target,f.prototype.open.call(this,t),this.state=I.READING;},b.prototype.close=v.prototype.close=function(){},m.prototype.close=function(t){f.prototype.close.call(this,t),this.state=I.READED;},h.prototype.close=function(t){f.prototype.close.call(this,t),this.state=this.master?I.READED:I.APPLIED,t.target=null;},m.prototype.autoClose=function(t){var e=this.parent.children;e.push.apply(e,this.children),this.children.length=0;for(var n in this.blocks)this.target.blocks[n]=this.blocks[n];this.blocks={},this.close(t);},b.prototype.beforeOpen=m.prototype.beforeOpen=v.prototype.beforeOpen=x.prototype.beforeOpen=y.prototype.beforeOpen=g.prototype.beforeOpen=w.prototype.beforeOpen=u.prototype.beforeAdd=function(t){if(!t.stack.bottom()){var e=new h(n(),t.engine);e.open(t);}},m.prototype.getRendererBody=function(){return this.applyMaster(this.name),f.prototype.getRendererBody.call(this);},b.prototype.getRendererBody=function(){return a('{0}engine.render({2},{{3}}){1}',N,P,r(this.name),l(this.args,this.engine).replace(/(^|,)\s*([a-z0-9_]+)\s*=/gi,function(t,e,n){return(e||'')+r(n)+':';}));},v.prototype.getRendererBody=function(){if(this.expr)return a('v[{0}]={1};',r(this.name),l(this.expr,this.engine));else return'';},w.prototype.getRendererBody=function(){return a('if({0}){{1}}',l(this.value,this.engine),f.prototype.getRendererBody.call(this));},R.prototype.getRendererBody=function(){return a('}else{{0}',f.prototype.getRendererBody.call(this));},x.prototype.getRendererBody=function(){return a('var {0}={1};if({0} instanceof Array)for (var {4}=0,{5}={0}.length;{4}<{5};{4}++){v[{2}]={4};v[{3}]={0}[{4}];{6}}else if(typeof {0}==="object")for(var {4} in {0}){v[{2}]={4};v[{3}]={0}[{4}];{6}}',n(),l(this.list,this.engine),r(this.index||n()),r(this.item),n(),n(),f.prototype.getRendererBody.call(this));},y.prototype.getRendererBody=function(){var t=this.args;return a('{2}fs[{5}]((function(){{0}{4}{1}})(){6}){3}',D,z,N,P,f.prototype.getRendererBody.call(this),r(this.name),t?','+l(t,this.engine):'');};var j={};k('target',h),k('block',g),k('import',m),k('use',b),k('var',v),k('for',x),k('if',w),k('elif',C),k('else',R),k('filter',y),B.prototype.config=function(e){t(this.options,e);},B.prototype.compile=B.prototype.parse=function(t){if(t){var e=$(t,this);if(e.length)return this.targets[e[0]].getRenderer();}return new Function('return ""');},B.prototype.getRenderer=function(t){var e=this.targets[t];if(e)return e.getRenderer();else return void 0;},B.prototype.render=function(t,e){var n=this.getRenderer(t);if(n)return n(e);else return'';},B.prototype.addFilter=function(t,e){if('function'==typeof e)this.filters[t]=e;};var T=new B();return T.Engine=B,T;}),define('cc/util/Timer',['require','exports','module'],function(){'use strict';function t(t){$.extend(this,t);}var e=t.prototype;return e.start=function(){var t=this;t.stop();var e=t.timeout,n=t.interval,o=function(){if(t.count++,t.task()!==!1)t.timer=setTimeout(o,n);else t.stop();};if(null==e)e=n;t.timer=setTimeout(o,e);},e.stop=function(){var t=this;if(t.timer)clearTimeout(t.timer),t.timer=null,t.count=0;},e.dispose=function(){var t=this;t.stop(),t.task=t.timeout=t.interval=null;},t;}),define('mobile/common/component/CodeButton_html',function(){return'<button class="button{{#if options.className}} {{options.className}}{{/if}}" on-click="click"{{#if options.disabled}} disabled{{/if}}>{{options.text}}</button>';}),define('mobile/common/component/CodeButton_628faf706a',['require','exports','module','cc/util/etpl','cc/util/Timer','./CodeButton_html'],function(require){'use strict';var t=require('cc/util/etpl'),e=require('cc/util/Timer');return Ractive.extend({template:require('./CodeButton_html'),data:function(){return{options:{text:'',className:'code-button',disabled:!1,countdown:!1,countdownText:'${second}秒后可再次发送',countdownSecond:60}};},oninit:function(){var n,o=this,i=o.get('options.text'),r=o.get('options.countdownText'),s=t.compile(r),a=o.timer=new e({task:function(){if(1===n)return void o.set('options.countdown',!1);else return void o.set('options.text',s({second:--n}));},interval:1000});o.observe('options.countdown',function(t){if(t)n=o.get('options.countdownSecond'),o.set({'options.disabled':!0,'options.text':s({second:n})}),a.start();else o.set({'options.disabled':!1,'options.text':i}),a.stop();});},onteardown:function(){this.timer.dispose();}});}),define('mobile/common/component/ConfirmBox_d0532ac4b2',['require','exports','module','./ConfirmBox_html','./ConfirmBox_css','../../common/component/CodeButton_628faf706a'],function(require){'use strict';return Ractive.extend({template:require('./ConfirmBox_html'),data:function(){return{style:require('./ConfirmBox_css'),smsCode:'',colorClassName:'info',agree:'',errorContent:'',submitDisabled:!0,submitting:!1,verifyCodeButtonOptions:{text:'获取验证码',className:'verify-code-button',disabled:!1,countdown:!1,countdownText:'${second}s',countdownSecond:60},options:{protocolName:'',submitButtonName:'',nextPageUrl:'',sendSmsCode:$.noop,submit:$.noop}};},components:{CodeButton:require('../../common/component/CodeButton_628faf706a')},oncomplete:function(){var t=this;t.observe('verifyCodeButtonOptions.countdown',function(e){if(e)t.set('colorClassName','error');else t.set('colorClassName','info');}),t.observe('smsCode',function(){t.judgeSubmitAvailable();}),t.observe('agree',function(){t.judgeSubmitAvailable();});},judgeSubmitAvailable:function(){var t=this,e=t.get('smsCode'),n=t.get('agree'),o=t.get('options.protocolName');if(!e||o&&!n)t.set('submitDisabled',!0);else t.set('submitDisabled',!1);},sendSmsCode:function(){var t=this;t.set({'verifyCodeButtonOptions.text':'发送中...','verifyCodeButtonOptions.disabled':!0});var e=t.get('options.sendSmsCode');if($.isFunction(e))e().then(function(){t.set({'verifyCodeButtonOptions.countdown':!0,colorClassName:'error'});},function(){t.set({'verifyCodeButtonOptions.text':'获取验证码','verifyCodeButtonOptions.disabled':!1,colorClassName:'info'});});},submit:function(){var t=this;if(!t.get('smsCode'))return void t.set('errorContent','请输入手机验证码');if(t.get('options.protocolName')&&!t.get('agree'))return void t.set('errorContent','请仔细阅读条款\uFF0C并勾选同意按钮');var e=t.get('options.submit');if($.isFunction(e))t.set('submitting',!0),e(t.get('smsCode')).then(function(){var e=t.get('options.nextPageUrl');if(e)location.href=e;t.set('submitting',!1);},function(){t.set('submitting',!1);});}});});