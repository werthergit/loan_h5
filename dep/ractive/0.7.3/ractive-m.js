!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Ractive=t()}(this,function(){"use strict";function e(e){var t;if(e&&"boolean"!=typeof e){if("undefined"==typeof window||!document||!e)return null;if(e.nodeType)return e;if("string"==typeof e){if(t=document.getElementById(e),!t&&document.querySelector)t=document.querySelector(e);if(t&&t.nodeType)return t}if(e[0]&&e[0].nodeType)return e[0];else return null}}function t(e){if(e&&"unknown"!=typeof e.parentNode&&e.parentNode)e.parentNode.removeChild(e);return e}function n(e){return null==e||!e.toString?"":e}function i(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];for(var r,s;s=n.shift();)for(r in s)if(Oa.call(s,r))e[r]=s[r];return e}function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];return n.forEach(function(t){for(var n in t)if(t.hasOwnProperty(n)&&!(n in e))e[n]=t[n]}),e}function s(e){return"[object Array]"===Pa.call(e)}function o(e){return Ta.test(Pa.call(e))}function a(e,t){if(null===e&&null===t)return!0;if("object"==typeof e||"object"==typeof t)return!1;else return e===t}function u(e){return!isNaN(parseFloat(e))&&isFinite(e)}function f(e){return e&&"[object Object]"===Pa.call(e)}function h(e,t){return e.replace(/%s/g,function(){return t.shift()})}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];throw e=h(e,n),new Error(e)}function c(){if(Qb.DEBUG)Aa.apply(null,arguments)}function d(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];e=h(e,n),Sa(e,n)}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];if(e=h(e,n),!Ra[e])Ra[e]=!0,Sa(e,n)}function m(){if(Qb.DEBUG)d.apply(null,arguments)}function v(){if(Qb.DEBUG)p.apply(null,arguments)}function g(e,t,n){var i=y(e,t,n);return i?i[e][n]:null}function y(e,t,n){for(;t;){if(n in t[e])return t;if(t.isolated)return null;t=t.parent}}function b(e){return function(){return e}}function w(e){var t,n,i,r,s,o;if(t=e.split("."),!(n=Wa[t.length]))n=x(t.length);for(s=[],i=function(e,n){return e?"*":t[n]},r=n.length;r--;)if(o=n[r].map(i).join("."),!s.hasOwnProperty(o))s.push(o),s[o]=!0;return s}function x(e){var t,n,i,r,s,o,a,u,f="";if(!Wa[e]){for(i=[];f.length<e;)f+=1;for(t=parseInt(f,2),r=function(e){return"1"===e},s=0;t>=s;s+=1){for(n=s.toString(2);n.length<e;)n="0"+n;for(u=[],a=n.length,o=0;a>o;o++)u.push(r(n[o]));i[s]=u}Wa[e]=i}return Wa[e]}function k(e,t,n,i){var r=e[t];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return e[t]=r?r.replace(n,i):i,!0}function E(e){var t=e.slice(2);if("i"===e[1])return u(t)?+t:t;else return t}function _(e){if(null==e)return e;if(!qa.hasOwnProperty(e))qa[e]=new $a(e);return qa[e]}function A(e,t){function n(t,n){var i,r,o;if(n.isRoot)o=[].concat(Object.keys(e.viewmodel.data),Object.keys(e.viewmodel.mappings),Object.keys(e.viewmodel.computations));else i=e.viewmodel.wrapped[n.str],r=i?i.get():e.viewmodel.get(n),o=r?Object.keys(r):null;if(o)o.forEach(function(e){if("_ractive"!==e||!s(r))t.push(n.join(e))});return t}var i,r,o;for(i=t.str.split("."),o=[Za];r=i.shift();)if("*"===r)o=o.reduce(n,[]);else if(o[0]===Za)o[0]=_(r);else o=o.map(S(r));return o}function S(e){return function(t){return t.join(e)}}function C(e){return e?e.replace(za,".$1"):""}function O(e,t,n){if("string"!=typeof t||!u(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(t))return r={},A(e,_(C(t))).forEach(function(t){var i=e.viewmodel.get(t);if(!u(i))throw new Error(Ka);r[t.str]=i+n}),e.set(r);if(i=e.get(t),!u(i))throw new Error(Ka);return e.set(t,+i+n)}function P(e,t){return Ha(this,e,void 0===t?1:+t)}function T(e){this.event=e,this.method="on"+e,this.deprecate=eu[e]}function F(e,t){var n=e.indexOf(t);if(-1===n)e.push(t)}function R(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]==t)return!0;return!1}function j(e,t){var n;if(!s(e)||!s(t))return!1;if(e.length!==t.length)return!1;for(n=e.length;n--;)if(e[n]!==t[n])return!1;return!0}function N(e){if("string"==typeof e)return[e];if(void 0===e)return[];else return e}function D(e){return e[e.length-1]}function I(e,t){var n=e.indexOf(t);if(-1!==n)e.splice(n,1)}function L(e){for(var t=[],n=e.length;n--;)t[n]=e[n];return t}function V(e){setTimeout(e,0)}function U(e,t){return function(){for(var n;n=e.shift();)n(t)}}function M(e,t,n,i){var r;if(t===e)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(t instanceof tu)t.then(n,i);else if(t&&("object"==typeof t||"function"==typeof t)){try{r=t.then}catch(s){return void i(s)}if("function"==typeof r){var o,a,u;a=function(t){if(!o)o=!0,M(e,t,n,i)},u=function(e){if(!o)o=!0,i(e)};try{r.call(t,a,u)}catch(s){if(!o)return i(s),void(o=!0)}}else n(t)}else n(t)}function W(e,t,n){var i;if(t=C(t),"~/"===t.substr(0,2))i=_(t.substring(2)),q(e,i.firstKey,n);else if("."===t[0]){if(i=z(au(n),t))q(e,i.firstKey,n)}else i=B(e,_(t),n);return i}function z(e,t){var n;if(void 0!=e&&"string"!=typeof e)e=e.str;if("."===t)return _(e);if(n=e?e.split("."):[],"../"===t.substr(0,3)){for(;"../"===t.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),t=t.substring(3)}return n.push(t),_(n.join("."))}if(!e)return _(t.replace(/^\.\/?/,""));else return _(e+t.replace(/^\.\//,"."))}function B(e,t,n,i){var r,s,o,a,u;if(t.isRoot)return t;for(s=t.firstKey;n;)if(r=n.context,n=n.parent,r){if(a=!0,o=e.viewmodel.get(r),o&&("object"==typeof o||"function"==typeof o)&&s in o)return r.join(t.str)}else;if($(e.viewmodel,s))return t;if(e.parent&&!e.isolated)if(a=!0,n=e.component.parentFragment,s=_(s),u=B(e.parent,s,n,!0))return e.viewmodel.map(s,{origin:e.parent.viewmodel,keypath:u}),t;if(!i&&!a)return e.viewmodel.set(t,void 0),t;else return void 0}function q(e,t){var n;if(e.parent&&!e.isolated&&!$(e.viewmodel,t))if(t=_(t),n=B(e.parent,t,e.component.parentFragment,!0))e.viewmodel.map(t,{origin:e.parent.viewmodel,keypath:n})}function $(e,t){return""===t||t in e.data||t in e.computations||t in e.mappings}function Q(e){e.teardown()}function Z(e){e.unbind()}function H(e){e.unrender()}function K(e){e.cancel()}function G(e){e.detach()}function Y(e){e.detachNodes()}function J(e){if(e.ready&&!e.outros.length&&!e.outroChildren){if(!e.outrosComplete){if(e.parent)e.parent.decrementOutros(e);else e.detachNodes();e.outrosComplete=!0}if(!e.intros.length&&!e.totalChildren){if("function"==typeof e.callback)e.callback();if(e.parent)e.parent.decrementTotal()}}}function X(){for(var e,t,n;hu.ractives.length;)if(t=hu.ractives.pop(),n=t.viewmodel.applyChanges())pu.fire(t,n);for(ee(),e=0;e<hu.views.length;e+=1)hu.views[e].update();for(hu.views.length=0,e=0;e<hu.tasks.length;e+=1)hu.tasks[e]();if(hu.tasks.length=0,hu.ractives.length)return X();else return void 0}function ee(){var e,t,n,i;for(e=du.length;e--;)if(t=du[e],!t.keypath){if(n=uu(t.root,t.ref,t.parentFragment))(i||(i=[])).push({item:t,keypath:n}),du.splice(e,1)}else du.splice(e,1);if(i)i.forEach(te)}function te(e){e.item.resolve(e.keypath)}function ne(e,t,n){var i,r,s,o,a,u,f,h,l,c,d,p,m,v;if(i=new ou(function(e){return r=e}),"object"==typeof e){if(n=t||{},u=n.easing,f=n.duration,a=[],h=n.step,l=n.complete,h||l)d={},n.step=null,n.complete=null,c=function(e){return function(t,n){d[e]=n}};for(s in e)if(e.hasOwnProperty(s)){if(h||l)if(p=c(s),n={easing:u,duration:f},h)n.step=p;n.complete=l?p:Fa,a.push(ie(this,s,e[s],n))}if(v={easing:u,duration:f},h)v.step=function(e){return h(e,d)};if(l)i.then(function(e){return l(e,d)});return v.complete=r,m=ie(this,null,null,v),a.push(m),i.stop=function(){for(var e;e=a.pop();)e.stop();if(m)m.stop()},i}if(n=n||{},n.complete)i.then(n.complete);return n.complete=r,o=ie(this,e,t,n),i.stop=function(){return o.stop()},i}function ie(e,t,n,i){var r,s,o,u;if(t)t=_(C(t));if(null!==t)u=e.viewmodel.get(t);if(yu.abort(t,e),a(u,n)){if(i.complete)i.complete(i.to);return ku}if(i.easing){if("function"==typeof i.easing)r=i.easing;else r=e.easing[i.easing];if("function"!=typeof r)r=null}return s=void 0===i.duration?400:i.duration,o=new wu({keypath:t,from:u,to:n,root:e,duration:s,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),yu.add(o),e._animations.push(o),o}function re(){if(this.detached)return this.detached;if(this.el)I(this.el.__ractive_instances__,this);return this.detached=this.fragment.detach(),_u.fire(this),this.detached}function se(e){if(!this.el)return null;else return this.fragment.find(e)}function oe(e,t){var n;if(this._isComponentQuery)n=!this.selector||e.name===this.selector;else n=e.node?ca(e.node,this.selector):null;if(n){if(this.push(e.node||e.instance),!t)this._makeDirty();return!0}}function ae(e){var t;if(t=e.parentFragment)return t.owner;if(e.component&&(t=e.component.parentFragment))return t.owner;else return void 0}function ue(e){var t,n;for(t=[e],n=ae(e);n;)t.push(n),n=ae(n);return t}function fe(e,t,n,i){var r=[];if(ka(r,{selector:{value:t},live:{value:n},_isComponentQuery:{value:i},_test:{value:Su}}),!n)return r;else return ka(r,{cancel:{value:Cu},_root:{value:e},_sort:{value:Tu},_makeDirty:{value:Fu},_remove:{value:Ru},_dirty:{value:!1,writable:!0}}),r}function he(e,t){var n,i;if(!this.el)return[];if(t=t||{},n=this._liveQueries,i=n[e])return t&&t.live?i:i.slice();if(i=ju(this,e,!!t.live,!1),i.live)n.push(e),n["_"+e]=i;return this.fragment.findAll(e,i),i}function le(e,t){var n,i;if(t=t||{},n=this._liveComponentQueries,i=n[e])return t&&t.live?i:i.slice();if(i=ju(this,e,!!t.live,!0),i.live)n.push(e),n["_"+e]=i;return this.fragment.findAllComponents(e,i),i}function ce(e){return this.fragment.findComponent(e)}function de(e){if(this.container)if(this.container.component&&this.container.component.name===e)return this.container;else return this.container.findContainer(e);return null}function pe(e){if(this.parent)if(this.parent.component&&this.parent.component.name===e)return this.parent;else return this.parent.findParent(e);return null}function me(e,t){var n=void 0===arguments[2]?{}:arguments[2];if(t){if(!n.event)n.event={name:t,_noArg:!0};else n.event.name=t;var i=_(t).wildcardMatches();ve(e,i,n.event,n.args,!0)}}function ve(e,t,n,i){var r,s,o=void 0===arguments[4]?!1:arguments[4],a=!0;for(Mu.enqueue(e,n),s=t.length;s>=0;s--)if(r=e._subs[t[s]])a=ge(e,r,n,i)&&a;if(Mu.dequeue(e),e.parent&&a){if(o&&e.component){var u=e.component.name+"."+t[t.length-1];if(t=_(u).wildcardMatches(),n)n.component=e}ve(e.parent,t,n,i)}}function ge(e,t,n,i){var r=null,s=!1;if(n&&!n._noArg)i=[n].concat(i);t=t.slice();for(var o=0,a=t.length;a>o;o+=1)if(t[o].apply(e,i)===!1)s=!0;if(n&&!n._noArg&&s&&(r=n.original))r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation();return!s}function ye(e){var t={args:Array.prototype.slice.call(arguments,1)};Wu(this,e,t)}function be(e){var t;if(e=_(C(e)),t=this.viewmodel.get(e,qu),void 0===t&&this.parent&&!this.isolated)if(uu(this,e.str,this.component.parentFragment))t=this.viewmodel.get(e);return t}function we(t,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(t=e(t),n=e(n)||null,!t)throw new Error("You must specify a valid target to insert into");t.insertBefore(this.detach(),n),this.el=t,(t.__ractive_instances__||(t.__ractive_instances__=[])).push(this),this.detached=null,xe(this)}function xe(e){Qu.fire(e),e.findAllComponents("*").forEach(function(e){xe(e.instance)})}function ke(e,t,n){var i,r;if(e=_(C(e)),i=this.viewmodel.get(e),!s(i)||!s(t))return this.set(e,t,n&&n.complete);else return r=mu.start(this,!0),this.viewmodel.merge(e,i,t,n),mu.end(),r}function Ee(e,t){var n,i;return n=A(e,t),i={},n.forEach(function(t){i[t.str]=e.get(t.str)}),i}function _e(e,t,n,i){var r,s,o;if(t=_(C(t)),i=i||uf,t.isPattern)r=new of(e,t,n,i),e.viewmodel.patternObservers.push(r),s=!0;else r=new Gu(e,t,n,i);r.init(i.init),e.viewmodel.register(t,r,s?"patternObservers":"observers"),r.ready=!0;var a={cancel:function(){var n;if(!o){if(s)n=e.viewmodel.patternObservers.indexOf(r),e.viewmodel.patternObservers.splice(n,1),e.viewmodel.unregister(t,r,"patternObservers");else e.viewmodel.unregister(t,r,"observers");o=!0}}};return e._observers.push(a),a}function Ae(e,t,n){var i,r,s,o;if(f(e)){n=t,r=e,i=[];for(e in r)if(r.hasOwnProperty(e))t=r[e],i.push(this.observe(e,t,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof e)return n=t,t=e,e="",af(this,e,t,n);if(s=e.split(" "),1===s.length)return af(this,e,t,n);for(i=[],o=s.length;o--;)if(e=s[o])i.push(af(this,e,t,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function Se(e,t,n){var i=this.observe(e,function(){t.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Ce(e,t){var n,i=this;if(!e)for(e in this._subs)delete this._subs[e];else n=e.split(" ").map(lf).filter(cf),n.forEach(function(e){var n,r;if(n=i._subs[e])if(t){if(r=n.indexOf(t),-1!==r)n.splice(r,1)}else i._subs[e]=[]});return this}function Oe(e,t){var n,i,r,s=this;if("object"==typeof e){n=[];for(i in e)if(e.hasOwnProperty(i))n.push(this.on(i,e[i]));return{cancel:function(){for(var e;e=n.pop();)e.cancel()}}}return r=e.split(" ").map(lf).filter(cf),r.forEach(function(e){(s._subs[e]||(s._subs[e]=[])).push(t)}),{cancel:function(){return s.off(e,t)}}}function Pe(e,t){var n=this.on(e,function(){t.apply(this,arguments),n.cancel()});return n}function Te(e,t,n){var i,r,s,o,a,u,f=[];if(i=Fe(e,t,n),!i)return null;for(r=e.length,a=i.length-2-i[1],s=Math.min(r,i[0]),o=s+i[1],u=0;s>u;u+=1)f.push(u);for(;o>u;u+=1)f.push(-1);for(;r>u;u+=1)f.push(u+a);if(0!==a)f.touchedFrom=i[0];else f.touchedFrom=e.length;return f}function Fe(e,t,n){switch(t){case"splice":if(void 0!==n[0]&&n[0]<0)n[0]=e.length+Math.max(n[0],-e.length);for(;n.length<2;)n.push(0);return n[1]=Math.min(n[1],e.length-n[0]),n;case"sort":case"reverse":return null;case"pop":if(e.length)return[e.length-1,1];else return[0,0];case"push":return[e.length,0].concat(n);case"shift":return[0,e.length?1:0];case"unshift":return[0,0].concat(n)}}function Re(t,n){var i,r,s,o=this;if(s=this.transitionsEnabled,this.noIntro)this.transitionsEnabled=!1;if(i=mu.start(this,!0),mu.scheduleTask(function(){return Of.fire(o)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(t=e(t)||this.el,n=e(n)||this.anchor,this.el=t,this.anchor=n,!this.append&&t){var a=t.__ractive_instances__;if(a&&a.length)je(a);t.innerHTML=""}if(this.cssId)Sf.apply();if(t){if(!(r=t.__ractive_instances__))t.__ractive_instances__=[this];else r.push(this);if(n)t.insertBefore(this.fragment.render(),n);else t.appendChild(this.fragment.render())}return mu.end(),this.transitionsEnabled=s,i.then(function(){return Pf.fire(o)})}function je(e){e.splice(0,e.length).forEach(Q)}function Ne(e,t){for(var n=e.slice(),i=t.length;i--;)if(!~n.indexOf(t[i]))n.push(t[i]);return n}function De(e,t){var n,i,r;if(i='[data-ractive-css~="{'+t+'}"]',r=function(e){var t,n,r,s,o,a,u,f=[];for(t=[];n=Df.exec(e);)t.push({str:n[0],base:n[1],modifiers:n[2]});for(s=t.map(Le),u=t.length;u--;)a=s.slice(),r=t[u],a[u]=r.base+i+r.modifiers||"",o=s.slice(),o[u]=i+" "+o[u],f.push(a.join(" "),o.join(" "));return f.join(", ")},Lf.test(e))n=e.replace(Lf,i);else n=e.replace(Nf,"").replace(jf,function(e,t){var n,i;if(If.test(t))return e;else return n=t.split(",").map(Ie),i=n.map(r).join(", ")+" ",e.replace(t,i)});return n}function Ie(e){if(e.trim)return e.trim();else return e.replace(/^\s+/,"").replace(/\s+$/,"")}function Le(e){return e.str}function Ve(e){if(e&&e.constructor!==Object)if("function"==typeof e);else if("object"!=typeof e)l("data option must be an object or a function, `"+e+"` is not valid");else m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")}function Ue(e,t){Ve(t);var n="function"==typeof e,i="function"==typeof t;if(!t&&!n)t={};if(!n&&!i)return We(t,e);else return function(){var r=i?Me(t,this):t,s=n?Me(e,this):e;return We(r,s)}}function Me(e,t){var n=e.call(t);if(n){if("object"!=typeof n)l("Data function must return an object");if(n.constructor!==Object)v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged");return n}}function We(e,t){if(e&&t){for(var n in t)if(!(n in e))e[n]=t[n];return e}return e||t}function ze(e){var t,n,i;if(!e.matchString("="))return null;if(t=e.pos,e.allowWhitespace(),n=e.matchPattern(Nh),!n)return e.pos=t,null;if(!e.matchPattern(Dh))return null;if(i=e.matchPattern(Nh),!i)return e.pos=t,null;if(e.allowWhitespace(),!e.matchString("="))return e.pos=t,null;else return[n,i]}function Be(e){var t;if(t=e.matchPattern(Lh))return{t:mh,v:t};else return null}function qe(e){var t,n;if(e.interpolate[e.inside]===!1)return null;for(n=0;n<e.tags.length;n+=1)if(t=$e(e,e.tags[n]))return t}function $e(e,t){var n,i,r,s;if(n=e.pos,e.matchString("\\"+t.open)){if(0===n||"\\"!==e.str[n-1])return t.open}else if(!e.matchString(t.open))return null;if(i=jh(e))if(!e.matchString(t.close))return null;else return t.open=i[0],t.close=i[1],e.sortMustacheTags(),Uh;if(e.allowWhitespace(),e.matchString("/")){e.pos-=1;var o=e.pos;if(!Ih(e))e.pos=o-t.close.length,e.error("Attempted to close a section that wasn't open");else e.pos=o}for(s=0;s<t.readers.length;s+=1)if(r=t.readers[s],i=r(e,t)){if(t.isStatic)i.s=!0;if(e.includeLinePositions)i.p=e.getLinePos(n);return i}return e.pos=n,null}function Qe(e){var t;if(t=e.matchPattern(Bh))return{t:hh,v:t};else return null}function Ze(e){var t=e.remaining();if("true"===t.substr(0,4))return e.pos+=4,{t:ph,v:"true"};if("false"===t.substr(0,5))return e.pos+=5,{t:ph,v:"false"};else return null}function He(e){var t;if(t=Gh(e))return Xh.test(t.v)?t.v:'"'+t.v.replace(/"/g,'\\"')+'"';if(t=zh(e))return t.v;if(t=e.matchPattern(Yh))return t;else return void 0}function Ke(e){var t,n,i;if(t=e.pos,e.allowWhitespace(),n=Jh(e),null===n)return e.pos=t,null;if(e.allowWhitespace(),!e.matchString(":"))return e.pos=t,null;if(e.allowWhitespace(),i=Pl(e),null===i)return e.pos=t,null;else return{t:gh,k:n,v:i}}function Ge(e){var t,n,i,r;if(t=e.pos,i=el(e),null===i)return null;if(n=[i],e.matchString(","))if(r=Ge(e),!r)return e.pos=t,null;else return n.concat(r);return n}function Ye(e){function t(e){i.push(e)}var n,i,r,s;if(n=e.pos,e.allowWhitespace(),r=Pl(e),null===r)return null;if(i=[r],e.allowWhitespace(),e.matchString(",")){if(s=Ye(e),null===s)e.error(Mh);s.forEach(t)}return i}function Je(e){return zh(e)||qh(e)||Gh(e)||nl(e)||rl(e)||Ih(e)}function Xe(e){var t,n,i,r,s,o;if(t=e.pos,i=e.matchPattern(/^@(?:keypath|index|key)/),!i)if(n=e.matchPattern(al)||"",i=!n&&e.relaxedNames&&e.matchPattern(ll)||e.matchPattern(hl),!i&&"."===n)n="",i=".";if(!i)return null;if(!n&&!e.relaxedNames&&Qh.test(i))return e.pos=t,null;if(!n&&$h.test(i))return r=$h.exec(i)[0],e.pos=t+r.length,{t:vh,v:r};if(s=(n||"")+C(i),e.matchString("("))if(o=s.lastIndexOf("."),-1!==o)s=s.substr(0,o),e.pos=t+s.length;else e.pos-=1;return{t:yh,n:s.replace(/^this\./,"./").replace(/^this$/,".")}}function et(e){var t,n;if(t=e.pos,!e.matchString("("))return null;if(e.allowWhitespace(),n=Pl(e),!n)e.error(Mh);if(e.allowWhitespace(),!e.matchString(")"))e.error(Wh);return{t:kh,x:n}}function tt(e){var t,n,i;if(t=e.pos,e.allowWhitespace(),e.matchString(".")){if(e.allowWhitespace(),n=e.matchPattern(Yh))return{t:bh,n:n};e.error("Expected a property name")}if(e.matchString("[")){if(e.allowWhitespace(),i=Pl(e),!i)e.error(Mh);if(e.allowWhitespace(),!e.matchString("]"))e.error("Expected ']'");return{t:bh,x:i}}return null}function nt(e){var t,n,i,r;if(n=Cl(e),!n)return null;if(t=e.pos,e.allowWhitespace(),!e.matchString("?"))return e.pos=t,n;if(e.allowWhitespace(),i=Pl(e),!i)e.error(Mh);if(e.allowWhitespace(),!e.matchString(":"))e.error('Expected ":"');if(e.allowWhitespace(),r=Pl(e),!r)e.error(Mh);return{t:Eh,o:[n,i,r]}}function it(e){return Ol(e)}function rt(e){function t(e){switch(e.t){case ph:case vh:case hh:case mh:return e.v;case lh:return JSON.stringify(String(e.v));case ch:return"["+(e.m?e.m.map(t).join(","):"")+"]";case dh:return"{"+(e.m?e.m.map(t).join(","):"")+"}";case gh:return e.k+":"+t(e.v);case xh:return("typeof"===e.s?"typeof ":e.s)+t(e.o);case _h:return t(e.o[0])+("in"===e.s.substr(0,2)?" "+e.s+" ":e.s)+t(e.o[1]);case Ah:return t(e.x)+"("+(e.o?e.o.map(t).join(","):"")+")";case kh:return"("+t(e.x)+")";case wh:return t(e.x)+t(e.r);case bh:return e.n?"."+e.n:"["+t(e.x)+"]";case Eh:return t(e.o[0])+"?"+t(e.o[1])+":"+t(e.o[2]);case yh:return"_"+n.indexOf(e.n);default:throw new Error("Expected legal JavaScript")}}var n;return st(e,n=[]),{r:n,s:t(e)}}function st(e,t){var n,i;if(e.t===yh)if(-1===t.indexOf(e.n))t.unshift(e.n);if(i=e.o||e.m)if(f(i))st(i,t);else for(n=i.length;n--;)st(i[n],t);if(e.x)st(e.x,t);if(e.r)st(e.r,t);if(e.v)st(e.v,t)}function ot(e,t){var n;if(e){for(;e.t===kh&&e.x;)e=e.x;if(e.t===yh)t.r=e.n;else if(e.t===hh&&Rl.test(e.v))t.r=e.v;else if(n=at(e))t.rx=n;else t.x=Tl(e);return t}}function at(e){for(var t,n=[];e.t===wh&&e.r.t===bh;){if(t=e.r,t.x)if(t.x.t===yh)n.unshift(t.x);else n.unshift(Tl(t.x));else n.unshift(t.n);e=e.x}if(e.t!==yh)return null;else return{r:e.n,m:n}}function ut(e,t){var n,i=Pl(e);if(!i)return null;if(!e.matchString(t.close))e.error("Expected closing delimiter '"+t.close+"'");return n={t:Gf},Fl(i,n),n}function ft(e,t){var n,i;if(!e.matchString("&"))return null;if(e.allowWhitespace(),n=Pl(e),!n)return null;if(!e.matchString(t.close))e.error("Expected closing delimiter '"+t.close+"'");return i={t:Gf},Fl(n,i),i}function ht(e,t){var n,i,r,s,o;if(n=e.pos,!e.matchString(">"))return null;if(e.allowWhitespace(),i=e.pos,e.relaxedNames=!0,r=Pl(e),e.relaxedNames=!1,e.allowWhitespace(),s=Pl(e),e.allowWhitespace(),!r)return null;if(o={t:th},Fl(r,o),e.allowWhitespace(),s)o={t:Yf,n:Ph,f:[o]},Fl(s,o);if(!e.matchString(t.close))e.error("Expected closing delimiter '"+t.close+"'");return o}function lt(e,t){var n;if(!e.matchString("!"))return null;if(n=e.remaining().indexOf(t.close),-1!==n)return e.pos+=n+t.close.length,{t:nh};else return void 0}function ct(e,t){var n,i,r;if(n=e.pos,i=Pl(e),!i)return null;for(r=0;r<t.length;r+=1)if(e.remaining().substr(0,t[r].length)===t[r])return i;return e.pos=n,ol(e)}function dt(e,t){var n,i,r,s;n=e.pos;try{i=Ll(e,[t.close])}catch(o){s=o}if(!i){if("!"===e.str.charAt(n))return e.pos=n,null;if(s)throw s}if(!e.matchString(t.close))if(e.error("Expected closing delimiter '"+t.close+"' after reference"),!i){if("!"===e.nextChar())return null;e.error("Expected expression or legal reference")}return r={t:Kf},Fl(i,r),r}function pt(e,t){var n,i,r;if(!e.matchPattern(Ml))return null;if(n=e.pos,i=e.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),e.allowWhitespace(),!e.matchString(t.close))e.error("expected legal partial name");if(r={t:ah},i)r.n=i;return r}function mt(e,t){var n,i,r,s;if(n=e.pos,!e.matchString(t.open))return null;if(e.allowWhitespace(),!e.matchString("/"))return e.pos=n,null;if(e.allowWhitespace(),i=e.remaining(),r=i.indexOf(t.close),-1!==r){if(s={t:Xf,r:i.substr(0,r).split(" ")[0]},e.pos+=r,!e.matchString(t.close))e.error("Expected closing delimiter '"+t.close+"'");return s}return e.pos=n,null}function vt(e,t){var n=e.pos;if(!e.matchString(t.open))return null;if(!e.matchPattern(Bl))return e.pos=n,null;if(!e.matchString(t.close))e.error("Expected closing delimiter '"+t.close+"'");return{t:Fh}}function gt(e,t){var n,i=e.pos;if(!e.matchString(t.open))return null;if(!e.matchPattern($l))return e.pos=i,null;if(n=Pl(e),!e.matchString(t.close))e.error("Expected closing delimiter '"+t.close+"'");return{t:Rh,x:n}}function yt(e,t){var n,i,r,s,o,a,u,f,h,l,c,d;if(n=e.pos,e.matchString("^"))r={t:Yf,f:[],n:Ch};else if(e.matchString("#")){if(r={t:Yf,f:[]},e.matchString("partial"))e.pos=n-e.standardDelimiters[0].length,e.error("Partial definitions can only be at the top level of the template, or immediately inside components");if(u=e.matchPattern(Gl))d=u,r.n=Ql[u]}else return null;if(e.allowWhitespace(),i=Pl(e),!i)e.error("Expected expression");if(c=e.matchPattern(Hl)){var p=void 0;if(p=e.matchPattern(Kl))r.i=c+","+p;else r.i=c}if(e.allowWhitespace(),!e.matchString(t.close))e.error("Expected closing delimiter '"+t.close+"'");e.sectionDepth+=1,o=r.f,h=[];do if(s=Wl(e,t)){if(d&&s.r!==d)e.error("Expected "+t.open+"/"+d+t.close);e.sectionDepth-=1,l=!0}else if(s=ql(e,t)){if(r.n===Ch)e.error("{{else}} not allowed in {{#unless}}");if(a)e.error("illegal {{elseif...}} after {{else}}");if(!f)f=bt(i,r.n);f.f.push({t:Yf,n:Sh,x:Tl(xt(h.concat(s.x))),f:o=[]}),h.push(wt(s.x))}else if(s=zl(e,t)){if(r.n===Ch)e.error("{{else}} not allowed in {{#unless}}");if(a)e.error("there can only be one {{else}} block, at the end of a section");if(a=!0,!f)f=bt(i,r.n),o=f.f;else f.f.push({t:Yf,n:Sh,x:Tl(xt(h)),f:o=[]})}else{if(s=e.read(ed),!s)break;o.push(s)}while(!l);if(f){if(r.n===Ph)r.n=Th;r.l=f}if(Fl(i,r),!r.f.length)delete r.f;return r}function bt(e,t){var n;if(t===Ph)n={t:Yf,n:Sh,f:[]},Fl(wt(e),n);else n={t:Yf,n:Ch,f:[]},Fl(e,n);return n}function wt(e){if(e.t===xh&&"!"===e.s)return e.o;else return{t:xh,s:"!",o:kt(e)}}function xt(e){if(1===e.length)return e[0];else return{t:_h,s:"&&",o:[kt(e[0]),kt(xt(e.slice(1)))]}}function kt(e){return{t:kh,x:e}}function Et(e){var t,n,i,r,s;if(t=e.pos,!e.matchString(Jl))return null;if(i=e.remaining(),r=i.indexOf(Xl),-1===r)e.error("Illegal HTML - expected closing comment sequence ('-->')");if(n=i.substr(0,r),e.pos+=r+3,s={t:nh,c:n},e.includeLinePositions)s.p=e.getLinePos(t);return s}function _t(e){return e.replace(El,function(e,t){var n;if("#"!==t[0])n=xl[t];else if("x"===t[1])n=parseInt(t.substring(2),16);else n=parseInt(t.substring(1),10);if(!n)return e;else return String.fromCharCode(At(n))})}function At(e){if(!e)return 65533;if(10===e)return 32;if(128>e)return e;if(159>=e)return kl[e-128];if(55296>e)return e;if(57343>=e)return 65533;if(65535>=e)return e;else return 65533}function St(e){return e.replace(Sl,"&amp;").replace(_l,"&lt;").replace(Al,"&gt;")}function Ct(e){return"string"==typeof e}function Ot(e){return e.t===nh||e.t===ih}function Pt(e){return(e.t===Yf||e.t===Jf)&&e.f}function Tt(e,t,n,i,r){var o,a,u,f,h,l,c,d;for(fc(e),o=e.length;o--;)if(a=e[o],a.exclude)e.splice(o,1);else if(t&&a.t===nh)e.splice(o,1);for(hc(e,i?pc:null,r?mc:null),o=e.length;o--;){if(a=e[o],a.f){var p=a.t===eh&&dc.test(a.e);if(h=n||p,!n&&p)hc(a.f,vc,gc);if(!h){if(u=e[o-1],f=e[o+1],!u||"string"==typeof u&&mc.test(u))l=!0;if(!f||"string"==typeof f&&pc.test(f))c=!0}Tt(a.f,t,h,l,c)}if(a.l)Tt(a.l.f,t,n,l,c),e.splice(o+1,0,a.l),delete a.l;if(a.a)for(d in a.a)if(a.a.hasOwnProperty(d)&&"string"!=typeof a.a[d])Tt(a.a[d],t,n,l,c);if(a.m)Tt(a.m,t,n,l,c);if(a.v)for(d in a.v)if(a.v.hasOwnProperty(d)){if(s(a.v[d].n))Tt(a.v[d].n,t,n,l,c);if(s(a.v[d].d))Tt(a.v[d].d,t,n,l,c)}}for(o=e.length;o--;)if("string"==typeof e[o]){if("string"==typeof e[o+1])e[o]=e[o]+e[o+1],e.splice(o+1,1);if(!n)e[o]=e[o].replace(cc," ");if(""===e[o])e.splice(o,1)}}function Ft(e){var t,n;if(t=e.pos,!e.matchString("</"))return null;if(n=e.matchPattern(bc))if(e.inside&&n!==e.inside)return e.pos=t,null;else return{t:sh,e:n};e.pos-=2,e.error("Illegal closing tag")}function Rt(e){var t,n,i;if(e.allowWhitespace(),n=e.matchPattern(kc),!n)return null;if(t={name:n},i=jt(e),null!=i)t.value=i;return t}function jt(e){var t,n,i,r;if(t=e.pos,!/[=\/>\s]/.test(e.nextChar()))e.error("Expected `=`, `/`, `>` or whitespace");if(e.allowWhitespace(),!e.matchString("="))return e.pos=t,null;if(e.allowWhitespace(),n=e.pos,i=e.sectionDepth,r=It(e,"'")||It(e,'"')||Dt(e),null===r)e.error("Expected valid attribute value");if(e.sectionDepth!==i)e.pos=n,e.error("An attribute value must contain as many opening section tags as closing section tags");if(!r.length)return"";if(1===r.length&&"string"==typeof r[0])return _t(r[0]);else return r}function Nt(e){var t,n,i,r,s;if(t=e.pos,n=e.matchPattern(Ec),!n)return null;if(i=n,r=e.tags.map(function(e){return e.open}),-1!==(s=wc(i,r)))n=n.substr(0,s),e.pos=t+n.length;return n}function Dt(e){var t,n;for(e.inAttribute=!0,t=[],n=Vh(e)||Nt(e);null!==n;)t.push(n),n=Vh(e)||Nt(e);if(!t.length)return null;else return e.inAttribute=!1,t}function It(e,t){var n,i,r;if(n=e.pos,!e.matchString(t))return null;for(e.inAttribute=t,i=[],r=Vh(e)||Lt(e,t);null!==r;)i.push(r),r=Vh(e)||Lt(e,t);if(!e.matchString(t))return e.pos=n,null;else return e.inAttribute=!1,i}function Lt(e,t){var n,i,r,s;if(n=e.pos,r=e.remaining(),s=e.tags.map(function(e){return e.open}),s.push(t),i=wc(r,s),-1===i)e.error("Quoted attribute value must have a closing quote");if(!i)return null;else return e.pos+=i,r.substr(0,i)}function Vt(e){var t,n,i;if(e.allowWhitespace(),t=Jh(e),!t)return null;if(i={key:t},e.allowWhitespace(),!e.matchString(":"))return null;if(e.allowWhitespace(),n=e.read(),!n)return null;else return i.value=n.v,i}function Ut(e,t){var n,i,r,s,o,a,u,f,h;if("string"==typeof e){if(i=Cc.exec(e)){var l=e.lastIndexOf(")");if(!Oc.test(e))t.error("Invalid input after method call expression '"+e.slice(l+1)+"'");return n={m:i[1]},s="["+e.slice(n.m.length+1,l)+"]",r=new _c(s),n.a=Tl(r.result[0]),n}if(-1===e.indexOf(":"))return e.trim();e=[e]}if(n={},u=[],f=[],e){for(;e.length;)if(o=e.shift(),"string"==typeof o)if(a=o.indexOf(":"),-1===a)u.push(o);else{if(a)u.push(o.substr(0,a));if(o.length>a+1)f[0]=o.substring(a+1);break}else u.push(o);f=f.concat(e)}if(!u.length)n="";else if(f.length||"string"!=typeof u)if(n={n:1===u.length&&"string"==typeof u[0]?u[0]:u},1===f.length&&"string"==typeof f[0])h=Ac("["+f[0]+"]"),n.a=h?h.value:f[0].trim();else n.d=f;else n=u;return n}function Mt(e){var t,n,i,r,s,o,a,u,f,h,l,c,d,p,m,v;if(t=e.pos,e.inside||e.inAttribute)return null;if(!e.matchString("<"))return null;if("/"===e.nextChar())return null;if(n={},e.includeLinePositions)n.p=e.getLinePos(t);if(e.matchString("!")){if(n.t=fh,!e.matchPattern(/^doctype/i))e.error("Expected DOCTYPE declaration");return n.a=e.matchPattern(/^(.+?)>/),n}if(n.t=eh,n.e=e.matchPattern(Tc),!n.e)return null;if(!Fc.test(e.nextChar()))e.error("Illegal tag name");for(s=function(t,i){var r=i.n||i;if(Nc.test(r))e.pos-=r.length,e.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)");n.v[t]=i},e.allowWhitespace();o=Vh(e)||xc(e);){if(o.name){if(i=Dc[o.name])n[i]=Sc(o.value,e);else if(r=jc.exec(o.name)){if(!n.v)n.v={};a=Sc(o.value,e),s(r[1],a)}else if(!e.sanitizeEventAttributes||!Rc.test(o.name)){if(!n.a)n.a={};n.a[o.name]=o.value||(""===o.value?"":0)}}else{if(!n.m)n.m=[];n.m.push(o)}e.allowWhitespace()}if(e.allowWhitespace(),e.matchString("/"))u=!0;if(!e.matchString(">"))return null;var g=n.e.toLowerCase(),y=e.preserveWhitespace;if(!u&&!wl.test(n.e)){if(e.elementStack.push(g),"script"===g||"style"===g)e.inside=g;f=[],h=wa(null);do if(p=e.pos,m=e.remaining(),!Wt(g,m))d=!0;else if(v=yc(e)){d=!0;var b=v.e.toLowerCase();if(b!==g)if(e.pos=p,!~e.elementStack.indexOf(b)){var w="Unexpected closing tag";if(wl.test(b))w+=" (<"+b+"> is a void element - it cannot contain children)";e.error(w)}}else if(c=Wl(e,{open:e.standardDelimiters[0],close:e.standardDelimiters[1]}))d=!0,e.pos=p;else if(c=e.read(td)){if(h[c.n])e.pos=p,e.error("Duplicate partial definition");lc(c.f,e.stripComments,y,!y,!y),h[c.n]=c.f,l=!0}else if(c=e.read(ed))f.push(c);else d=!0;while(!d);if(f.length)n.f=f;if(l)n.p=h;e.elementStack.pop()}if(e.inside=null,e.sanitizeElements&&-1!==e.sanitizeElements.indexOf(g))return Ic;else return n}function Wt(e,t){var n,i;if(n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(t),i=Pc[e],!n||!i)return!0;else return!~i.indexOf(n[1].toLowerCase())}function zt(e){var t,n,i,r;if(n=e.remaining(),r=e.inside?"</"+e.inside:"<",e.inside&&!e.interpolate[e.inside])t=n.indexOf(r);else{if(i=e.tags.map(function(e){return e.open}),i=i.concat(e.tags.map(function(e){return"\\"+e.open})),e.inAttribute===!0)i.push('"',"'","=","<",">","`");
else if(e.inAttribute)i.push(e.inAttribute);else i.push(r);t=wc(n,i)}if(!t)return null;if(-1===t)t=n.length;return e.pos+=t,e.inside?n.substr(0,t):_t(n.substr(0,t))}function Bt(e){return e.replace(Wc,"\\$&")}function qt(e){var t=e.pos,n=e.standardDelimiters[0],i=e.standardDelimiters[1],r=void 0,s=void 0;if(!e.matchPattern(Bc)||!e.matchString(n))return e.pos=t,null;var o=e.matchPattern(qc);if(v("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+o+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+o+"}} --> ... <!-- {{/"+o+"}} -->'"),!e.matchString(i)||!e.matchPattern($c))return e.pos=t,null;r=[];var a=new RegExp("^<!--\\s*"+Mc(n)+"\\s*\\/\\s*"+o+"\\s*"+Mc(i)+"\\s*-->");do if(e.matchPattern(a))s=!0;else{if(Lc=e.read(ed),!Lc)e.error("expected closing comment ('<!-- "+n+"/"+o+i+" -->')");r.push(Lc)}while(!s);return{t:uh,f:r,n:o}}function $t(e){var t,n,i,r,s;t=e.pos;var o=e.standardDelimiters;if(!e.matchString(o[0]))return null;if(!e.matchPattern(Zc))return e.pos=t,null;if(n=e.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),!n)e.error("expected legal partial name");if(!e.matchString(o[1]))e.error("Expected closing delimiter '"+o[1]+"'");i=[];do if(r=Wl(e,{open:e.standardDelimiters[0],close:e.standardDelimiters[1]})){if("partial"===!r.r)e.error("Expected "+o[0]+"/partial"+o[1]);s=!0}else{if(r=e.read(ed),!r)e.error("Expected "+o[0]+"/partial"+o[1]);i.push(r)}while(!s);return{t:uh,n:n,f:i}}function Qt(e){for(var t=[],n=wa(null),i=!1,r=e.preserveWhitespace;e.pos<e.str.length;){var s=e.pos,o=void 0,a=void 0;if(a=e.read(td)){if(n[a.n])e.pos=s,e.error("Duplicated partial definition");lc(a.f,e.stripComments,r,!r,!r),n[a.n]=a.f,i=!0}else if(o=e.read(ed))t.push(o);else e.error("Unexpected template content")}var u={v:oa,t:t};if(i)u.p=n;return u}function Zt(e,t){return new Xc(e,t||{}).result}function Ht(e){var t=wa(od);return t.parse=function(t,n){return Kt(t,n||e)},t}function Kt(e,t){if(!Kc)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Kc(e,t||this.options)}function Gt(e,t){var n;if(!Xo){if(t&&t.noThrow)return;throw new Error("Cannot retrieve template #"+e+" as Ractive is not running in a browser.")}if(Yt(e))e=e.substring(1);if(!(n=document.getElementById(e))){if(t&&t.noThrow)return;throw new Error("Could not find template element with id #"+e)}if("SCRIPT"!==n.tagName.toUpperCase()){if(t&&t.noThrow)return;throw new Error("Template element with id #"+e+", must be a <script> element")}return"textContent"in n?n.textContent:n.innerHTML}function Yt(e){return e&&"#"===e[0]}function Jt(e){return!("string"==typeof e)}function Xt(e){if(e.defaults)e=e.defaults;return sd.reduce(function(t,n){return t[n]=e[n],t},{})}function en(e){var t,n=e._config.template;if(n&&n.fn)if(t=tn(e,n.fn),t!==n.result)return n.result=t,t=rn(t,e);else return void 0}function tn(e,t){var n=nn(ad.getParseOptions(e));return t.call(e,n)}function nn(e){var t=wa(ad);return t.parse=function(t,n){return ad.parse(t,n||e)},t}function rn(e,t){if("string"==typeof e){if("#"===e[0])e=ad.fromId(e);e=Kc(e,ad.getParseOptions(t))}else if(void 0==e)throw new Error("The template cannot be "+e+".");else if("number"!=typeof e.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");else if(e.v!==oa)throw new Error("Mismatched template version (expected "+oa+", got "+e.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app");return e}function sn(e,t,n){if(t)for(var i in t)if(n||!e.hasOwnProperty(i))e[i]=t[i]}function on(e,t,n){if(!/_super/.test(n))return n;var i=function(){var e,r=an(i._parent,t),s="_super"in this,o=this._super;if(this._super=r,e=n.apply(this,arguments),s)this._super=o;else delete this._super;return e};return i._parent=e,i._method=n,i}function an(e,t){var n,i;if(t in e)if(n=e[t],"function"==typeof n)i=n;else i=function(){return n};else i=Fa;return i}function un(e,t,n){return"options."+e+" has been deprecated in favour of options."+t+"."+(n?" You cannot specify both options, please use options."+t+".":"")}function fn(e,t,n){if(t in e)if(!(n in e))m(un(t,n)),e[n]=e[t];else throw new Error(un(t,n,!0))}function hn(e){if(fn(e,"beforeInit","onconstruct"),fn(e,"init","onrender"),fn(e,"complete","oncomplete"),fn(e,"eventDefinitions","events"),s(e.adaptors))fn(e,"adaptors","adapt")}function ln(e,t,n,i){yd(i);for(var r in i)if(md.hasOwnProperty(r)){var s=i[r];if("el"!==r&&"function"==typeof s)m(""+r+" is a Ractive option that does not expect a function and will be ignored","init"===e?n:null);else n[r]=s}vd.forEach(function(r){r[e](t,n,i)}),Ff[e](t,n,i),fd[e](t,n,i),Mf[e](t,n,i),cn(t.prototype,n,i)}function cn(e,t,n){for(var i in n)if(!pd[i]&&n.hasOwnProperty(i)){var r=n[i];if("function"==typeof r)r=gd(e,i,r);t[i]=r}}function dn(e){var t={};return e.forEach(function(e){return t[e]=!0}),t}function pn(){if(this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble)this.owner.bubble()}function mn(){var e;if(1===this.items.length)return this.items[0].detach();else return e=document.createDocumentFragment(),this.items.forEach(function(t){var n=t.detach();if(n)e.appendChild(n)}),e}function vn(e){var t,n,i,r;if(this.items){for(n=this.items.length,t=0;n>t;t+=1)if(i=this.items[t],i.find&&(r=i.find(e)))return r;return null}}function gn(e,t){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)if(r=this.items[n],r.findAll)r.findAll(e,t);return t}function yn(e,t){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)if(r=this.items[n],r.findAllComponents)r.findAllComponents(e,t);return t}function bn(e){var t,n,i,r;if(this.items){for(t=this.items.length,n=0;t>n;n+=1)if(i=this.items[n],i.findComponent&&(r=i.findComponent(e)))return r;return null}}function wn(e){var t,n=e.index;if(this.items[n+1])t=this.items[n+1].firstNode();else if(this.owner===this.root)if(!this.owner.component)t=null;else t=this.owner.component.findNextNode();else t=this.owner.findNextNode(this);return t}function xn(){if(this.items&&this.items[0])return this.items[0].firstNode();else return null}function kn(e,t,n,i){return i=i||0,e.map(function(e){var r,s,o;if(e.text)return e.text;if(e.fragments)return e.fragments.map(function(e){return kn(e.items,t,n,i)}).join("");if(r=n+"-"+i++,e.keypath&&(s=e.root.viewmodel.wrapped[e.keypath.str]))o=s.value;else o=e.getValue();return t[r]=o,"${"+r+"}"}).join("")}function En(){var e,t,n,i;if(this.dirtyArgs){if(t=Od(this.items,e={},this.root._guid),n=Ac("["+t+"]",e),!n)i=[this.toString()];else i=n.value;this.argsList=i,this.dirtyArgs=!1}return this.argsList}function _n(){var e=this;do if(e.pElement)return e.pElement.node;while(e=e.parent);return this.root.detached||this.root.el}function An(){var e,t,n,i;if(this.dirtyValue){if(t=Od(this.items,e={},this.root._guid),n=Ac(t,e),!n)i=this.toString();else i=n.value;this.value=i,this.dirtyValue=!1}return this.value}function Sn(){if(this.registered)this.root.viewmodel.unregister(this.keypath,this);if(this.resolver)this.resolver.unbind()}function Cn(){return this.value}function On(e,t){for(var n,i=0;i<t.prop.length;i++)if(void 0!==(n=e[t.prop[i]]))return n}function Pn(e,t){var n,i,r,s,o,a={},u=!1;if(!t)a.refs=n={};for(;e;){if((o=e.owner)&&(i=o.indexRefs))if(t&&(r=o.getIndexRef(t)))return a.ref={fragment:e,ref:r},a;else if(!t)for(s in i)if(r=i[s],!n[r.n])u=!0,n[r.n]={fragment:e,ref:r};if(!e.parent&&e.owner&&e.owner.component&&e.owner.component.parentFragment&&!e.owner.component.instance.isolated)a.componentBoundary=!0,e=e.owner.component.parentFragment;else e=e.parent}if(!u)return void 0;else return a}function Tn(e,t,n){var i;if("@"===t.charAt(0))return new Wd(e,t,n);if(i=qd(e.parentFragment,t))return new Bd(e,i,n);else return new Vd(e,t,n)}function Fn(e,t){var n,i;if(Hd[e])return Hd[e];for(i=[];t--;)i[t]="_"+t;return n=new Function(i.join(","),"return("+e+")"),Hd[e]=n,n}function Rn(e){return e.call()}function jn(e,t){return e.replace(/_([0-9]+)/g,function(e,n){var i,r;if(+n>=t.length)return"_"+n;if(i=t[n],void 0===i)return"undefined";if(i.isSpecial)return r=i.value,"number"==typeof r?r:'"'+r+'"';else return i.str})}function Nn(e){return _("${"+e.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Dn(e){return void 0!==e&&"@"!==e[0]}function In(e,t){var n,i,r;if(e.__ractive_nowrap)return e;if(i="__ractive_"+t._guid,n=e[i])return n;else if(/this/.test(e.toString())){xa(e,i,{value:Kd.call(e,t),configurable:!0});for(r in e)if(e.hasOwnProperty(r))e[i][r]=e[r];return t._boundFunctions.push({fn:e,prop:i}),e[i]}return xa(e,"__ractive_nowrap",{value:e}),e.__ractive_nowrap}function Ln(e){return e.value}function Vn(e){return void 0!=e}function Un(e){e.forceResolution()}function Mn(e,t){function n(t){e.resolve(t)}function i(t){var n=e.keypath;if(t!=n)if(e.resolve(t),void 0!==n)e.fragments&&e.fragments.forEach(function(e){e.rebind(n,t)})}var r,s,o;if(s=t.parentFragment,o=t.template,e.root=s.root,e.parentFragment=s,e.pElement=s.pElement,e.template=t.template,e.index=t.index||0,e.isStatic=t.template.s,e.type=t.template.t,e.registered=!1,r=o.r)e.resolver=Qd(e,r,n);if(t.template.x)e.resolver=new Gd(e,s,t.template.x,i);if(t.template.rx)e.resolver=new ep(e,t.template.rx,i);if(e.template.n===Ch&&!e.hasOwnProperty("value"))e.setValue(void 0)}function Wn(e){var t,n,i;if(e&&e.isSpecial)return this.keypath=e,void this.setValue(e.value);if(this.registered)this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,t=!0;if(this.keypath=e,void 0!=e)n=this.root.viewmodel.get(e),this.root.viewmodel.register(e,this),this.registered=!0;if(this.setValue(n),t&&(i=this.twowayBinding))i.rebound()}function zn(e,t){if(this.fragments)this.fragments.forEach(function(n){return n.rebind(e,t)});if(this.resolver)this.resolver.rebind(e,t)}function Bn(){this.parentFragment.bubble()}function qn(){var e;if(1===this.fragments.length)return this.fragments[0].detach();else return e=document.createDocumentFragment(),this.fragments.forEach(function(t){e.appendChild(t.detach())}),e}function $n(e){var t,n,i;for(n=this.fragments.length,t=0;n>t;t+=1)if(i=this.fragments[t].find(e))return i;return null}function Qn(e,t){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAll(e,t)}function Zn(e,t){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAllComponents(e,t)}function Hn(e){var t,n,i;for(n=this.fragments.length,t=0;n>t;t+=1)if(i=this.fragments[t].findComponent(e))return i;return null}function Kn(e){if(this.fragments[e.index+1])return this.fragments[e.index+1].firstNode();else return this.parentFragment.findNextNode(this)}function Gn(){var e,t,n;if(e=this.fragments.length)for(t=0;e>t;t+=1)if(n=this.fragments[t].firstNode())return n;return this.parentFragment.findNextNode(this)}function Yn(e){var t,n,i,r,s,o,a,u=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===Oh){if(this.shuffling=!0,mu.scheduleTask(function(){return u.shuffling=!1}),t=this.parentFragment,s=[],e.forEach(function(e,t){var i,r,o,a,f;if(e===t)return void(s[e]=u.fragments[t]);if(i=u.fragments[t],void 0===n)n=t;if(-1===e)return u.fragmentsToUnrender.push(i),void i.unbind();if(r=e-t,o=u.keypath.join(t),a=u.keypath.join(e),i.index=e,f=i.registeredIndexRefs)f.forEach(Jn);i.rebind(o,a),s[e]=i}),r=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===r)return;n=this.length}if(this.length=this.fragments.length=r,this.rendered)mu.addView(this);for(o={template:this.template.f,root:this.root,owner:this},i=n;r>i;i+=1){if(a=s[i],!a)this.fragmentsToCreate.push(i);this.fragments[i]=a}}}function Jn(e){e.rebind("","")}function Xn(){var e=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(t){return e.docFrag.appendChild(t.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function ei(e){var t,n,i=this;if(!this.updating){if(this.updating=!0,this.keypath&&(t=this.root.viewmodel.wrapped[this.keypath.str]))e=t.get();if(this.fragmentsToCreate.length)n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(e){var t;n.context=i.keypath.join(e),n.index=e,t=new yb(n),i.fragmentsToRender.push(i.fragments[e]=t)}),this.fragmentsToCreate.length=0;else if(ni(this,e))if(this.bubble(),this.rendered)mu.addView(this);this.value=e,this.updating=!1}}function ti(e,t,n){if(t===Oh)if(e.indexRefs&&e.indexRefs[0]){var i=e.indexRefs[0];if(n&&"i"===i.t||!n&&"k"===i.t)if(!n)e.length=0,e.fragmentsToUnrender=e.fragments.slice(0),e.fragmentsToUnrender.forEach(function(e){return e.unbind()});i.t=n?"k":"i"}e.currentSubtype=t}function ni(e,t){var n={template:e.template.f||[],root:e.root,pElement:e.parentFragment.pElement,owner:e};if(e.hasContext=!0,e.subtype)switch(e.subtype){case Sh:return e.hasContext=!1,ai(e,t,!1,n);case Ch:return e.hasContext=!1,ai(e,t,!0,n);case Ph:return oi(e,n);case Th:return si(e,t,n);case Oh:if(f(t))return ti(e,e.subtype,!0),ri(e,t,n)}if(e.ordered=!!o(t),e.ordered)return ti(e,Oh,!1),ii(e,t,n);if(f(t)||"function"==typeof t)if(e.template.i)return ti(e,Oh,!0),ri(e,t,n);else return ti(e,Ph,!1),oi(e,n);return ti(e,Sh,!1),e.hasContext=!1,ai(e,t,!1,n)}function ii(e,t,n){var i,r,s;if(r=t.length,r===e.length)return!1;if(r<e.length)e.fragmentsToUnrender=e.fragments.splice(r,e.length-r),e.fragmentsToUnrender.forEach(Z);else if(r>e.length)for(i=e.length;r>i;i+=1)n.context=e.keypath.join(i),n.index=i,s=new yb(n),e.fragmentsToRender.push(e.fragments[i]=s);return e.length=r,!0}function ri(e,t,n){var i,r,s,o,a,u;for(s=e.hasKey||(e.hasKey={}),r=e.fragments.length;r--;)if(o=e.fragments[r],!(o.key in t))a=!0,o.unbind(),e.fragmentsToUnrender.push(o),e.fragments.splice(r,1),s[o.key]=!1;for(r=e.fragments.length;r--;)if(o=e.fragments[r],o.index!==r)if(o.index=r,u=o.registeredIndexRefs)u.forEach(hi);r=e.fragments.length;for(i in t)if(!s[i])a=!0,n.context=e.keypath.join(i),n.key=i,n.index=r++,o=new yb(n),e.fragmentsToRender.push(o),e.fragments.push(o),s[i]=!0;return e.length=e.fragments.length,a}function si(e,t,n){if(t)return oi(e,n);else return ui(e)}function oi(e,t){var n;if(!e.length)return t.context=e.keypath,t.index=0,n=new yb(t),e.fragmentsToRender.push(e.fragments[0]=n),e.length=1,!0;else return void 0}function ai(e,t,n,i){var r,s,a,u,h;if(s=o(t)&&0===t.length,a=!1,!o(t)&&f(t)){a=!0;for(h in t){a=!1;break}}if(n)r=s||a||!t;else r=t&&!s&&!a;if(r){if(!e.length)return i.index=0,u=new yb(i),e.fragmentsToRender.push(e.fragments[0]=u),e.length=1,!0;if(e.length>1)return e.fragmentsToUnrender=e.fragments.splice(1),e.fragmentsToUnrender.forEach(Z),!0}else return ui(e)}function ui(e){if(e.length)return e.fragmentsToUnrender=e.fragments.splice(0,e.fragments.length).filter(fi),e.fragmentsToUnrender.forEach(Z),e.length=e.fragmentsToRender.length=0,!0;else return void 0}function fi(e){return e.rendered}function hi(e){e.rebind("","")}function li(e){var t,n,i;for(t="",n=0,i=this.length,n=0;i>n;n+=1)t+=this.fragments[n].toString(e);return t}function ci(){var e=this;this.fragments.forEach(Z),this.fragmentsToRender.forEach(function(t){return I(e.fragments,t)}),this.fragmentsToRender=[],Dd.call(this),this.length=0,this.unbound=!0}function di(e){this.fragments.forEach(e?pi:mi),this.renderedFragments=[],this.rendered=!1}function pi(e){e.unrender(!0)}function mi(e){e.unrender(!1)}function vi(){var e,t,n,i,r,s,o;for(n=this.renderedFragments;e=this.fragmentsToUnrender.pop();)e.unrender(!0),n.splice(n.indexOf(e),1);for(;e=this.fragmentsToRender.shift();)e.render();if(this.rendered)r=this.parentFragment.getNode();for(o=this.fragments.length,s=0;o>s;s+=1)if(e=this.fragments[s],t=n.indexOf(e,s),t!==s){if(this.docFrag.appendChild(e.detach()),-1!==t)n.splice(t,1);n.splice(s,0,e)}else if(this.docFrag.childNodes.length)i=e.firstNode(),r.insertBefore(this.docFrag,i);if(this.rendered&&this.docFrag.childNodes.length)i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i);this.renderedFragments=this.fragments.slice()}function gi(){var e,t;if(this.docFrag){for(e=this.nodes.length,t=0;e>t;t+=1)this.docFrag.appendChild(this.nodes[t]);return this.docFrag}}function yi(e){var t,n,i,r;for(n=this.nodes.length,t=0;n>t;t+=1)if(i=this.nodes[t],1===i.nodeType){if(ca(i,e))return i;if(r=i.querySelector(e))return r}else;return null}function bi(e,t){var n,i,r,s,o,a;for(i=this.nodes.length,n=0;i>n;n+=1)if(r=this.nodes[n],1===r.nodeType){if(ca(r,e))t.push(r);if(s=r.querySelectorAll(e))for(o=s.length,a=0;o>a;a+=1)t.push(s[a])}else;}function wi(){if(this.rendered&&this.nodes[0])return this.nodes[0];else return this.parentFragment.findNextNode(this)}function xi(e){return Fp[e]||(Fp[e]=la(e))}function ki(e){var t,n,i;if(e&&"select"===e.name&&e.binding){if(t=L(e.node.options).filter(Ei),e.getAttribute("multiple"))i=t.map(function(e){return e.value});else if(n=t[0])i=n.value;if(void 0!==i)e.binding.setValue(i);e.bubble()}}function Ei(e){return e.selected}function _i(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Rp(this.value,this.parentFragment.getNode(),this.docFrag),jp(this.pElement),this.rendered=!0,this.docFrag}function Ai(e){var t;if(t=this.root.viewmodel.wrapped[this.keypath.str])e=t.get();if(e!==this.value)if(this.value=e,this.parentFragment.bubble(),this.rendered)mu.addView(this)}function Si(){return void 0!=this.value?_t(""+this.value):""}function Ci(e){if(this.rendered&&e)this.nodes.forEach(t),this.rendered=!1}function Oi(){var e,t;if(this.rendered){for(;this.nodes&&this.nodes.length;)e=this.nodes.pop(),e.parentNode.removeChild(e);t=this.parentFragment.getNode(),this.nodes=Rp(this.value,t,this.docFrag),t.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),jp(this.pElement)}}function Pi(){var e,t=this.node;if(t){if(e=t.parentNode)e.removeChild(t);return t}}function Ti(){return null}function Fi(){return this.node}function Ri(e){if(this.attributes&&this.attributes[e])return this.attributes[e].value;else return void 0}function ji(){var e=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();if(!a(e,this.value)){if("id"===this.name&&this.value)delete this.root.nodes[this.value];if(this.value=e,"value"===this.name&&this.node)this.node._ractive.value=e;if(this.rendered)mu.addView(this)}}function Ni(e){var t=e.fragment.items;if(1===t.length)if(t[0].type===Kf)return t[0];else return void 0}function Di(e){if(this.type=rh,this.element=e.element,this.root=e.root,sm(this,e.name),this.isBoolean=bl.test(this.name),!e.value||"string"==typeof e.value)return void(this.value=this.isBoolean?!0:e.value||"");else return this.parentFragment=this.element.parentFragment,this.fragment=new yb({template:e.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=om(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)}function Ii(e,t){if(this.fragment)this.fragment.rebind(e,t)}function Li(e){var t;if(this.node=e,!e.namespaceURI||e.namespaceURI===ia.html){if(t=hm[this.name]||this.name,void 0!==e[t])this.propertyName=t;if(this.isBoolean||this.isTwoway)this.useProperty=!0;if("value"===t)e._ractive.value=this.value}this.rendered=!0,this.update()}function Vi(){var e=this,t=e.name,n=e.namespacePrefix,i=e.value,r=e.interpolator,s=e.fragment;if("value"!==t||"select"!==this.element.name&&"textarea"!==this.element.name)if("value"!==t||void 0===this.element.getAttribute("contenteditable")){if("name"===t&&"input"===this.element.name&&r)return"name={{"+(r.keypath.str||r.ref)+"}}";if(this.isBoolean)return i?t:"";if(s){if(1===s.items.length&&null==s.items[0].value)return"";i=s.toString()}if(n)t=n+":"+t;return i?t+'="'+Ui(i)+'"':t}}function Ui(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Mi(){if(this.fragment)this.fragment.unbind();if("id"===this.name)delete this.root.nodes[this.value]}function Wi(){var e,t,n,i,r=this.value;if(!this.locked)for(this.node._ractive.value=r,e=this.node.options,i=e.length;i--;)if(t=e[i],n=t._ractive?t._ractive.value:t.value,n==r){t.selected=!0;break}}function zi(){var e,t,n,i,r=this.value;if(!s(r))r=[r];for(e=this.node.options,t=e.length;t--;)n=e[t],i=n._ractive?n._ractive.value:n.value,n.selected=R(r,i)}function Bi(){var e=this,t=e.node,n=e.value;t.checked=n==t._ractive.value}function qi(){var e,t,n,i,r=this.node;if(e=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),e&&!r.checked&&this.element.binding)if(n=this.element.binding.siblings,i=n.length){for(;i--;){if(t=n[i],!t.element.node)return;if(t.element.node.checked)return mu.addRactive(t.root),t.handleChange()}this.root.viewmodel.set(t.keypath,void 0)}}function $i(){var e,t,n=this,i=n.element,r=n.node,o=n.value,a=i.binding;if(e=i.getAttribute("value"),!s(o))a.isChecked=r.checked=o==e;else{for(t=o.length;t--;)if(e==o[t])return void(a.isChecked=r.checked=!0);a.isChecked=r.checked=!1}}function Qi(){this.node.className=n(this.value)}function Zi(){var e=this,t=e.node,n=e.value;this.root.nodes[n]=t,t.id=n}function Hi(){var e,t;if(e=this.node,t=this.value,void 0===t)t="";e.style.setAttribute("cssText",t)}function Ki(){var e=this.value;if(void 0===e)e="";if(!this.locked)this.node.innerHTML=e}function Gi(){var e=this,t=e.node,n=e.value;if(t._ractive.value=n,!this.locked)t.value=void 0==n?"":n}function Yi(){if(!this.locked)this.node[this.propertyName]=this.value}function Ji(){var e=this,t=e.node,n=e.namespace,i=e.name,r=e.value,s=e.fragment;if(n)t.setAttributeNS(n,i,(s||r).toString());else if(!this.isBoolean)if(null==r)t.removeAttribute(i);else t.setAttribute(i,(s||r).toString());else if(r)t.setAttribute(i,"");else t.removeAttribute(i)}function Xi(){var e,t,n=this,i=n.name,r=n.element,s=n.node;if("id"===i)t=bm;else if("value"===i){if("select"===r.name&&"value"===i)t=r.getAttribute("multiple")?pm:dm;else if("textarea"===r.name)t=km;else if(null!=r.getAttribute("contenteditable"))t=xm;else if("input"===r.name)if(e=r.getAttribute("type"),"file"===e)t=Fa;else if("radio"===e&&r.binding&&"name"===r.binding.name)t=vm;else t=km}else if(this.isTwoway&&"name"===i){if("radio"===s.type)t=mm;else if("checkbox"===s.type)t=gm}else if("style"===i&&s.style.setAttribute)t=wm;else if("class"===i&&(!s.namespaceURI||s.namespaceURI===ia.html))t=ym;else if(this.useProperty)t=Em;if(!t)t=_m;this.update=t,this.update()}function er(e,t){var n=t?"svg":"div";return Cm.innerHTML="<"+n+" "+e+"></"+n+">",L(Cm.childNodes[0].attributes)}function tr(e,t){for(var n=e.length;n--;)if(e[n].name===t.name)return!1;return!0}function nr(e){for(;e=e.parent;)if("form"===e.name)return e}function ir(){this._ractive.binding.handleChange()}function rr(){var e;Im.call(this),e=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==e?"":e}function sr(){var e=this._ractive.binding,t=this;if(e._timeout)clearTimeout(e._timeout);e._timeout=setTimeout(function(){if(e.rendered)Im.call(t);e._timeout=void 0},e.element.lazy)}function or(e,t,n){var i=e+t+n;return Wm[i]||(Wm[i]=[])}function ar(e){return e.isChecked}function ur(e){return e.element.getAttribute("value")}function fr(e){var t,n,i,r,s,o=e.attributes;if(e.binding)e.binding.teardown(),e.binding=null;if((e.getAttribute("contenteditable")||o.contenteditable&&hr(o.contenteditable))&&hr(o.value))n=Um;else if("input"===e.name){if(t=e.getAttribute("type"),"radio"===t||"checkbox"===t){if(i=hr(o.name),r=hr(o.checked),i&&r)m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:e.root});if(i)n="radio"===t?$m:Zm;else if(r)n="radio"===t?Bm:Km}else if("file"===t&&hr(o.value))n=tv;else if(hr(o.value))n="number"===t||"range"===t?nv:Lm}else if("select"===e.name&&hr(o.value))n=e.getAttribute("multiple")?Xm:Ym;else if("textarea"===e.name&&hr(o.value))n=Lm;if(n&&(s=new n(e))&&s.keypath)return s;else return void 0}function hr(e){return e&&e.isBindable}function lr(){var e=this.getAction();if(e&&!this.hasListener)this.listen();else if(!e&&this.hasListener)this.unrender()}function cr(e){Wu(this.root,this.getAction(),{event:e})}function dr(){return this.action.toString().trim()}function pr(e,t,n){var i,r,s,o=this;if(this.element=e,this.root=e.root,this.parentFragment=e.parentFragment,this.name=t,-1!==t.indexOf("*"))l('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',e.name,t),this.invalid=!0;if(n.m)r=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Zd(n.a.s,r.length),this.parentFragment=e.parentFragment,s=this.root,this.refResolvers=[],r.forEach(function(e,t){var n=void 0;if(n=uv.exec(e))o.keypaths[t]={eventObject:!0,refinements:n[1]?n[1].split("."):[]};else o.refResolvers.push(Qd(o,e,function(e){return o.resolve(t,e)}))}),this.fire=mr;else{if(i=n.n||n,"string"!=typeof i)i=new yb({template:i,root:this.root,owner:this});if(this.action=i,n.d)this.dynamicParams=new yb({template:n.d,root:this.root,owner:this.element}),this.fire=gr;else if(n.a)this.params=n.a,this.fire=vr}}function mr(e){var t,n,i;if(t=this.root,"function"!=typeof t[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var i,r,s;if(void 0===n)return void 0;if(n.eventObject){if(i=e,r=n.refinements.length)for(s=0;r>s;s+=1)i=i[n.refinements[s]]}else i=t.viewmodel.get(n);return i}),Mu.enqueue(t,e),i=this.fn.apply(null,n),t[this.method].apply(t,i),Mu.dequeue(t)}function vr(e){Wu(this.root,this.getAction(),{event:e,args:this.params})}function gr(e){var t=this.dynamicParams.getArgsList();if("string"==typeof t)t=t.substr(1,t.length-2);Wu(this.root,this.getAction(),{event:e,args:t})}function yr(e){var t,n,i,r={};if(t=this._ractive,n=t.events[e.type],i=qd(n.element.parentFragment))r=qd.resolve(i);n.fire({node:this,original:e,index:r,keypath:t.keypath.str,context:t.root.viewmodel.get(t.keypath)})}function br(){var e,t=this.name;if(!this.invalid){if(e=g("events",this.root,t))this.custom=e(this.node,wr(t));else{if(!("on"+t in this.node||window&&"on"+t in window||ea)){if(!cv[t])v(Da(t,"event"),{node:this.node});return}this.node.addEventListener(t,fv,!1)}this.hasListener=!0}}function wr(e){if(!lv[e])lv[e]=function(t){var n=t.node._ractive;t.index=n.index,t.keypath=n.keypath.str,t.context=n.root.viewmodel.get(n.keypath),n.events[e].fire(t)};return lv[e]}function xr(e,t){function n(n){n&&n.rebind(e,t)}var i;if(this.method)return i=this.element.parentFragment,void this.refResolvers.forEach(n);if("string"!=typeof this.action)n(this.action);if(this.dynamicParams)n(this.dynamicParams)}function kr(){if(this.node=this.element.node,this.node._ractive.events[this.name]=this,this.method||this.getAction())this.listen()}function Er(e,t){this.keypaths[e]=t}function _r(){if(this.method)return void this.refResolvers.forEach(Z);if("string"!=typeof this.action)this.action.unbind();if(this.dynamicParams)this.dynamicParams.unbind()}function Ar(){if(this.custom)this.custom.teardown();else this.node.removeEventListener(this.name,fv,!1);this.hasListener=!1}function Sr(){var e=this;if(!this.dirty)this.dirty=!0,mu.scheduleTask(function(){Cr(e),e.dirty=!1});this.parentFragment.bubble()}function Cr(e){var t,n,i,r,s;if(t=e.node)if(r=L(t.options),n=e.getAttribute("value"),i=e.getAttribute("multiple"),void 0!==n){if(r.forEach(function(e){var t,r;if(t=e._ractive?e._ractive.value:e.value,r=i?Or(n,t):n==t)s=!0;e.selected=r}),!s){if(r[0])r[0].selected=!0;if(e.binding)e.binding.forceUpdate()}}else if(e.binding)e.binding.forceUpdate()}function Or(e,t){for(var n=e.length;n--;)if(e[n]==t)return!0}function Pr(e,t){if(e.select=Fr(e.parent),e.select){if(e.select.options.push(e),!t.a)t.a={};if(void 0===t.a.value&&!t.a.hasOwnProperty("disabled"))t.a.value=t.f;if("selected"in t.a&&void 0!==e.select.getAttribute("value"))delete t.a.selected}}function Tr(e){if(e.select)I(e.select.options,e)}function Fr(e){if(e)do if("select"===e.name)return e;while(e=e.parent)}function Rr(e){var t,n,i,r,s,o,a;if(this.type=eh,t=this.parentFragment=e.parentFragment,n=this.template=e.template,this.parent=e.pElement||t.pElement,this.root=i=t.root,this.index=e.index,this.key=e.key,this.name=rm(n.e),"option"===this.name)Pr(this,n);if("select"===this.name)this.options=[],this.bubble=Sr;if("form"===this.name)this.formBindings=[];if(a=nm(this,n),this.attributes=Pm(this,n.a),this.conditionalAttributes=Rm(this,n.m),n.f)this.fragment=new yb({template:n.f,root:i,owner:this,pElement:this,cssIds:null});if(o=i.twoway,a.twoway===!1)o=!1;else if(a.twoway===!0)o=!0;if(this.twoway=o,this.lazy=a.lazy,o&&(r=iv(this,n.a)))this.binding=r,s=this.root._twowayBindings[r.keypath.str]||(this.root._twowayBindings[r.keypath.str]=[]),s.push(r);if(n.v)this.eventHandlers=wv(this,n.v);if(n.o)this.decorator=new Av(this,n.o);this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function jr(e,t){function n(n){n.rebind(e,t)}var i,r,s,o;if(this.attributes)this.attributes.forEach(n);if(this.conditionalAttributes)this.conditionalAttributes.forEach(n);if(this.eventHandlers)this.eventHandlers.forEach(n);if(this.decorator)n(this.decorator);if(this.fragment)n(this.fragment);if(s=this.liveQueries)for(o=this.root,i=s.length;i--;)s[i]._makeDirty();if(this.node&&(r=this.node._ractive))k(r,"keypath",e,t)}function Nr(e){var t;if(e.attributes.width||e.attributes.height)e.node.addEventListener("load",t=function(){var n=e.getAttribute("width"),i=e.getAttribute("height");if(void 0!==n)e.node.setAttribute("width",n);if(void 0!==i)e.node.setAttribute("height",i);e.node.removeEventListener("load",t,!1)},!1)}function Dr(e){e.node.addEventListener("reset",Lr,!1)}function Ir(e){e.node.removeEventListener("reset",Lr,!1)}function Lr(){var e=this._ractive.proxy;mu.start(),e.formBindings.forEach(Vr),mu.end()}function Vr(e){e.root.viewmodel.set(e.keypath,e.resetValue)}function Ur(e,t,n){var i,r,s;if(this.element=e,this.root=i=e.root,this.isIntro=n,r=t.n||t,"string"!=typeof r)if(s=new yb({template:r,root:i,owner:e}),r=s.toString(),s.unbind(),""===r)return;if(this.name=r,t.a)this.params=t.a;else if(t.d)s=new yb({template:t.d,root:i,owner:e}),this.params=s.getArgsList(),s.unbind();if(this._fn=g("transitions",i,r),!this._fn)v(Da(r,"transition"),{ractive:this.root})}function Mr(e){return e}function Wr(){tg.hidden=document[Yv]}function zr(){tg.hidden=!0}function Br(){tg.hidden=!1}function qr(){var e,t,n,i=this;if(e=this.node=this.element.node,t=e.getAttribute("style"),this.complete=function(r){if(!n){if(!r&&i.isIntro)$r(e,t);e._ractive.transition=null,i._manager.remove(i),n=!0}},!this._fn)return void this.complete();else return void this._fn.apply(this.root,[this].concat(this.params))}function $r(e,t){if(t)e.setAttribute("style",t);else e.getAttribute("style"),e.removeAttribute("style")}function Qr(){var e,t,n,i=this,r=this.root;if(e=Zr(this),t=this.node=la(this.name,e),this.parentFragment.cssIds)this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(e){return"{"+e+"}"}).join(" "));if(xa(this.node,"_ractive",{value:{proxy:this,keypath:au(this.parentFragment),events:wa(null),root:r}}),this.attributes.forEach(function(e){return e.render(t)}),this.conditionalAttributes.forEach(function(e){return e.render(t)}),this.fragment)if("script"===this.name)this.bubble=cg,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Fa;else if("style"===this.name)this.bubble=lg,this.bubble(),this.fragment.unrender=Fa;else if(this.binding&&this.getAttribute("contenteditable"))this.fragment.unrender=Fa;else this.node.appendChild(this.fragment.render());if(this.binding)this.binding.render(),this.node._ractive.binding=this.binding;if(this.eventHandlers)this.eventHandlers.forEach(function(e){return e.render()});if("option"===this.name)Hr(this);if("img"===this.name)Nr(this);else if("form"===this.name)Dr(this);else if("input"===this.name||"textarea"===this.name)this.node.defaultValue=this.node.value;
else if("option"===this.name)this.node.defaultSelected=this.node.selected;if(this.decorator&&this.decorator.fn)mu.scheduleTask(function(){if(!i.decorator.torndown)i.decorator.init()},!0);if(r.transitionsEnabled&&this.intro)n=new dg(this,this.intro,!0),mu.registerTransition(n),mu.scheduleTask(function(){return n.start()},!0),this.transition=n;if(this.node.autofocus)mu.scheduleTask(function(){return i.node.focus()},!0);return Kr(this),this.node}function Zr(e){var t,n,i;if(n=e.getAttribute("xmlns"))t=n;else if("svg"===e.name)t=ia.svg;else if(i=e.parent)if("foreignObject"===i.name)t=ia.html;else t=i.node.namespaceURI;else t=e.root.el.namespaceURI;return t}function Hr(e){var t,n,i;if(e.select)if(n=e.select.getAttribute("value"),void 0!==n)if(t=e.getAttribute("value"),e.select.node.multiple&&s(n)){for(i=n.length;i--;)if(t==n[i]){e.node.selected=!0;break}}else e.node.selected=t==n}function Kr(e){var t,n,i,r,s;t=e.root;do for(n=t._liveQueries,i=n.length;i--;)if(r=n[i],s=n["_"+r],s._test(e))(e.liveQueries||(e.liveQueries=[])).push(s);while(t=t.parent)}function Gr(e){var t,n,i;if(t=e.getAttribute("value"),void 0===t||!e.select)return!1;if(n=e.select.getAttribute("value"),n==t)return!0;if(e.select.getAttribute("multiple")&&s(n))for(i=n.length;i--;)if(n[i]==t)return!0}function Yr(e){var t,n,i,r;if(t=e.attributes,n=t.type,i=t.value,r=t.name,n&&"radio"===n.value&&i&&r.interpolator)if(i.value===r.interpolator.value)return!0;else return void 0}function Jr(e){var t=e.toString();return t?" "+t:""}function Xr(){if(this.fragment)this.fragment.unbind();if(this.binding)this.binding.unbind();if(this.eventHandlers)this.eventHandlers.forEach(Z);if("option"===this.name)Tr(this);this.attributes.forEach(Z),this.conditionalAttributes.forEach(Z)}function es(e){var t,n,i;if(i=this.transition)i.complete();if("option"===this.name)this.detach();else if(e)mu.detachWhenReady(this);if(this.fragment)this.fragment.unrender(!1);if(t=this.binding)this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[t.keypath.str],n.splice(n.indexOf(t),1);if(this.eventHandlers)this.eventHandlers.forEach(H);if(this.decorator)mu.registerDecorator(this.decorator);if(this.root.transitionsEnabled&&this.outro)i=new dg(this,this.outro,!1),mu.registerTransition(i),mu.scheduleTask(function(){return i.start()});if(this.liveQueries)ts(this);if("form"===this.name)Ir(this)}function ts(e){var t,n,i;for(i=e.liveQueries.length;i--;)t=e.liveQueries[i],n=t.selector,t._remove(e.node)}function ns(e,t){var n=xg.exec(t)[0];if(null===e||n.length<e.length)return n;else return e}function is(e,t,n){var i;if(i=rs(e,t,n||{}))return i;if(i=ad.fromId(t,{noThrow:!0})){i=kg(i);var r=ad.parse(i,ad.getParseOptions(e));return e.partials[t]=r.t}}function rs(e,t,n){var i=void 0,r=as(t,n.owner);if(r)return r;var s=y("partials",e,t);if(s){if(r=s.partials[t],"function"==typeof r)i=r.bind(s),i.isOwner=s.partials.hasOwnProperty(t),r=i.call(e,ad);if(!r&&""!==r)return void m(Na,t,"partial","partial",{ractive:e});if(!ad.isParsed(r)){var o=ad.parse(r,ad.getParseOptions(s));if(o.p)m("Partials ({{>%s}}) cannot contain nested inline partials",t,{ractive:e});var a=i?s:ss(s,t);a.partials[t]=r=o.t}if(i)r._fn=i;return r.v?r.t:r}}function ss(e,t){return e.partials.hasOwnProperty(t)?e:os(e.constructor,t)}function os(e,t){if(e)return e.partials.hasOwnProperty(t)?e:os(e._Parent,t);else return void 0}function as(e,t){if(t)if(t.template&&t.template.p&&t.template.p[e])return t.template.p[e];else if(t.parentFragment&&t.parentFragment.owner)return as(e,t.parentFragment.owner)}function us(e,t){var n,i=y("components",e,t);if(i)if(n=i.components[t],!n._Parent){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(t),n=r(),!n)return void m(Na,t,"component","component",{ractive:e});if("string"==typeof n)n=us(e,n);n._fn=r,i.components[t]=n}return n}function fs(){var e=this.instance.fragment.detach();return jg.fire(this.instance),e}function hs(e){return this.instance.fragment.find(e)}function ls(e,t){return this.instance.fragment.findAll(e,t)}function cs(e,t){if(t._test(this,!0),this.instance.fragment)this.instance.fragment.findAllComponents(e,t)}function ds(e){if(!e||e===this.name)return this.instance;if(this.instance.fragment)return this.instance.fragment.findComponent(e);else return null}function ps(){return this.parentFragment.findNextNode(this)}function ms(){if(this.rendered)return this.instance.fragment.firstNode();else return null}function vs(e,t,n){function i(e){var n,i;if(e.value=t,!e.updating)i=e.ractive,n=e.keypath,e.updating=!0,mu.start(i),i.viewmodel.mark(n),mu.end(),e.updating=!1}var r,s,o,a,u,f;if(r=e.obj,s=e.prop,n&&!n.configurable){if("length"===s)return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}if(n)o=n.get,a=n.set;u=o||function(){return t},f=function(e){if(a)a(e);t=o?o():e,f._ractiveWrappers.forEach(i)},f._ractiveWrappers=[e],Object.defineProperty(r,s,{get:u,set:f,enumerable:!0,configurable:!0})}function gs(e,t){var n,i,r,s;if(this.adaptors)for(n=this.adaptors.length,i=0;n>i;i+=1)if(r=this.adaptors[i],r.filter(t,e,this.ractive))return s=this.wrapped[e]=r.wrap(this.ractive,t,e,bs(e)),void(s.value=t)}function ys(e,t){var n,i={};if(!t)return e;t+=".";for(n in e)if(e.hasOwnProperty(n))i[t+n]=e[n];return i}function bs(e){var t;if(!iy[e])t=e?e+".":"",iy[e]=function(n,i){var r;if("string"==typeof n)return r={},r[t+n]=i,r;if("object"==typeof n)return t?ys(n,e):n;else return void 0};return iy[e]}function ws(e){var t,n,i=[Za];for(t=e.length;t--;)for(n=e[t].parent;n&&!n.isRoot;){if(-1===e.indexOf(n))F(i,n);n=n.parent}return i}function xs(e,t,n){var i;if(Es(e,t),!n)i=t.wildcardMatches(),i.forEach(function(n){ks(e,n,t)})}function ks(e,t,n){var i,r,s;if(t=t.str||t,i=e.depsMap.patternObservers,r=i&&i[t])r.forEach(function(t){s=n.join(t.lastKey),Es(e,s),ks(e,t,s)})}function Es(e,t){e.patternObservers.forEach(function(e){if(e.regex.test(t.str))e.update(t)})}function _s(){function e(e){var i=e.key;if(e.viewmodel===o)o.clearCache(i.str),e.invalidate(),n.push(i),t(i);else e.viewmodel.mark(i)}function t(n){var i,r;if(!o.noCascade.hasOwnProperty(n.str)){if(r=o.deps.computed[n.str])r.forEach(e);if(i=o.depsMap.computed[n.str])i.forEach(t)}}var n,i,r,s=this,o=this,a={};if(n=this.changes,n.length){if(n.slice().forEach(t),i=ry(n),i.forEach(function(t){var i;if(-1===n.indexOf(t)&&(i=o.deps.computed[t.str]))i.forEach(e)}),this.changes=[],this.patternObservers.length)i.forEach(function(e){return sy(s,e,!0)}),n.forEach(function(e){return sy(s,e)});if(this.deps.observers)i.forEach(function(e){return As(s,null,e,"observers")}),Cs(this,n,"observers");if(this.deps["default"]){if(r=[],i.forEach(function(e){return As(s,r,e,"default")}),r.length)Ss(this,r,n);Cs(this,n,"default")}return n.forEach(function(e){a[e.str]=s.get(e)}),this.implicitChanges={},this.noCascade={},a}}function As(e,t,n,i){var r,s;if(r=Os(e,n,i))s=e.get(n),r.forEach(function(e){if(t&&e.refineValue)t.push(e);else e.setValue(s)})}function Ss(e,t,n){t.forEach(function(t){for(var i=!1,r=0,s=n.length,o=[];s>r;){var a=n[r];if(a===t.keypath){i=!0;break}if(a.slice(0,t.keypath.length)===t.keypath)o.push(a);r++}if(i)t.setValue(e.get(t.keypath));if(o.length)t.refineValue(o)})}function Cs(e,t,n){function i(e){e.forEach(r),e.forEach(s)}function r(t){var i=Os(e,t,n);if(i)a.push({keypath:t,deps:i})}function s(t){var r;if(r=e.depsMap[n][t.str])i(r)}function o(t){var n=e.get(t.keypath);t.deps.forEach(function(e){return e.setValue(n)})}var a=[];i(t),a.forEach(o)}function Os(e,t,n){var i=e.deps[n];return i?i[t.str]:null}function Ps(){this.captureGroups.push([])}function Ts(e,t){var n,i;if(!t)if(i=this.wrapped[e])if(i.teardown()!==!1)this.wrapped[e]=null;if(this.cache[e]=void 0,n=this.cacheMap[e])for(;n.length;)this.clearCache(n.pop())}function Fs(e,t){var n=t.firstKey;return!(n in e.data||n in e.computations||n in e.mappings)}function Rs(e,t){var n=new cy(e,t);if(this.ready)n.init(this);return this.computations[e.str]=n}function js(e,t){var n,i,r,s,o,a=this.cache,u=e.str;if(t=t||vy,t.capture&&(s=D(this.captureGroups)))if(!~s.indexOf(e))s.push(e);if(Oa.call(this.mappings,e.firstKey))return this.mappings[e.firstKey].get(e,t);if(e.isSpecial)return e.value;if(void 0===a[u]){if((i=this.computations[u])&&!i.bypass)n=i.get(),this.adapt(u,n);else if(r=this.wrapped[u])n=r.value;else if(e.isRoot)this.adapt("",this.data),n=this.data;else n=Ns(this,e);a[u]=n}else n=a[u];if(!t.noUnwrap&&(r=this.wrapped[u]))n=r.get();if(e.isRoot&&t.fullRootGet)for(o in this.mappings)n[o]=this.mappings[o].getValue();return n===py?void 0:n}function Ns(e,t){var n,i,r,s;if(n=e.get(t.parent),s=e.wrapped[t.parent.str])n=s.get();if(null!==n&&void 0!==n){if(!(i=e.cacheMap[t.parent.str]))e.cacheMap[t.parent.str]=[t.str];else if(-1===i.indexOf(t.str))i.push(t.str);if("object"==typeof n&&!(t.lastKey in n))return e.cache[t.str]=py;else return r=n[t.lastKey],e.adapt(t.str,r,!1),e.cache[t.str]=r,r}}function Ds(){var e;for(e in this.computations)this.computations[e].init(this)}function Is(e,t){var n=this.mappings[e.str]=new by(e,t);return n.initViewmodel(this),n}function Ls(e,t){var n,i=e.str;if(t){if(t.implicit)this.implicitChanges[i]=!0;if(t.noCascade)this.noCascade[i]=!0}if(n=this.computations[i])n.invalidate();if(-1===this.changes.indexOf(e))this.changes.push(e);var r=t?t.keepExistingWrapper:!1;if(this.clearCache(i,r),this.ready)this.onchange()}function Vs(e,t,n,i){var r,s,o,a;if(this.mark(e),i&&i.compare){o=Ms(i.compare);try{r=t.map(o),s=n.map(o)}catch(u){m('merge(): "%s" comparison failed. Falling back to identity checking',e),r=t,s=n}}else r=t,s=n;a=xy(r,s),this.smartUpdate(e,n,a,t.length!==n.length)}function Us(e){return JSON.stringify(e)}function Ms(e){if(e===!0)return Us;if("string"==typeof e){if(!Ey[e])Ey[e]=function(t){return t[e]};return Ey[e]}if("function"==typeof e)return e;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Ws(e,t){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];if(!t.isStatic)if(n=this.mappings[e.firstKey])n.register(e,t,s);else{if(i=this.deps[s]||(this.deps[s]={}),r=i[e.str]||(i[e.str]=[]),r.push(t),!this.depsMap[s])this.depsMap[s]={};if(!e.isRoot)zs(this,e,s)}}function zs(e,t,n){for(var i,r,s;!t.isRoot;){if(i=e.depsMap[n],r=i[t.parent.str]||(i[t.parent.str]=[]),s=t.str,void 0===r["_"+s])r["_"+s]=0,r.push(t);r["_"+s]+=1,t=t.parent}}function Bs(){return this.captureGroups.pop()}function qs(e){this.data=e,this.clearCache("")}function $s(e,t){var n,i,r,s,o=void 0===arguments[2]?{}:arguments[2];if(!o.noMapping)if(n=this.mappings[e.firstKey])return n.set(e,t);if(i=this.computations[e.str]){if(i.setting)return;i.set(t),t=i.get()}if(!a(this.cache[e.str],t)){if(r=this.wrapped[e.str],r&&r.reset)if(s=r.reset(t)!==!1)t=r.get();if(!i&&!s)Qs(this,e,t);if(!o.silent)this.mark(e);else this.clearCache(e.str)}}function Qs(e,t,n){var i,r,s,o;if(s=function(){if(i.set)i.set(t.lastKey,n);else r=i.get(),o()},o=function(){if(!r)r=Yg(t.lastKey),e.set(t.parent,r,{silent:!0});r[t.lastKey]=n},i=e.wrapped[t.parent.str])s();else if(r=e.get(t.parent),i=e.wrapped[t.parent.str])s();else o()}function Zs(e,t,n){var i,r,s,o=this;if(r=n.length,n.forEach(function(t,n){if(-1===t)o.mark(e.join(n),Ty)}),this.set(e,t,{silent:!0}),i=this.deps["default"][e.str])i.filter(Hs).forEach(function(e){return e.shuffle(n,t)});if(r!==t.length){for(this.mark(e.join("length"),Py),s=n.touchedFrom;s<t.length;s+=1)this.mark(e.join(s));for(s=t.length;r>s;s+=1)this.mark(e.join(s),Ty)}}function Hs(e){return"function"==typeof e.shuffle}function Ks(){var e,t=this;for(Object.keys(this.cache).forEach(function(e){return t.clearCache(e)});e=this.unresolvedImplicitDependencies.pop();)e.teardown()}function Gs(e,t){var n,i,r,s=void 0===arguments[2]?"default":arguments[2];if(!t.isStatic){if(n=this.mappings[e.firstKey])return n.unregister(e,t,s);if(i=this.deps[s][e.str],r=i.indexOf(t),-1===r)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");if(i.splice(r,1),!e.isRoot)Ys(this,e,s)}}function Ys(e,t,n){for(var i,r;!t.isRoot;){if(i=e.depsMap[n],r=i[t.parent.str],r["_"+t.str]-=1,!r["_"+t.str])I(r,t),r["_"+t.str]=void 0;t=t.parent}}function Js(e){this.hook=new nu(e),this.inProcess={},this.queue={}}function Xs(e,t){return e[t._guid]||(e[t._guid]=[])}function eo(e,t){var n=Xs(e.queue,t);for(e.hook.fire(t);n.length;)eo(e,n.shift());delete e.queue[t._guid]}function to(e,t){var n,i={};for(n in t)i[n]=no(e,n,t[n]);return i}function no(e,t,n){var i,r;if("function"==typeof n)i=ro(n,e);if("string"==typeof n)i=io(e,n);if("object"==typeof n){if("string"==typeof n.get)i=io(e,n.get);else if("function"==typeof n.get)i=ro(n.get,e);else l("`%s` computation must have a `get()` method",t);if("function"==typeof n.set)r=ro(n.set,e)}return{getter:i,setter:r}}function io(e,t){var n,i,r;if(n="return ("+t.replace(Ly,function(e,t){return i=!0,'__ractive.get("'+t+'")'})+");",i)n="var __ractive = this; "+n;return r=new Function(n),i?r.bind(e):r}function ro(e,t){return/this/.test(e.toString())?e.bind(t):e}function so(t){var n,r,s=void 0===arguments[1]?{}:arguments[1],o=void 0===arguments[2]?{}:arguments[2];if(Qb.DEBUG)Ca();if(uo(t,o),xa(t,"data",{get:fo}),Vy.fire(t,s),zy.forEach(function(e){t[e]=i(wa(t.constructor[e]||null),s[e])}),r=new Ny({adapt:oo(t,t.adapt,s),data:zf.init(t.constructor,t,s),computed:Iy(t,i(wa(t.constructor.prototype.computed),s.computed)),mappings:o.mappings,ractive:t,onchange:function(){return mu.addRactive(t)}}),t.viewmodel=r,r.init(),bd.init(t.constructor,t,s),Uy.fire(t),My.begin(t),t.template){var a=void 0;if(o.cssIds||t.cssId)if(a=o.cssIds?o.cssIds.slice():[],t.cssId)a.push(t.cssId);t.fragment=new yb({template:t.template,root:t,owner:t,cssIds:a})}if(My.end(t),n=e(t.el)){var u=t.render(n,t.append);if(Qb.DEBUG_PROMISES)u["catch"](function(e){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:t}),e.stack&&c(e.stack),e})}}function oo(e,t,n){function i(t){if("string"==typeof t)if(t=g("adaptors",e,t),!t)l(Da(t,"adaptor"));return t}var r,s,o;if(t=t.map(i),r=N(n.adapt).map(i),r=ao(t,r),s="magic"in n?n.magic:e.magic,o="modifyArrays"in n?n.modifyArrays:e.modifyArrays,s){if(!na)throw new Error("Getters and setters (magic mode) are not supported in this browser");if(o)r.push(ty);r.push(ey)}if(o)r.push(Kg);return r}function ao(e,t){for(var n=e.slice(),i=t.length;i--;)if(!~n.indexOf(t[i]))n.push(t[i]);return n}function uo(e,t){if(e._guid="r-"+Wy++,e._subs=wa(null),e._config={},e._twowayBindings=wa(null),e._animations=[],e.nodes={},e._liveQueries=[],e._liveComponentQueries=[],e._boundFunctions=[],e._observers=[],t.component)e.parent=t.parent,e.container=t.container||null,e.root=e.parent.root,e.component=t.component,t.component.instance=e,e._inlinePartials=t.inlinePartials;else e.root=e,e.parent=e.container=null}function fo(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function ho(e,t,n){this.parentFragment=e.parentFragment,this.callback=n,this.fragment=new yb({template:t,root:e.root,owner:this}),this.update()}function lo(e,t,n){var i;if(t.r)i=Qd(e,t.r,n);else if(t.x)i=new Gd(e,e.parentFragment,t.x,n);else if(t.rx)i=new ep(e,t.rx,n);return i}function co(e){return 1===e.length&&e[0].t===Kf}function po(e,t){var n;for(n in t)if(t.hasOwnProperty(n))mo(e.instance,e.root,n,t[n])}function mo(e,t,n,i){if("string"!=typeof i)l("Components currently only support simple events - you cannot include arguments. Sorry!");e.on(n,function(){var e,n;if(arguments.length&&arguments[0]&&arguments[0].node)e=Array.prototype.shift.call(arguments);return n=Array.prototype.slice.call(arguments),Wu(t,i,{event:e,args:n}),!1})}function vo(e,t){var n,i;if(!t)throw new Error('Component "'+this.name+'" not found');if(n=this.parentFragment=e.parentFragment,i=n.root,this.root=i,this.type=oh,this.name=e.template.e,this.index=e.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],$y(this,t,e.template.a,e.template.f,e.template.p),Qy(this,e.template.v),e.template.t0||e.template.t1||e.template.t2||e.template.o)m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance});Zy(this)}function go(e,t){function n(n){n.rebind(e,t)}var i;this.resolvers.forEach(n);for(var r in this.yielders)if(this.yielders[r][0])n(this.yielders[r][0]);if(i=this.root._liveComponentQueries["_"+this.name])i._makeDirty()}function yo(){var e=this.instance;return e.render(this.parentFragment.getNode()),this.rendered=!0,e.fragment.detach()}function bo(){return this.instance.fragment.toString()}function wo(){var e=this.instance;if(this.resolvers.forEach(Z),xo(this),e._observers.forEach(K),e.fragment.unbind(),e.viewmodel.teardown(),e.fragment.rendered&&e.el.__ractive_instances__)I(e.el.__ractive_instances__,e);Xy.fire(e)}function xo(e){var t,n;t=e.root;do if(n=t._liveComponentQueries["_"+e.name])n._remove(e);while(t=t.parent)}function ko(e){this.shouldDestroy=e,this.instance.unrender()}function Eo(e){var t=this;this.owner=e.owner,this.parent=this.owner.parentFragment,this.root=e.root,this.pElement=e.pElement,this.context=e.context,this.index=e.index,this.key=e.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in e?e.cssIds:this.parent?this.parent.cssIds:null,this.items=e.template.map(function(n,i){return _o({parentFragment:t,pElement:e.pElement,template:n,index:i})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function _o(e){if("string"==typeof e.template)return new Nd(e);switch(e.template.t){case ah:return new ob(e);case Kf:return new op(e);case Yf:return new Sp(e);case Gf:return new qp(e);case eh:var t=void 0;if(t=Fg(e.parentFragment.root,e.template.e))return new nb(e,t);else return new bg(e);case th:return new Tg(e);case nh:return new rb(e);case fh:return new ub(e);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function Ao(e,t){if(!this.owner||this.owner.hasContext)k(this,"context",e,t);this.items.forEach(function(n){if(n.rebind)n.rebind(e,t)})}function So(){var e;if(1===this.items.length)e=this.items[0].render();else e=document.createDocumentFragment(),this.items.forEach(function(t){e.appendChild(t.render())});return this.rendered=!0,e}function Co(e){if(!this.items)return"";else return this.items.map(e?Po:Oo).join("")}function Oo(e){return e.toString()}function Po(e){return e.toString(!0)}function To(){if(this.bound)this.items.forEach(Fo),this.bound=!1}function Fo(e){if(e.unbind)e.unbind()}function Ro(e){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(t){return t.unrender(e)}),this.rendered=!1}function jo(e){var t,n,i,r,s;if(e=e||{},"object"!=typeof e)throw new Error("The reset method takes either no arguments, or an object containing new data");if((n=this.viewmodel.wrapped[""])&&n.reset){if(n.reset(e)===!1)this.viewmodel.reset(e)}else this.viewmodel.reset(e);for(i=bd.reset(this),r=i.length;r--;)if(wb.indexOf(i[r])>-1){s=!0;break}if(s){var o=void 0;if(this.viewmodel.mark(Za),o=this.component)o.shouldDestroy=!0;if(this.unrender(),o)o.shouldDestroy=!1;if(this.fragment.template!==this.template)this.fragment.unbind(),this.fragment=new yb({template:this.template,root:this,owner:this});t=this.render(this.el,this.anchor)}else t=mu.start(this,!0),this.viewmodel.mark(Za),mu.end();return xb.fire(this,e),t}function No(e){var t,n;if(fd.init(null,this,{template:e}),t=this.transitionsEnabled,this.transitionsEnabled=!1,n=this.component)n.shouldDestroy=!0;if(this.unrender(),n)n.shouldDestroy=!1;this.fragment.unbind(),this.fragment=new yb({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=t}function Do(e,t){var n,i;if(i=mu.start(this,!0),f(e)){n=e;for(e in n)if(n.hasOwnProperty(e))t=n[e],Io(this,e,t)}else Io(this,e,t);return mu.end(),i}function Io(e,t,n){if(t=_(C(t)),t.isPattern)A(e,t).forEach(function(t){e.viewmodel.set(t,n)});else e.viewmodel.set(t,n)}function Lo(e,t){return Ha(this,e,void 0===t?-1:-t)}function Vo(){var e;if(this.fragment.unbind(),this.viewmodel.teardown(),this._observers.forEach(K),this.fragment.rendered&&this.el.__ractive_instances__)I(this.el.__ractive_instances__,this);return this.shouldDestroy=!0,e=this.fragment.rendered?this.unrender():ou.resolve(),Fb.fire(this),this._boundFunctions.forEach(Uo),e}function Uo(e){delete e.fn[e.prop]}function Mo(e){var t=this;if("string"!=typeof e)throw new TypeError(ja);var n=void 0;if(/\*/.test(e))return n={},A(this,_(C(e))).forEach(function(e){n[e.str]=!t.viewmodel.get(e)}),this.set(n);else return this.set(e,!this.get(e))}function Wo(){return this.fragment.toString(!0)}function zo(){var e,t;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),ou.resolve();for(e=mu.start(this,!0),t=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(t),I(this.el.__ractive_instances__,this),Db.fire(this),mu.end(),e}function Bo(e){var t;return e=_(e)||Za,t=mu.start(this,!0),this.viewmodel.mark(e),mu.end(),Vb.fire(this,e),t}function qo(e,t){var n,i,r;if("string"==typeof e&&!t)r=this._twowayBindings[e];else{r=[];for(i in this._twowayBindings)if(!e||_(i).equalsOrStartsWith(e))r.push.apply(r,this._twowayBindings[i])}return n=$o(this,r),this.set(n)}function $o(e,t){var n={},i=[];if(t.forEach(function(e){var t,r;if(!e.radioName||e.element.node.checked)if(!e.checkboxName){if(t=e.attribute.value,r=e.getValue(),!j(t,r))if(!a(t,r))n[e.keypath.str]=r}else if(!i[e.keypath.str]&&!e.changed())i.push(e.keypath),i[e.keypath.str]=e}),i.length)i.forEach(function(e){var t,r,s;if(t=i[e.str],r=t.attribute.value,s=t.getValue(),!j(r,s))n[e.str]=s});return n}function Qo(e,t){return"function"==typeof t&&/_super/.test(e)}function Zo(e){for(var t={};e;)if(Ho(e,t),Go(e,t),e._Parent!==Qb)e=e._Parent;else e=!1;return t}function Ho(e,t){vd.forEach(function(n){Ko(n.useDefaults?e.prototype:e,t,n.name)})}function Ko(e,t,n){var i,r=Object.keys(e[n]);if(r.length){if(!(i=t[n]))i=t[n]={};r.filter(function(e){return!(e in i)}).forEach(function(t){return i[t]=e[n][t]})}}function Go(e,t){Object.keys(e.prototype).forEach(function(n){if("computed"!==n){var i=e.prototype[n];if(!(n in t))t[n]=i._method?i._method:i;else if("function"==typeof t[n]&&"function"==typeof i&&t[n]._method){var r=void 0,s=i._method;if(s)i=i._method;if(r=Wb(t[n]._method,i),s)r._method=r;t[n]=r}}})}function Yo(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];if(!t.length)return Jo(this);else return t.reduce(Jo,this)}function Jo(e){var t,n,r=void 0===arguments[1]?{}:arguments[1];if(r.prototype instanceof Qb)r=zb(r);if(t=function(e){if(!(this instanceof t))return new t(e);else return void By(this,e)},n=wa(e.prototype),n.constructor=t,ka(t,{defaults:{value:n},extend:{value:Yo,writable:!0,configurable:!0},_Parent:{value:e}}),bd.extend(e,n,r),zf.extend(e,n,r),r.computed)n.computed=i(wa(e.prototype.computed),r.computed);return t.prototype=n,t}var Xo,ea,ta,na,ia,ra,sa,oa=3,aa={el:void 0,append:!1,template:{v:oa,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},ua=aa,fa={linear:function(e){return e},easeIn:function(e){return Math.pow(e,3)},easeOut:function(e){return Math.pow(e-1,3)+1},easeInOut:function(e){if((e/=.5)<1)return.5*Math.pow(e,3);else return.5*(Math.pow(e-2,3)+2)}};Xo="object"==typeof document,ea="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),ta="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),na=!0}catch(ha){na=!1}if(ia={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},"undefined"==typeof document)ra=!1;else ra=document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");sa=["o","ms","moz","webkit"];var la,ca,da,pa,ma,va,ga,ya,ba;if(!ra)la=function(e,t){if(t&&t!==ia.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(e)};else la=function(e,t){if(!t||t===ia.html)return document.createElement(e);else return document.createElementNS(t,e)};if(!Xo)ca=null;else{for(da=la("div"),pa=["matches","matchesSelector"],ba=function(e){return function(t,n){return t[e](n)}},ga=pa.length;ga--&&!ca;)if(ma=pa[ga],da[ma])ca=ba(ma);else for(ya=sa.length;ya--;)if(va=sa[ga]+ma.substr(0,1).toUpperCase()+ma.substring(1),da[va]){ca=ba(va);break}if(!ca)ca=function(e,t){var n,i,r;if(i=e.parentNode,!i)da.innerHTML="",i=da,e=e.cloneNode(),da.appendChild(e);for(n=i.querySelectorAll(t),r=n.length;r--;)if(n[r]===e)return!0;return!1}}var wa,xa,ka,Ea=null;try{if(Object.defineProperty({},"test",{value:0}),Xo)Object.defineProperty(document.createElement("div"),"test",{value:0});xa=Object.defineProperty}catch(_a){xa=function(e,t,n){e[t]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(_a){throw _a}if(Xo)Object.defineProperties(la("div"),{test:{value:0}});ka=Object.defineProperties}catch(_a){ka=function(e,t){var n;for(n in t)if(t.hasOwnProperty(n))xa(e,n,t[n])}}try{Object.create(null),wa=Object.create}catch(_a){wa=function(){var e=function(){};return function(t,n){var i;if(null===t)return{};if(e.prototype=t,i=new e,n)Object.defineProperties(i,n);return i}}()}var Aa,Sa,Ca,Oa=Object.prototype.hasOwnProperty,Pa=Object.prototype.toString,Ta=/^\[object (?:Array|FileList)\]$/,Fa=function(){},Ra={};if(ta)!function(){var e=["%cRactive.js %c0.7.3 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],t="You're running Ractive 0.7.3 in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Ca=function(){var n=!!console.groupCollapsed;if(console[n?"groupCollapsed":"log"].apply(console,e),console.log(t),n)console.groupEnd(e);Ca=Fa},Sa=function(e,t){if(Ca(),"object"==typeof t[t.length-1]){var n=t.pop(),i=n?n.ractive:null;if(i){var r=void 0;if(i.component&&(r=i.component.name))e="<"+r+"> "+e;var s=void 0;if(s=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))t.push(s)}}console.warn.apply(console,["%cRactive.js: %c"+e,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(t))},Aa=function(){console.log.apply(console,arguments)}}();else Sa=Aa=Ca=Fa;var ja="Bad arguments",Na='A function was specified for "%s" %s, but no %s was returned',Da=function(e,t){return'Missing "'+e+'" '+t+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+t+"s"},Ia=function(e,t,n,i){if(e===t)return b(t);if(i){var r=g("interpolators",n,i);if(r)return r(e,t)||b(t);l(Da(i,"interpolator"))}return Ua.number(e,t)||Ua.array(e,t)||Ua.object(e,t)||b(t)},La=Ia,Va={number:function(e,t){var n;if(!u(e)||!u(t))return null;if(e=+e,t=+t,n=t-e,!n)return function(){return e};else return function(t){return e+t*n}},array:function(e,t){var n,i,r,o;if(!s(e)||!s(t))return null;for(n=[],i=[],o=r=Math.min(e.length,t.length);o--;)i[o]=La(e[o],t[o]);for(o=r;o<e.length;o+=1)n[o]=e[o];for(o=r;o<t.length;o+=1)n[o]=t[o];return function(e){for(var t=r;t--;)n[t]=i[t](e);return n}},object:function(e,t){var n,i,r,s,o;if(!f(e)||!f(t))return null;n=[],s={},r={};for(o in e)if(Oa.call(e,o))if(Oa.call(t,o))n.push(o),r[o]=La(e[o],t[o]);else s[o]=e[o];for(o in t)if(Oa.call(t,o)&&!Oa.call(e,o))s[o]=t[o];return i=n.length,function(e){for(var t,o=i;o--;)t=n[o],s[t]=r[t](e);return s}}},Ua=Va,Ma=w,Wa={},za=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,Ba=/\*/,qa={},$a=function(e){var t=e.split(".");if(this.str=e,"@"===e[0])this.isSpecial=!0,this.value=E(e);this.firstKey=t[0],this.lastKey=t.pop(),this.isPattern=Ba.test(e),this.parent=""===e?null:_(t.join(".")),this.isRoot=!e};$a.prototype={equalsOrStartsWith:function(e){return e===this||this.startsWith(e)},join:function(e){return _(this.isRoot?String(e):this.str+"."+e)},replace:function(e,t){if(this===e)return t;if(this.startsWith(e))return null===t?t:_(this.str.replace(e.str+".",t.str+"."));else return void 0},startsWith:function(e){if(!e)return!1;else return e&&this.str.substr(0,e.str.length+1)===e.str+"."},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=Ma(this.str))}};var Qa,Za=_(""),Ha=O,Ka="Cannot add to a non-numeric value",Ga=P;if("undefined"==typeof window)Qa=null;else!function(e,t,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<e.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[e[i]+"RequestAnimationFrame"];if(!n.requestAnimationFrame)r=n.setTimeout,n.requestAnimationFrame=function(e){var n,i,s;return n=Date.now(),i=Math.max(0,16-(n-t)),s=r(function(){e(n+i)},i),t=n+i,s}}}(sa,0,window),Qa=window.requestAnimationFrame;var Ya,Ja=Qa;if("undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now)Ya=function(){return window.performance.now()};else Ya=function(){return Date.now()};var Xa=Ya,eu={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};T.prototype.fire=function(e,t){function n(n){if(e[n])return t?e[n](t):e[n](),!0;else return void 0}if(n(this.method),!e[this.method]&&this.deprecate&&n(this.deprecate.deprecated))if(this.deprecate.message)m(this.deprecate.message);else m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement);t?e.fire(this.event,t):e.fire(this.event)};var tu,nu=T,iu={},ru={},su={};if("function"==typeof Promise)tu=Promise;else tu=function(e){var t,n,i,r,s,o,a=[],u=[],f=iu;i=function(e){return function(i){if(f===iu)t=i,f=e,n=U(f===ru?a:u,t),V(n)}},r=i(ru),s=i(su);try{e(r,s)}catch(h){s(h)}return o={then:function(e,t){
var i=new tu(function(r,s){var o=function(e,t,n){if("function"==typeof e)t.push(function(t){var n;try{n=e(t),M(i,n,r,s)}catch(o){s(o)}});else t.push(n)};if(o(e,a,r),o(t,u,s),f!==iu)V(n)});return i}},o["catch"]=function(e){return this.then(null,e)},o},tu.all=function(e){return new tu(function(t,n){var i,r,s,o=[];if(!e.length)return void t(o);for(s=function(e,r){if(e&&"function"==typeof e.then)e.then(function(e){o[r]=e,--i||t(o)},n);else o[r]=e,--i||t(o)},i=r=e.length;r--;)s(e[r],r)})},tu.resolve=function(e){return new tu(function(t){t(e)})},tu.reject=function(e){return new tu(function(t,n){n(e)})};var ou=tu,au=function(e){do if(void 0!==e.context)return e.context;while(e=e.parent);return Za},uu=W,fu=function(e,t){if(this.callback=e,this.parent=t,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,t)t.addChild(this)};fu.prototype={addChild:function(e){this.children.push(e),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,J(this)},decrementTotal:function(){this.totalChildren-=1,J(this)},add:function(e){var t=e.isIntro?this.intros:this.outros;t.push(e)},addDecorator:function(e){this.decoratorQueue.push(e)},remove:function(e){var t=e.isIntro?this.intros:this.outros;I(t,e),J(this)},init:function(){this.ready=!0,J(this)},detachNodes:function(){this.decoratorQueue.forEach(Q),this.detachQueue.forEach(G),this.children.forEach(Y)}};var hu,lu,cu=fu,du=[],pu=new nu("change");lu={start:function(e,t){var n,i;if(t)n=new ou(function(e){return i=e});if(hu={previousBatch:hu,transitionManager:new cu(i,hu&&hu.transitionManager),views:[],tasks:[],ractives:[],instance:e},e)hu.ractives.push(e);return n},end:function(){if(X(),hu.transitionManager.init(),!hu.previousBatch&&hu.instance)hu.instance.viewmodel.changes=[];hu=hu.previousBatch},addRactive:function(e){if(hu)F(hu.ractives,e)},registerTransition:function(e){e._manager=hu.transitionManager,hu.transitionManager.add(e)},registerDecorator:function(e){hu.transitionManager.addDecorator(e)},addView:function(e){hu.views.push(e)},addUnresolved:function(e){du.push(e)},removeUnresolved:function(e){I(du,e)},detachWhenReady:function(e){hu.transitionManager.detachQueue.push(e)},scheduleTask:function(e,t){var n;if(!hu)e();else{for(n=hu;t&&n.previousBatch;)n=n.previousBatch;n.tasks.push(e)}}};var mu=lu,vu=[],gu={tick:function(){var e,t,n;for(n=Xa(),mu.start(),e=0;e<vu.length;e+=1)if(t=vu[e],!t.tick(n))vu.splice(e--,1);if(mu.end(),vu.length)Ja(gu.tick);else gu.running=!1},add:function(e){if(vu.push(e),!gu.running)gu.running=!0,Ja(gu.tick)},abort:function(e,t){for(var n,i=vu.length;i--;)if(n=vu[i],n.root===t&&n.keypath===e)n.stop()}},yu=gu,bu=function(e){var t;this.startTime=Date.now();for(t in e)if(e.hasOwnProperty(t))this[t]=e[t];this.interpolator=La(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};bu.prototype={tick:function(){var e,t,n,i,r,s;if(s=this.keypath,this.running){if(i=Date.now(),e=i-this.startTime,e>=this.duration){if(null!==s)mu.start(this.root),this.root.viewmodel.set(s,this.to),mu.end();if(this.step)this.step(1,this.to);if(this.complete(this.to),r=this.root._animations.indexOf(this),-1===r)m("Animation was not found");return this.root._animations.splice(r,1),this.running=!1,!1}if(t=this.easing?this.easing(e/this.duration):e/this.duration,null!==s)n=this.interpolator(t),mu.start(this.root),this.root.viewmodel.set(s,n),mu.end();if(this.step)this.step(t,n);return!0}return!1},stop:function(){var e;if(this.running=!1,e=this.root._animations.indexOf(this),-1===e)m("Animation was not found");this.root._animations.splice(e,1)}};var wu=bu,xu=ne,ku={stop:Fa},Eu=re,_u=new nu("detach"),Au=se,Su=oe,Cu=function(){var e,t,n;if(e=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],t=this.selector,n=e.indexOf(t),-1!==n)e.splice(n,1),e[t]=null},Ou=function(e,t){var n,i,r,s,o,a,u,f,h,l;for(n=ue(e.component||e._ractive.proxy),i=ue(t.component||t._ractive.proxy),r=D(n),s=D(i);r&&r===s;)n.pop(),i.pop(),o=r,r=D(n),s=D(i);if(r=r.component||r,s=s.component||s,h=r.parentFragment,l=s.parentFragment,h===l)return a=h.items.indexOf(r),u=l.items.indexOf(s),a-u||n.length-i.length;if(f=o.fragments)return a=f.indexOf(h),u=f.indexOf(l),a-u||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},Pu=function(e,t){var n;if(e.compareDocumentPosition)return n=e.compareDocumentPosition(t),2&n?1:-1;else return Ou(e,t)},Tu=function(){this.sort(this._isComponentQuery?Ou:Pu),this._dirty=!1},Fu=function(){var e=this;if(!this._dirty)this._dirty=!0,mu.scheduleTask(function(){e._sort()})},Ru=function(e){var t=this.indexOf(this._isComponentQuery?e.instance:e);if(-1!==t)this.splice(t,1)},ju=fe,Nu=he,Du=le,Iu=ce,Lu=de,Vu=pe,Uu={enqueue:function(e,t){if(e.event)e._eventQueue=e._eventQueue||[],e._eventQueue.push(e.event);e.event=t},dequeue:function(e){if(e._eventQueue&&e._eventQueue.length)e.event=e._eventQueue.pop();else delete e.event}},Mu=Uu,Wu=me,zu=ye,Bu=be,qu={capture:!0,noUnwrap:!0,fullRootGet:!0},$u=we,Qu=new nu("insert"),Zu=ke,Hu=function(e,t,n,i){this.root=e,this.keypath=t,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:e};Hu.prototype={init:function(e){if(this.value=this.root.get(this.keypath.str),e!==!1)this.update();else this.oldValue=this.value},setValue:function(e){var t=this;if(!a(e,this.value))if(this.value=e,this.defer&&this.ready)mu.scheduleTask(function(){return t.update()});else this.update()},update:function(){if(!this.updating)this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1}};var Ku,Gu=Hu,Yu=Ee,Ju=Array.prototype.slice;Ku=function(e,t,n,i){if(this.root=e,this.callback=n,this.defer=i.defer,this.keypath=t,this.regex=new RegExp("^"+t.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer)this.proxies=[];this.context=i&&i.context?i.context:e},Ku.prototype={init:function(e){var t,n;if(t=Yu(this.root,this.keypath),e!==!1){for(n in t)if(t.hasOwnProperty(n))this.update(_(n))}else this.values=t},update:function(e){var t,n=this;if(!e.isPattern){if(!this.root.viewmodel.implicitChanges[e.str])if(this.defer&&this.ready)return void mu.scheduleTask(function(){return n.getProxy(e).update()});else return void this.reallyUpdate(e)}else{t=Yu(this.root,e);for(e in t)if(t.hasOwnProperty(e))this.update(_(e))}},reallyUpdate:function(e){var t,n,i,r;if(t=e.str,n=this.root.viewmodel.get(e),this.updating)return void(this.values[t]=n);if(this.updating=!0,!a(n,this.values[t])||!this.ready)i=Ju.call(this.regex.exec(t),1),r=[n,this.values[t],t].concat(i),this.values[t]=n,this.callback.apply(this.context,r);this.updating=!1},getProxy:function(e){var t=this;if(!this.proxies[e.str])this.proxies[e.str]={update:function(){return t.reallyUpdate(e)}};return this.proxies[e.str]}};var Xu,ef,tf,nf,rf,sf,of=Ku,af=_e,uf={},ff=Ae,hf=Se,lf=function(e){return e.trim()},cf=function(e){return""!==e},df=Ce,pf=Oe,mf=Pe,vf=Te,gf=Array.prototype,yf=function(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];var o,a,u,f,h=[];if(t=_(C(t)),o=this.viewmodel.get(t),a=o.length,!s(o))throw new Error("Called ractive."+e+"('"+t.str+"'), but '"+t.str+"' does not refer to an array");if(h=vf(o,e,i),f=gf[e].apply(o,i),u=mu.start(this,!0).then(function(){return f}),h)this.viewmodel.smartUpdate(t,o,h);else this.viewmodel.mark(t);return mu.end(),u}},bf=yf("pop"),wf=yf("push"),xf="/* Ractive.js component styles */\n",kf=[],Ef=!1;if(!Xo)Xu={add:Fa,apply:Fa};else tf=document.createElement("style"),tf.type="text/css",nf=document.getElementsByTagName("head")[0],sf=!1,rf=tf.styleSheet,ef=function(){var e=xf+kf.map(function(e){return"\n/* {"+e.id+"} */\n"+e.styles}).join("\n");if(rf)rf.cssText=e;else tf.innerHTML=e;if(!sf)nf.appendChild(tf),sf=!0},Xu={add:function(e){kf.push(e),Ef=!0},apply:function(){if(Ef)ef(),Ef=!1}};var _f,Af,Sf=Xu,Cf=Re,Of=new nu("render"),Pf=new nu("complete"),Tf={extend:function(e,t,n){t.adapt=Ne(t.adapt,N(n.adapt))},init:function(){}},Ff=Tf,Rf=De,jf=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,Nf=/\/\*.*?\*\//g,Df=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,If=/^@media/,Lf=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,Vf=1,Uf={name:"css",extend:function(e,t,n){if(n.css){var i=Vf++,r=n.noCssTransform?n.css:Rf(n.css,i);t.cssId=i,Sf.add({id:i,styles:r})}},init:function(){}},Mf=Uf,Wf={name:"data",extend:function(e,t,n){var i=void 0,r=void 0;if(n.data&&f(n.data))for(i in n.data)if(r=n.data[i],r&&"object"==typeof r)if(f(r)||s(r))m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");t.data=Ue(t.data,n.data)},init:function(e,t,n){var i=Ue(e.prototype.data,n.data);if("function"==typeof i)i=i.call(t);return i||{}},reset:function(e){var t=this.init(e.constructor,e,e.viewmodel);return e.viewmodel.reset(t),!0}},zf=Wf,Bf=/^\s+/;Af=function(e){this.name="ParseError",this.message=e;try{throw new Error(e)}catch(t){this.stack=t.stack}},Af.prototype=Error.prototype,_f=function(e,t){var n,i,r=0;if(this.str=e,this.options=t||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(e){var t=r+e.length+1;return r=t,t},0),this.init)this.init(e,t);for(n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,t):n},_f.prototype={read:function(e){var t,n,i,r;if(!e)e=this.converters;for(t=this.pos,i=e.length,n=0;i>n;n+=1)if(this.pos=t,r=e[n](this))return r;return null},getLinePos:function(e){for(var t,n=0,i=0;e>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return t=e-i,[n+1,t+1,e]},error:function(e){var t=this.getLinePos(this.pos),n=t[0],i=t[1],r=this.lines[t[0]-1],s=0,o=r.replace(/\t/g,function(e,n){if(n<t[1])s+=1;return"  "})+"\n"+new Array(t[1]+s).join(" ")+"^----",a=new Af(""+e+" at line "+n+" character "+i+":\n"+o);throw a.line=t[0],a.character=t[1],a.shortMessage=e,a},matchString:function(e){if(this.str.substr(this.pos,e.length)===e)return this.pos+=e.length,e;else return void 0},matchPattern:function(e){var t;if(t=e.exec(this.remaining()))return this.pos+=t[0].length,t[1]||t[0];else return void 0},allowWhitespace:function(){this.matchPattern(Bf)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},_f.extend=function(e){var t,n,i=this;t=function(e,t){_f.call(this,e,t)},t.prototype=wa(i.prototype);for(n in e)if(Oa.call(e,n))t.prototype[n]=e[n];return t.extend=_f.extend,t};var qf,$f,Qf,Zf=_f,Hf=1,Kf=2,Gf=3,Yf=4,Jf=5,Xf=6,eh=7,th=8,nh=9,ih=10,rh=13,sh=14,oh=15,ah=16,uh=17,fh=18,hh=20,lh=21,ch=22,dh=23,ph=24,mh=25,vh=26,gh=27,yh=30,bh=31,wh=32,xh=33,kh=34,Eh=35,_h=36,Ah=40,Sh=50,Ch=51,Oh=52,Ph=53,Th=54,Fh=60,Rh=61,jh=ze,Nh=/^[^\s=]+/,Dh=/^\s+/,Ih=Be,Lh=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,Vh=qe,Uh={t:ih,exclude:!0},Mh="Expected a JavaScript expression",Wh="Expected closing paren",zh=Qe,Bh=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,qh=Ze;qf=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,$f=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Qf=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var $h,Qh,Zh=function(e){return function(t){var n,i,r,s;for(n=t.pos,i='"',r=!1;!r;)if(s=t.matchPattern(qf)||t.matchPattern($f)||t.matchString(e))if('"'===s)i+='\\"';else if("\\'"===s)i+="'";else i+=s;else if(s=t.matchPattern(Qf))i+="\\u"+("000"+s.charCodeAt(1).toString(16)).slice(-4);else r=!0;return i+='"',JSON.parse(i)}},Hh=Zh('"'),Kh=Zh("'"),Gh=function(e){var t,n;if(t=e.pos,e.matchString('"'))if(n=Kh(e),!e.matchString('"'))return e.pos=t,null;else return{t:lh,v:n};if(e.matchString("'"))if(n=Hh(e),!e.matchString("'"))return e.pos=t,null;else return{t:lh,v:n};return null},Yh=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Jh=He,Xh=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,el=Ke,tl=Ge,nl=function(e){var t,n;if(t=e.pos,e.allowWhitespace(),!e.matchString("{"))return e.pos=t,null;if(n=tl(e),e.allowWhitespace(),!e.matchString("}"))return e.pos=t,null;else return{t:dh,m:n}},il=Ye,rl=function(e){var t,n;if(t=e.pos,e.allowWhitespace(),!e.matchString("["))return e.pos=t,null;if(n=il(e),!e.matchString("]"))return e.pos=t,null;else return{t:ch,m:n}},sl=Je,ol=Xe,al=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;$h=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,Qh=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var ul,fl,hl=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,ll=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,cl=et,dl=function(e){return sl(e)||ol(e)||cl(e)},pl=tt,ml=function(e){var t,n,i,r;if(n=dl(e),!n)return null;for(;n;)if(t=e.pos,i=pl(e))n={t:wh,x:n,r:i};else if(e.matchString("(")){if(e.allowWhitespace(),r=il(e),e.allowWhitespace(),!e.matchString(")"))e.error(Wh);if(n={t:Ah,x:n},r)n.o=r}else break;return n};fl=function(e,t){return function(n){var i;if(i=t(n))return i;if(!n.matchString(e))return null;if(n.allowWhitespace(),i=Pl(n),!i)n.error(Mh);return{s:e,o:i,t:xh}}},function(){var e,t,n,i,r;for(i="! ~ + - typeof".split(" "),r=ml,e=0,t=i.length;t>e;e+=1)n=fl(i[e],r),r=n;ul=r}();var vl,gl,yl=ul;gl=function(e,t){return function(n){var i,r,s;if(r=t(n),!r)return null;for(;;){if(i=n.pos,n.allowWhitespace(),!n.matchString(e))return n.pos=i,r;if("in"===e&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=i,r;if(n.allowWhitespace(),s=t(n),!s)return n.pos=i,r;r={t:_h,s:e,o:[r,s]}}}},function(){var e,t,n,i,r;for(i="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),r=yl,e=0,t=i.length;t>e;e+=1)n=gl(i[e],r),r=n;vl=r}();var bl,wl,xl,kl,El,_l,Al,Sl,Cl=vl,Ol=nt,Pl=it,Tl=rt,Fl=ot,Rl=/^[0-9][1-9]*$/,jl=ut,Nl=ft,Dl=ht,Il=lt,Ll=ct,Vl=dt,Ul=pt,Ml=/^yield\s*/,Wl=mt,zl=vt,Bl=/^\s*else\s*/,ql=gt,$l=/^\s*elseif\s+/,Ql={each:Oh,"if":Sh,"if-with":Th,"with":Ph,unless:Ch},Zl=yt,Hl=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Kl=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,Gl=new RegExp("^("+Object.keys(Ql).join("|")+")\\b"),Yl=Et,Jl="<!--",Xl="-->";bl=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,wl=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,xl={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},kl=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],El=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(xl).join("|")+"));?","g"),_l=/</g,Al=/>/g,Sl=/&/g;var ec,tc,nc,ic,rc,sc,oc,ac=/^\s*\r?\n/,uc=/\r?\n\s*$/,fc=function(e){var t,n,i,r,s;for(t=1;t<e.length;t+=1){if(n=e[t],i=e[t-1],r=e[t-2],Ct(n)&&Ot(i)&&Ct(r))if(uc.test(r)&&ac.test(n))e[t-2]=r.replace(uc,"\n"),e[t]=n.replace(ac,"");if(Pt(n)&&Ct(i))if(uc.test(i)&&Ct(n.f[0])&&ac.test(n.f[0]))e[t-1]=i.replace(uc,"\n"),n.f[0]=n.f[0].replace(ac,"");if(Ct(n)&&Pt(i))if(s=D(i.f),Ct(s)&&uc.test(s)&&ac.test(n))i.f[i.f.length-1]=s.replace(uc,"\n"),e[t]=n.replace(ac,"")}return e},hc=function(e,t,n){var i;if(t)if(i=e[0],"string"==typeof i)if(i=i.replace(t,""),!i)e.shift();else e[0]=i;if(n)if(i=D(e),"string"==typeof i)if(i=i.replace(n,""),!i)e.pop();else e[e.length-1]=i},lc=Tt,cc=/[ \t\f\r\n]+/g,dc=/^(?:pre|script|style|textarea)$/i,pc=/^[ \t\f\r\n]+/,mc=/[ \t\f\r\n]+$/,vc=/^(?:\r\n|\r|\n)/,gc=/(?:\r\n|\r|\n)$/,yc=Ft,bc=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,wc=function(e,t){var n,i,r;for(n=t.length;n--;){if(i=e.indexOf(t[n]),!i)return 0;if(-1!==i){if(!r||r>i)r=i}else;}return r||-1},xc=Rt,kc=/^[^\s"'>\/=]+/,Ec=/^[^\s"'=<>`]+/;tc={"true":!0,"false":!1,undefined:void 0,"null":null},nc=new RegExp("^(?:"+Object.keys(tc).join("|")+")"),ic=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,rc=/\$\{([^\}]+)\}/g,sc=/^\$\{([^\}]+)\}/,oc=/^\s*$/,ec=Zf.extend({init:function(e,t){this.values=t.values,this.allowWhitespace()},postProcess:function(e){if(1!==e.length||!oc.test(this.leftover))return null;else return{value:e[0].v}},converters:[function(e){var t;if(!e.values)return null;if(t=e.matchPattern(sc),t&&e.values.hasOwnProperty(t))return{v:e.values[t]};else return void 0},function(e){var t;if(t=e.matchPattern(nc))return{v:tc[t]};else return void 0},function(e){var t;if(t=e.matchPattern(ic))return{v:+t};else return void 0},function(e){var t,n=Gh(e);if(n&&(t=e.values))return{v:n.v.replace(rc,function(e,n){return n in t?t[n]:n})};else return n},function(e){var t,n;if(!e.matchString("{"))return null;if(t={},e.allowWhitespace(),e.matchString("}"))return{v:t};for(;n=Vt(e);){if(t[n.key]=n.value,e.allowWhitespace(),e.matchString("}"))return{v:t};if(!e.matchString(","))return null}return null},function(e){var t,n;if(!e.matchString("["))return null;if(t=[],e.allowWhitespace(),e.matchString("]"))return{v:t};for(;n=e.read();){if(t.push(n.v),e.allowWhitespace(),e.matchString("]"))return{v:t};if(!e.matchString(","))return null;e.allowWhitespace()}return null}]});var _c,Ac=function(e,t){var n=new ec(e,{values:t});return n.result},Sc=Ut,Cc=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,Oc=/\)\s*$/;_c=Zf.extend({converters:[Pl]});var Pc,Tc=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Fc=/^[\s\n\/>]/,Rc=/^on/,jc=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Nc=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Dc={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Ic={exclude:!0};Pc={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var Lc,Vc=Mt,Uc=zt,Mc=Bt,Wc=/[-\/\\^$*+?.()|[\]{}]/g,zc=qt,Bc=/^<!--\s*/,qc=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,$c=/\s*-->/,Qc=$t,Zc=/^#\s*partial\s+/,Hc=Qt,Kc=Zt,Gc=[Dl,Nl,Zl,Ul,Vl,Il],Yc=[jl],Jc=[Nl,Zl,Vl],Xc=void 0,ed=[Vh,Yl,Vc,Uc],td=[zc,Qc];Xc=Zf.extend({init:function(e,t){var n=t.tripleDelimiters||["{{{","}}}"],i=t.staticDelimiters||["[[","]]"],r=t.staticTripleDelimiters||["[[[","]]]"];if(this.standardDelimiters=t.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Gc},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Yc},{isStatic:!0,isTriple:!1,open:i[0],close:i[1],readers:Jc},{isStatic:!0,isTriple:!0,open:r[0],close:r[1],readers:Yc}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!t.interpolate||t.interpolate.script!==!1,style:!t.interpolate||t.interpolate.style!==!1},t.sanitize===!0)t.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0};this.stripComments=t.stripComments!==!1,this.preserveWhitespace=t.preserveWhitespace,this.sanitizeElements=t.sanitize&&t.sanitize.elements,this.sanitizeEventAttributes=t.sanitize&&t.sanitize.eventAttributes,this.includeLinePositions=t.includeLinePositions},postProcess:function(e){if(!e.length)return{t:[],v:oa};if(this.sectionDepth>0)this.error("A section was left open");return lc(e[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),e[0]},converters:[Hc],sortMustacheTags:function(){this.tags.sort(function(e,t){return t.open.length-e.open.length})}});var nd,id,rd,sd=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],od={fromId:Gt,isHashedId:Yt,isParsed:Jt,getParseOptions:Xt,createHelper:Ht,parse:Kt},ad=od,ud={name:"template",extend:function(e,t,n){var i;if("template"in n)if(i=n.template,"function"==typeof i)t.template=i;else t.template=rn(i,t)},init:function(e,t,n){var i,r;if(i="template"in n?n.template:e.prototype.template,"function"==typeof i)r=i,i=tn(t,r),t._config.template={fn:r,result:i};if(i=rn(i,t),t.template=i.t,i.p)sn(t.partials,i.p)},reset:function(e){var t,n=en(e);if(n)return t=rn(n,e),e.template=t.t,sn(e.partials,t.p,!0),!0;else return void 0}},fd=ud;nd=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],id=function(e,t){this.name=e,this.useDefaults=t},id.prototype={constructor:id,extend:function(e,t,n){this.configure(this.useDefaults?e.defaults:e,this.useDefaults?t:t.constructor,n)},init:function(){},configure:function(e,t,n){var i,r=this.name,s=n[r];i=wa(e[r]);for(var o in s)i[o]=s[o];t[r]=i},reset:function(e){var t=e[this.name],n=!1;return Object.keys(t).forEach(function(e){var i=t[e];if(i._fn){if(i._fn.isOwner)t[e]=i._fn;else delete t[e];n=!0}}),n}},rd=nd.map(function(e){return new id(e,"computed"===e)});var hd,ld,cd,dd,pd,md,vd=rd,gd=on,yd=hn;dd={adapt:Ff,css:Mf,data:zf,template:fd},cd=Object.keys(ua),md=dn(cd.filter(function(e){return!dd[e]})),pd=dn(cd.concat(vd.map(function(e){return e.name}))),ld=[].concat(cd.filter(function(e){return!vd[e]&&!dd[e]}),vd,dd.data,dd.template,dd.css),hd={extend:function(e,t,n){return ln("extend",e,t,n)},init:function(e,t,n){return ln("init",e,t,n)},reset:function(e){return ld.filter(function(t){return t.reset&&t.reset(e)}).map(function(e){return e.name})},order:ld};var bd=hd,wd=pn,xd=mn,kd=vn,Ed=gn,_d=yn,Ad=bn,Sd=wn,Cd=xn,Od=kn,Pd=En,Td=_n,Fd=An,Rd=function(){return t(this.node)},jd=function(e){this.type=Hf,this.text=e.template};jd.prototype={detach:Rd,firstNode:function(){return this.node},render:function(){if(!this.node)this.node=document.createTextNode(this.text);return this.node},toString:function(e){return e?St(this.text):this.text},unrender:function(e){if(e)return this.detach();else return void 0}};var Nd=jd,Dd=Sn,Id=Cn,Ld=function(e,t,n){var i;if(this.ref=t,this.resolved=!1,this.root=e.root,this.parentFragment=e.parentFragment,this.callback=n,i=uu(e.root,t,e.parentFragment),void 0!=i)this.resolve(i);else mu.addUnresolved(this)};Ld.prototype={resolve:function(e){if(this.keypath&&!e)mu.addUnresolved(this);this.resolved=!0,this.keypath=e,this.callback(e)},forceResolution:function(){this.resolve(_(this.ref))},rebind:function(e,t){var n;if(void 0!=this.keypath)if(n=this.keypath.replace(e,t),void 0!==n)this.resolve(n)},unbind:function(){if(!this.resolved)mu.removeUnresolved(this)}};var Vd=Ld,Ud=function(e,t,n){this.parentFragment=e.parentFragment,this.ref=t,this.callback=n,this.rebind()},Md={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};Ud.prototype={rebind:function(){var e,t=this.ref,n=this.parentFragment,i=Md[t];if(!i)throw new Error('Unknown special reference "'+t+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(_("@"+i.prefix+On(this.cached,i)));if(-1!==i.prop.indexOf("index")||-1!==i.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===Oh&&void 0!==(e=On(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(_("@"+i.prefix+e));if(!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated)n=n.owner.component.parentFragment;else n=n.parent}else for(;n;){if(void 0!==(e=On(n,i)))return this.callback(_("@"+i.prefix+e.str));n=n.parent}},unbind:function(){if(this.cached)this.cached.unregisterIndexRef(this)}};var Wd=Ud,zd=function(e,t,n){this.parentFragment=e.parentFragment,this.ref=t,this.callback=n,t.ref.fragment.registerIndexRef(this),this.rebind()};zd.prototype={rebind:function(){var e,t=this.ref.ref;if("k"===t.ref.t)e="k"+t.fragment.key;else e="i"+t.fragment.index;if(void 0!==e)this.callback(_("@"+e))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}};var Bd=zd,qd=Pn;Pn.resolve=function(e){var t,n,i={};for(t in e.refs)n=e.refs[t],i[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var $d,Qd=Tn,Zd=Fn,Hd={},Kd=Function.prototype.bind;$d=function(e,t,n,i){var r,s=this;r=e.root,this.root=r,this.parentFragment=t,this.callback=i,this.owner=e,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(e,t){return Qd(s,e,function(e){s.resolve(t,e)})}),this.ready=!0,this.bubble()},$d.prototype={bubble:function(){if(this.ready)this.uniqueString=jn(this.str,this.keypaths),this.keypath=Nn(this.uniqueString),this.createEvaluator(),this.callback(this.keypath)},unbind:function(){for(var e;e=this.refResolvers.pop();)e.unbind()},resolve:function(e,t){this.keypaths[e]=t,this.bubble()},createEvaluator:function(){var e,t,n,i,r,s=this;if(i=this.keypath,e=this.root.viewmodel.computations[i.str],!e)r=Zd(this.str,this.refResolvers.length),t=this.keypaths.map(function(e){var t;if("undefined"===e)return function(){return void 0};if(e.isSpecial)return t=e.value,function(){return t};else return function(){var t=s.root.viewmodel.get(e,{noUnwrap:!0,fullRootGet:!0});if("function"==typeof t)t=In(t,s.root);return t}}),n={deps:this.keypaths.filter(Dn),getter:function(){var e=t.map(Rn);return r.apply(null,e)}},e=this.root.viewmodel.compute(i,n);else this.root.viewmodel.mark(i)},rebind:function(e,t){this.refResolvers.forEach(function(n){return n.rebind(e,t)})}};var Gd=$d,Yd=function(e,t,n){var i=this;if(this.resolver=t,this.root=t.root,this.parentFragment=n,this.viewmodel=t.root.viewmodel,"string"==typeof e)this.value=e;else if(e.t===yh)this.refResolver=Qd(this,e.n,function(e){i.resolve(e)});else new Gd(t,n,e,function(e){i.resolve(e)})};Yd.prototype={resolve:function(e){if(this.keypath)this.viewmodel.unregister(this.keypath,this);this.keypath=e,this.value=this.viewmodel.get(e),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(e,t){if(this.refResolver)this.refResolver.rebind(e,t)},setValue:function(e){this.value=e,this.resolver.bubble()},unbind:function(){if(this.keypath)this.viewmodel.unregister(this.keypath,this);if(this.refResolver)this.refResolver.unbind()},forceResolution:function(){if(this.refResolver)this.refResolver.forceResolution()}};var Jd=Yd,Xd=function(e,t,n){var i,r,s,o,a=this;if(this.parentFragment=o=e.parentFragment,this.root=i=e.root,this.mustache=e,this.ref=r=t.r,this.callback=n,this.unresolved=[],s=uu(i,r,o))this.base=s;else this.baseResolver=new Vd(this,r,function(e){a.base=e,a.baseResolver=null,a.bubble()});this.members=t.m.map(function(e){return new Jd(e,a,o)}),this.ready=!0,this.bubble()};Xd.prototype={getKeypath:function(){var e=this.members.map(Ln);if(!e.every(Vn)||this.baseResolver)return null;else return this.base.join(e.join("."))},bubble:function(){if(this.ready&&!this.baseResolver)this.callback(this.getKeypath())},unbind:function(){this.members.forEach(Z)},rebind:function(e,t){var n;if(this.base){var i=this.base.replace(e,t);if(i&&i!==this.base)this.base=i,n=!0}if(this.members.forEach(function(i){if(i.rebind(e,t))n=!0}),n)this.bubble()},forceResolution:function(){if(this.baseResolver)this.base=_(this.ref),this.baseResolver.unbind(),this.baseResolver=null;this.members.forEach(Un),this.bubble()}};var ep=Xd,tp=Mn,np=Wn,ip=zn,rp={getValue:Id,init:tp,resolve:np,rebind:ip},sp=function(e){this.type=Kf,rp.init(this,e)};sp.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:rp.resolve,rebind:rp.rebind,detach:Rd,unbind:Dd,render:function(){if(!this.node)this.node=document.createTextNode(n(this.value));return this.node},unrender:function(e){if(e)t(this.node)},getValue:rp.getValue,setValue:function(e){var t;if(this.keypath&&(t=this.root.viewmodel.wrapped[this.keypath.str]))e=t.get();if(!a(e,this.value))if(this.value=e,this.parentFragment.bubble(),this.node)mu.addView(this)},firstNode:function(){return this.node},toString:function(e){var t=""+n(this.value);return e?St(t):t}};var op=sp,ap=Bn,up=qn,fp=$n,hp=Qn,lp=Zn,cp=Hn,dp=Kn,pp=Gn,mp=Yn,vp=function(e,t){rp.rebind.call(this,e,t)},gp=Xn,yp=ei,bp=li,wp=ci,xp=di,kp=vi,Ep=function(e){if(this.type=Yf,this.subtype=this.currentSubtype=e.template.n,this.inverted=this.subtype===Ch,this.pElement=e.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],e.template.i)this.indexRefs=e.template.i.split(",").map(function(e,t){return{n:e,t:0===t?"k":"i"}});this.renderedFragments=[],this.length=0,rp.init(this,e)};Ep.prototype={bubble:ap,detach:up,find:fp,findAll:hp,findAllComponents:lp,findComponent:cp,findNextNode:dp,firstNode:pp,getIndexRef:function(e){if(this.indexRefs)for(var t=this.indexRefs.length;t--;){var n=this.indexRefs[t];if(n.n===e)return n}},getValue:rp.getValue,
shuffle:mp,rebind:vp,render:gp,resolve:rp.resolve,setValue:yp,toString:bp,unbind:wp,unrender:xp,update:kp};var _p,Ap,Sp=Ep,Cp=gi,Op=yi,Pp=bi,Tp=wi,Fp={};try{la("table").innerHTML="foo"}catch(_a){_p=!0,Ap={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Rp=function(e,t,n){var i,r,s,o,a,u=[];if(null!=e&&""!==e){if(_p&&(r=Ap[t.tagName])){if(i=xi("DIV"),i.innerHTML=r[0]+e+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName)s=i.options[i.selectedIndex]}else if(t.namespaceURI===ia.svg)i=xi("DIV"),i.innerHTML='<svg class="x">'+e+"</svg>",i=i.querySelector(".x");else if(i=xi(t.tagName),i.innerHTML=e,"SELECT"===i.tagName)s=i.options[i.selectedIndex];for(;o=i.firstChild;)u.push(o),n.appendChild(o);if("SELECT"===t.tagName)for(a=u.length;a--;)if(u[a]!==s)u[a].selected=!1}return u},jp=ki,Np=_i,Dp=Ai,Ip=Si,Lp=Ci,Vp=Oi,Up=function(e){this.type=Gf,rp.init(this,e)};Up.prototype={detach:Cp,find:Op,findAll:Pp,firstNode:Tp,getValue:rp.getValue,rebind:rp.rebind,render:Np,resolve:rp.resolve,setValue:Dp,toString:Ip,unbind:Dd,unrender:Lp,update:Vp};var Mp,Wp,zp,Bp,qp=Up,$p=function(){this.parentFragment.bubble()},Qp=Pi,Zp=function(e){if(!this.node)return null;if(ca(this.node,e))return this.node;if(this.fragment&&this.fragment.find)return this.fragment.find(e);else return void 0},Hp=function(e,t){if(t._test(this,!0)&&t.live)(this.liveQueries||(this.liveQueries=[])).push(t);if(this.fragment)this.fragment.findAll(e,t)},Kp=function(e,t){if(this.fragment)this.fragment.findAllComponents(e,t)},Gp=function(e){if(this.fragment)return this.fragment.findComponent(e);else return void 0},Yp=Ti,Jp=Fi,Xp=Ri,em=/^true|on|yes|1$/i,tm=/^[0-9]+$/,nm=function(e,t){var n,i,r;if(r=t.a||{},i={},n=r.twoway,void 0!==n)i.twoway=0===n||em.test(n);if(n=r.lazy,void 0!==n)if(0!==n&&tm.test(n))i.lazy=parseInt(n);else i.lazy=0===n||em.test(n);return i},im=ji;Mp="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Wp="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),zp=function(e){for(var t={},n=e.length;n--;)t[e[n].toLowerCase()]=e[n];return t},Bp=zp(Mp.concat(Wp));var rm=function(e){var t=e.toLowerCase();return Bp[t]||t},sm=function(e,t){var n,i;if(n=t.indexOf(":"),-1!==n)if(i=t.substr(0,n),"xmlns"!==i){if(t=t.substring(n+1),e.name=rm(t),e.namespace=ia[i.toLowerCase()],e.namespacePrefix=i,!e.namespace)throw'Unknown namespace ("'+i+'")';return}e.name=e.element.namespace!==ia.html?rm(t):t},om=Ni,am=Di,um=Ii,fm=Li,hm={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},lm=Vi,cm=Mi,dm=Wi,pm=zi,mm=Bi,vm=qi,gm=$i,ym=Qi,bm=Zi,wm=Hi,xm=Ki,km=Gi,Em=Yi,_m=Ji,Am=Xi,Sm=function(e){this.init(e)};Sm.prototype={bubble:im,init:am,rebind:um,render:fm,toString:lm,unbind:cm,update:Am};var Cm,Om=Sm,Pm=function(e,t){var n,i,r=[];for(n in t)if("twoway"!==n&&"lazy"!==n){if(t.hasOwnProperty(n))if(i=new Om({element:e,name:n,value:t[n],root:e.root}),r[n]=i,"value"!==n)r.push(i)}else;if(i=r.value)r.push(i);return r};if("undefined"!=typeof document)Cm=la("div");var Tm=function(e,t){this.element=e,this.root=e.root,this.parentFragment=e.parentFragment,this.attributes=[],this.fragment=new yb({root:e.root,owner:this,template:[t]})};Tm.prototype={bubble:function(){if(this.node)this.update();this.element.bubble()},rebind:function(e,t){this.fragment.rebind(e,t)},render:function(e){this.node=e,this.isSvg=e.namespaceURI===ia.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var e,t,n=this;e=this.fragment.toString(),t=er(e,this.isSvg),this.attributes.filter(function(e){return tr(t,e)}).forEach(function(e){n.node.removeAttribute(e.name)}),t.forEach(function(e){n.node.setAttribute(e.name,e.value)}),this.attributes=t},toString:function(){return this.fragment.toString()}};var Fm=Tm,Rm=function(e,t){if(!t)return[];else return t.map(function(t){return new Fm(e,t)})},jm=function(e){var t,n,i,r;if(this.element=e,this.root=e.root,this.attribute=e.attributes[this.name||"value"],t=this.attribute.interpolator,t.twowayBinding=this,n=t.keypath){if("}"===n.str.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",t.resolver.uniqueString,e.name,{ractive:this.root}),!1;if(n.isSpecial)return v("Two-way binding does not work with %s",t.resolver.ref,{ractive:this.root}),!1}else{var s=t.template.r?"'"+t.template.r+"' reference":"expression";m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",s,{ractive:this.root}),t.resolver.forceResolution(),n=t.keypath}if(this.attribute.isTwoway=!0,this.keypath=n,i=this.root.viewmodel.get(n),void 0===i&&this.getInitialValue)if(i=this.getInitialValue(),void 0!==i)this.root.viewmodel.set(n,i);if(r=nr(e))this.resetValue=i,r.formBindings.push(this)};jm.prototype={handleChange:function(){var e=this;mu.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),mu.scheduleTask(function(){return e.attribute.locked=!1}),mu.end()},rebound:function(){var e,t,n;if(t=this.keypath,n=this.attribute.interpolator.keypath,t!==n)I(this.root._twowayBindings[t.str],this),this.keypath=n,e=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),e.push(this)},unbind:function(){}},jm.extend=function(e){var t,n=this;return t=function(e){if(jm.call(this,e),this.init)this.init()},t.prototype=wa(n.prototype),i(t.prototype,e),t.extend=jm.extend,t};var Nm,Dm=jm,Im=ir;Nm=Dm.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var e,t=this.element.node,n=!1;if(this.rendered=!0,e=this.root.lazy,this.element.lazy===!0)e=!0;else if(this.element.lazy===!1)e=!1;else if(u(this.element.lazy))e=!1,n=+this.element.lazy;else if(u(e||""))n=+e,e=!1,this.element.lazy=n;if(this.handler=n?sr:Im,t.addEventListener("change",Im,!1),!e)if(t.addEventListener("input",this.handler,!1),t.attachEvent)t.addEventListener("keyup",this.handler,!1);t.addEventListener("blur",rr,!1)},unrender:function(){var e=this.element.node;this.rendered=!1,e.removeEventListener("change",Im,!1),e.removeEventListener("input",this.handler,!1),e.removeEventListener("keyup",this.handler,!1),e.removeEventListener("blur",rr,!1)}});var Lm=Nm,Vm=Lm.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},getValue:function(){return this.element.node.innerHTML}}),Um=Vm,Mm=or,Wm={},zm=Dm.extend({name:"checked",init:function(){this.siblings=Mm(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var e=this.element.node;if(e.addEventListener("change",Im,!1),e.attachEvent)e.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},handleChange:function(){mu.start(this.root),this.siblings.forEach(function(e){e.root.viewmodel.set(e.keypath,e.getValue())}),mu.end()},getValue:function(){return this.element.node.checked},unbind:function(){I(this.siblings,this)}}),Bm=zm,qm=Dm.extend({name:"name",init:function(){this.siblings=Mm(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){if(this.element.getAttribute("checked"))return this.element.getAttribute("value");else return void 0},render:function(){var e=this.element.node;if(e.name="{{"+this.keypath.str+"}}",e.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),e.addEventListener("change",Im,!1),e.attachEvent)e.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},getValue:function(){var e=this.element.node;return e._ractive?e._ractive.value:e.value},handleChange:function(){if(this.element.node.checked)Dm.prototype.handleChange.call(this)},rebound:function(e,t){var n;if(Dm.prototype.rebound.call(this,e,t),n=this.element.node)n.name="{{"+this.keypath.str+"}}"},unbind:function(){I(this.siblings,this)}}),$m=qm,Qm=Dm.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var e,t;if(this.checkboxName=!0,this.siblings=Mm(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue)this.siblings.noInitialValue=!0;if(this.siblings.noInitialValue&&this.element.getAttribute("checked"))e=this.root.viewmodel.get(this.keypath),t=this.element.getAttribute("value"),e.push(t)},unbind:function(){I(this.siblings,this)},render:function(){var e,t,n=this.element.node;if(e=this.root.viewmodel.get(this.keypath),t=this.element.getAttribute("value"),s(e))this.isChecked=R(e,t);else this.isChecked=e==t;if(n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",Im,!1),n.attachEvent)n.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},changed:function(){var e=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===e},handleChange:function(){this.isChecked=this.element.node.checked,Dm.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(ar).map(ur)}}),Zm=Qm,Hm=Dm.extend({name:"checked",render:function(){var e=this.element.node;if(e.addEventListener("change",Im,!1),e.attachEvent)e.addEventListener("click",Im,!1)},unrender:function(){var e=this.element.node;e.removeEventListener("change",Im,!1),e.removeEventListener("click",Im,!1)},getValue:function(){return this.element.node.checked}}),Km=Hm,Gm=Dm.extend({getInitialValue:function(){var e,t,n,i,r=this.element.options;if(void 0===this.element.getAttribute("value"))if(t=e=r.length,e){for(;t--;)if(r[t].getAttribute("selected")){n=r[t].getAttribute("value"),i=!0;break}if(!i)for(;++t<e;)if(!r[t].getAttribute("disabled")){n=r[t].getAttribute("value");break}if(void 0!==n)this.element.attributes.value.value=n;return n}},render:function(){this.element.node.addEventListener("change",Im,!1)},unrender:function(){this.element.node.removeEventListener("change",Im,!1)},setValue:function(e){this.root.viewmodel.set(this.keypath,e)},getValue:function(){var e,t,n,i,r;for(e=this.element.node.options,n=e.length,t=0;n>t;t+=1)if(i=e[t],e[t].selected)return r=i._ractive?i._ractive.value:i.value},forceUpdate:function(){var e=this,t=this.getValue();if(void 0!==t)this.attribute.locked=!0,mu.scheduleTask(function(){return e.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,t)}}),Ym=Gm,Jm=Ym.extend({getInitialValue:function(){return this.element.options.filter(function(e){return e.getAttribute("selected")}).map(function(e){return e.getAttribute("value")})},render:function(){var e;if(this.element.node.addEventListener("change",Im,!1),e=this.root.viewmodel.get(this.keypath),void 0===e)this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Im,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var e,t,n,i,r,s;for(e=[],t=this.element.node.options,i=t.length,n=0;i>n;n+=1)if(r=t[n],r.selected)s=r._ractive?r._ractive.value:r.value,e.push(s);return e},handleChange:function(){var e,t,n;if(e=this.attribute,t=e.value,n=this.getValue(),void 0===t||!j(n,t))Ym.prototype.handleChange.call(this);return this},forceUpdate:function(){var e=this,t=this.getValue();if(void 0!==t)this.attribute.locked=!0,mu.scheduleTask(function(){return e.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,t)},updateModel:function(){if(void 0===this.attribute.value||!this.attribute.value.length)this.root.viewmodel.set(this.keypath,this.initialValue)}}),Xm=Jm,ev=Dm.extend({render:function(){this.element.node.addEventListener("change",Im,!1)},unrender:function(){this.element.node.removeEventListener("change",Im,!1)},getValue:function(){return this.element.node.files}}),tv=ev,nv=Lm.extend({getInitialValue:function(){return void 0},getValue:function(){var e=parseFloat(this.element.node.value);return isNaN(e)?void 0:e}}),iv=fr,rv=lr,sv=cr,ov=dr,av=pr,uv=/^event(?:\.(.+))?/,fv=yr,hv=br,lv={},cv={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},dv=xr,pv=kr,mv=Er,vv=_r,gv=Ar,yv=function(e,t,n){this.init(e,t,n)};yv.prototype={bubble:rv,fire:sv,getAction:ov,init:av,listen:hv,rebind:dv,render:pv,resolve:mv,unbind:vv,unrender:gv};var bv=yv,wv=function(e,t){var n,i,r,s,o=[];for(i in t)if(t.hasOwnProperty(i))for(r=i.split("-"),n=r.length;n--;)s=new bv(e,r[n],t[i]),o.push(s);return o},xv=function(e,t){var n,i,r,s=this;if(this.element=e,this.root=n=e.root,i=t.n||t,"string"!=typeof i)if(r=new yb({template:i,root:n,owner:e}),i=r.toString(),r.unbind(),""===i)return;if(t.a)this.params=t.a;else if(t.d)this.fragment=new yb({template:t.d,root:n,owner:e}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){if(this.dirtyArgs=this.dirtyValue=!0,s.params=this.getArgsList(),s.ready)s.update()};if(this.fn=g("decorators",n,i),!this.fn)l(Da(i,"decorator"))};xv.prototype={init:function(){var e,t,n;if(e=this.element.node,this.params)n=[e].concat(this.params),t=this.fn.apply(this.root,n);else t=this.fn.call(this.root,e);if(!t||!t.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=t,this.ready=!0},update:function(){if(this.actual.update)this.actual.update.apply(this.root,this.params);else this.actual.teardown(!0),this.init()},rebind:function(e,t){if(this.fragment)this.fragment.rebind(e,t)},teardown:function(e){if(this.torndown=!0,this.ready)this.actual.teardown();if(!e&&this.fragment)this.fragment.unbind()}};var kv,Ev,_v,Av=xv,Sv=Rr,Cv=jr,Ov=Ur,Pv=function(e){return e.replace(/-([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};if(!Xo)kv=null;else Ev={},_v=la("div").style,kv=function(e){var t,n,i;if(e=Pv(e),!Ev[e])if(void 0!==_v[e])Ev[e]=e;else for(i=e.charAt(0).toUpperCase()+e.substring(1),t=sa.length;t--;)if(n=sa[t],void 0!==_v[n+i]){Ev[e]=n+i;break}return Ev[e]};var Tv,Fv,Rv=kv;if(!Xo)Tv=null;else Fv=window.getComputedStyle||Ea.getComputedStyle,Tv=function(e){var t,n,i,r,o;if(t=Fv(this.node),"string"==typeof e){if(o=t[Rv(e)],"0px"===o)o=0;return o}if(!s(e))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=e.length;i--;){if(r=e[i],o=t[Rv(r)],"0px"===o)o=0;n[r]=o}return n};var jv=Tv,Nv=function(e,t){var n;if("string"==typeof e)this.node.style[Rv(e)]=t;else for(n in e)if(e.hasOwnProperty(n))this.node.style[Rv(n)]=e[n];return this},Dv=function(e){var t;if(this.duration=e.duration,this.step=e.step,this.complete=e.complete,"string"==typeof e.easing){if(t=e.root.easing[e.easing],!t)v(Da(e.easing,"easing")),t=Mr}else if("function"==typeof e.easing)t=e.easing;else t=Mr;this.easing=t,this.start=Xa(),this.end=this.start+this.duration,this.running=!0,yu.add(this)};Dv.prototype={tick:function(e){var t,n;if(!this.running)return!1;if(e>this.end){if(this.step)this.step(1);if(this.complete)this.complete(1);return!1}if(t=e-this.start,n=this.easing(t/this.duration),this.step)this.step(n);return!0},stop:function(){if(this.abort)this.abort();this.running=!1}};var Iv,Lv,Vv,Uv,Mv,Wv,zv,Bv,qv=Dv,$v=new RegExp("^-(?:"+sa.join("|")+")-"),Qv=function(e){return e.replace($v,"")},Zv=new RegExp("^(?:"+sa.join("|")+")([A-Z])"),Hv=function(e){var t;if(!e)return"";if(Zv.test(e))e="-"+e;return t=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},Kv={},Gv={};if(!Xo)Iv=null;else{if(Lv=la("div").style,function(){if(void 0!==Lv.transition)Vv="transition",Uv="transitionend",Mv=!0;else if(void 0!==Lv.webkitTransition)Vv="webkitTransition",Uv="webkitTransitionEnd",Mv=!0;else Mv=!1}(),Vv)Wv=Vv+"Duration",zv=Vv+"Property",Bv=Vv+"TimingFunction";Iv=function(e,t,n,i,r){setTimeout(function(){var s,o,a,u,f;u=function(){if(o&&a)e.root.fire(e.name+":end",e.node,e.isIntro),r()},s=(e.node.namespaceURI||"")+e.node.tagName,e.node.style[zv]=i.map(Rv).map(Hv).join(","),e.node.style[Bv]=Hv(n.easing||"linear"),e.node.style[Wv]=n.duration/1e3+"s",f=function(t){var n;if(n=i.indexOf(Pv(Qv(t.propertyName))),-1!==n)i.splice(n,1);if(!i.length)e.node.removeEventListener(Uv,f,!1),a=!0,u()},e.node.addEventListener(Uv,f,!1),setTimeout(function(){for(var r,h,l,c,d,p=i.length,v=[];p--;){if(c=i[p],r=s+c,Mv&&!Gv[r])if(e.node.style[Rv(c)]=t[c],!Kv[r])if(h=e.getStyle(c),Kv[r]=e.getStyle(c)!=t[c],Gv[r]=!Kv[r],Gv[r])e.node.style[Rv(c)]=h;if(!Mv||Gv[r]){if(void 0===h)h=e.getStyle(c);if(l=i.indexOf(c),-1===l)m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:e.node});else i.splice(l,1);d=/[^\d]*$/.exec(t[c])[0],v.push({name:Rv(c),interpolator:La(parseFloat(h),parseFloat(t[c])),suffix:d})}}if(v.length)new qv({root:e.root,duration:n.duration,easing:Pv(n.easing||""),step:function(t){var n,i;for(i=v.length;i--;)n=v[i],e.node.style[n.name]=n.interpolator(t)+n.suffix},complete:function(){o=!0,u()}});else o=!0;if(!i.length)e.node.removeEventListener(Uv,f,!1),a=!0,u()},0)},n.delay||0)}}var Yv,Jv,Xv,eg,tg,ng=Iv;if("undefined"!=typeof document){if(Yv="hidden",tg={},Yv in document)Xv="";else for(eg=sa.length;eg--;)if(Jv=sa[eg],Yv=Jv+"Hidden",Yv in document)Xv=Jv;if(void 0!==Xv)document.addEventListener(Xv+"visibilitychange",Wr),Wr();else{if("onfocusout"in document)document.addEventListener("focusout",zr),document.addEventListener("focusin",Br);else window.addEventListener("pagehide",zr),window.addEventListener("blur",zr),window.addEventListener("pageshow",Br),window.addEventListener("focus",Br);tg.hidden=!1}}var ig,rg,sg,og=tg;if(!Xo)ig=null;else rg=window.getComputedStyle||Ea.getComputedStyle,ig=function(e,t,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(og.hidden)return this.setStyle(e,t),sg||(sg=ou.resolve());if("string"==typeof e)i={},i[e]=t;else i=e,n=t;if(!n)v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this;var s=new ou(function(e){var t,s,o,a,u,f,h;if(!n.duration)return r.setStyle(i),void e();for(t=Object.keys(i),s=[],o=rg(r.node),u={},f=t.length;f--;){if(h=t[f],a=o[Rv(h)],"0px"===a)a=0;if(a!=i[h])s.push(h),r.node.style[Rv(h)]=a}if(!s.length)return void e();else return void ng(r,i,n,s,e)});return s};var ag=ig,ug=function(e,t){if("number"==typeof e)e={duration:e};else if("string"==typeof e)if("slow"===e)e={duration:600};else if("fast"===e)e={duration:200};else e={duration:400};else if(!e)e={};return r({},e,t)},fg=qr,hg=function(e,t,n){this.init(e,t,n)};hg.prototype={init:Ov,start:fg,getStyle:jv,setStyle:Nv,animateStyle:ag,processParams:ug};var lg,cg,dg=hg,pg=Qr;lg=function(){var e=this.node,t=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8)e.type="text/css";if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}},cg=function(){if(!this.node.type||"text/javascript"===this.node.type)m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root});this.node.text=this.fragment.toString(!1)};var mg=function(){var e,t;if(this.template.y)return"<!DOCTYPE"+this.template.dd+">";if(e="<"+this.template.e,e+=this.attributes.map(Jr).join("")+this.conditionalAttributes.map(Jr).join(""),"option"===this.name&&Gr(this))e+=" selected";if("input"===this.name&&Yr(this))e+=" checked";if(e+=">","textarea"===this.name&&void 0!==this.getAttribute("value"))e+=St(this.getAttribute("value"));else if(void 0!==this.getAttribute("contenteditable"))e+=this.getAttribute("value")||"";if(this.fragment)t="script"!==this.name&&"style"!==this.name,e+=this.fragment.toString(t);if(!wl.test(this.template.e))e+="</"+this.template.e+">";return e},vg=Xr,gg=es,yg=function(e){this.init(e)};yg.prototype={bubble:$p,detach:Qp,find:Zp,findAll:Hp,findAllComponents:Kp,findComponent:Gp,findNextNode:Yp,firstNode:Jp,getAttribute:Xp,init:Sv,rebind:Cv,render:pg,toString:mg,unbind:vg,unrender:gg};var bg=yg,wg=/^\s*$/,xg=/^\s*/,kg=function(e){var t,n,i,r;if(t=e.split("\n"),n=t[0],void 0!==n&&wg.test(n))t.shift();if(i=D(t),void 0!==i&&wg.test(i))t.pop();if(r=t.reduce(ns,null))e=t.map(function(e){return e.replace(r,"")}).join("\n");return e},Eg=is,_g=function(e,t){var n;if(!t)return e;else return n=e.split("\n").map(function(e,n){return n?t+e:e}).join("\n")},Ag='Could not find template for partial "%s"',Sg=function(e){var t,n;if(t=this.parentFragment=e.parentFragment,this.root=t.root,this.type=th,this.index=e.index,this.name=e.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,rp.init(this,e),!this.keypath)if(n=Eg(this.root,this.name,t))Dd.call(this),this.isNamed=!0,this.setTemplate(n);else v(Ag,this.name)};Sg.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){if(this.isNamed&&this.name)return this.name;else if(void 0===this.value)return this.name;else return this.value},getValue:function(){return this.fragment.getValue()},rebind:function(e,t){if(!this.isNamed)ip.call(this,e,t);if(this.fragment)this.fragment.rebind(e,t)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:rp.resolve,setValue:function(e){var t;if(void 0===e||e!==this.value){if(void 0!==e)t=Eg(this.root,""+e,this.parentFragment);if(!t&&this.name&&(t=Eg(this.root,this.name,this.parentFragment)))Dd.call(this),this.isNamed=!0;if(!t)v(Ag,this.name,{ractive:this.root});if(this.value=e,this.setTemplate(t||[]),this.bubble(),this.rendered)mu.addView(this)}},setTemplate:function(e){if(this.fragment)if(this.fragment.unbind(),this.rendered)this.fragmentToUnrender=this.fragment;this.fragment=new yb({template:e,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(e){var t,n,i,r;if(t=this.fragment.toString(e),n=this.parentFragment.items[this.index-1],!n||n.type!==Hf)return t;if(i=n.text.split("\n").pop(),r=/^\s+$/.exec(i))return _g(t,r[0]);else return t},unbind:function(){if(!this.isNamed)Dd.call(this);if(this.fragment)this.fragment.unbind()},unrender:function(e){if(this.rendered){if(this.fragment)this.fragment.unrender(e);this.rendered=!1}},update:function(){var e,t;if(this.fragmentToUnrender)this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null;if(this.fragmentToRender)this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null;if(this.rendered)e=this.parentFragment.getNode(),t=this.parentFragment.findNextNode(this),e.insertBefore(this.docFrag,t)}};var Cg,Og,Pg,Tg=Sg,Fg=us,Rg=fs,jg=new nu("detach"),Ng=hs,Dg=ls,Ig=cs,Lg=ds,Vg=ps,Ug=ms,Mg=function(e,t,n,i){var r=e.root,s=e.keypath;if(i)r.viewmodel.smartUpdate(s,t,i);else r.viewmodel.mark(s)},Wg=[],zg=["pop","push","reverse","shift","sort","splice","unshift"];if(zg.forEach(function(e){var t=function(){for(var t=arguments.length,n=Array(t),i=0;t>i;i++)n[i]=arguments[i];var r,s,o,a;for(r=vf(this,e,n),s=Array.prototype[e].apply(this,arguments),mu.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)o=this._ractive.wrappers[a],mu.addRactive(o.root),Mg(o,this,e,r);return mu.end(),this._ractive.setting=!1,s};xa(Wg,e,{value:t})}),Cg={},Cg.__proto__)Og=function(e){e.__proto__=Wg},Pg=function(e){e.__proto__=Array.prototype};else Og=function(e){var t,n;for(t=zg.length;t--;)n=zg[t],xa(e,n,{value:Wg[n],configurable:!0})},Pg=function(e){var t;for(t=zg.length;t--;)delete e[zg[t]]};Og.unpatch=Pg;var Bg,qg,$g,Qg=Og;Bg={filter:function(e){return s(e)&&(!e._ractive||!e._ractive.setting)},wrap:function(e,t,n){return new qg(e,t,n)}},qg=function(e,t,n){if(this.root=e,this.value=t,this.keypath=_(n),!t._ractive)xa(t,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Qg(t);if(!t._ractive.instances[e._guid])t._ractive.instances[e._guid]=0,t._ractive.instances.push(e);t._ractive.instances[e._guid]+=1,t._ractive.wrappers.push(this)},qg.prototype={get:function(){return this.value},teardown:function(){var e,t,n,i,r;if(e=this.value,t=e._ractive,n=t.wrappers,i=t.instances,t.setting)return!1;if(r=n.indexOf(this),-1===r)throw new Error($g);if(n.splice(r,1),!n.length)delete e._ractive,Qg.unpatch(this.value);else if(i[this.root._guid]-=1,!i[this.root._guid]){if(r=i.indexOf(this.root),-1===r)throw new Error($g);i.splice(r,1)}}},$g="Something went wrong in a rather interesting way";var Zg,Hg,Kg=Bg,Gg=/^\s*[0-9]+\s*$/,Yg=function(e){return Gg.test(e)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Zg={filter:function(e,t,n){var i,r;if(!t)return!1;if(t=_(t),(i=n.viewmodel.wrapped[t.parent.str])&&!i.magic)return!1;if(r=n.viewmodel.get(t.parent),s(r)&&/^[0-9]+$/.test(t.lastKey))return!1;else return r&&("object"==typeof r||"function"==typeof r)},wrap:function(e,t,n){return new Hg(e,t,n)}},Hg=function(e,t,n){var i,r,s;if(n=_(n),this.magic=!0,this.ractive=e,this.keypath=n,this.value=t,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?e.viewmodel.data:e.viewmodel.get(i),r=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),!(r&&r.set&&(s=r.set._ractiveWrappers)))vs(this,t,r);else if(-1===s.indexOf(this))s.push(this)},Hg.prototype={get:function(){return this.value},reset:function(e){if(!this.updating)return this.updating=!0,this.obj[this.prop]=e,mu.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0;else return void 0},set:function(e,t){if(!this.updating){if(!this.obj[this.prop])this.updating=!0,this.obj[this.prop]=Yg(e),this.updating=!1;this.obj[this.prop][e]=t}},teardown:function(){var e,t,n,i,r;if(this.updating)return!1;if(e=Object.getOwnPropertyDescriptor(this.obj,this.prop),t=e&&e.set){if(i=t._ractiveWrappers,r=i.indexOf(this),-1!==r)i.splice(r,1);if(!i.length)n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n}}}}catch(_a){Zg=!1}var Jg,Xg,ey=Zg;if(ey)Jg={filter:function(e,t,n){return ey.filter(e,t,n)&&Kg.filter(e)},wrap:function(e,t,n){return new Xg(e,t,n)}},Xg=function(e,t,n){this.value=t,this.magic=!0,this.magicWrapper=ey.wrap(e,t,n),this.arrayWrapper=Kg.wrap(e,t,n)},Xg.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(e){return this.magicWrapper.reset(e)}};var ty=Jg,ny=gs,iy={},ry=ws,sy=xs,oy=_s,ay=Ps,uy=Ts,fy=function(e,t){this.computation=e,this.viewmodel=e.viewmodel,this.ref=t,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};fy.prototype={resolve:function(e){this.computation.softDeps.push(e),this.computation.unresolvedDeps[e.str]=null,this.viewmodel.register(e,this.computation,"computed")}};var hy=fy,ly=function(e,t){this.key=e,this.getter=t.getter,this.setter=t.setter,this.hardDeps=t.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};ly.prototype={constructor:ly,init:function(e){var t,n=this;if(this.viewmodel=e,this.bypass=!0,t=e.get(this.key),e.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==t)this.set(t);if(this.hardDeps)this.hardDeps.forEach(function(t){return e.register(t,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var e,t,n=this,i=!1;if(this.getting){var r="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return p(r),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length)i=!0;else[this.hardDeps,this.softDeps].forEach(function(e){var t,r,s;if(!i)for(s=e.length;s--;)if(t=e[s],r=n.viewmodel.get(t),!a(r,n.depValues[t.str]))return n.depValues[t.str]=r,void(i=!0)});if(i){this.viewmodel.capture();try{this.value=this.getter()}catch(s){m('Failed to compute "%s"',this.key.str),c(s.stack||s),this.value=void 0}if(e=this.viewmodel.release(),t=this.updateDependencies(e))[this.hardDeps,this.softDeps].forEach(function(e){e.forEach(function(e){n.depValues[e.str]=n.viewmodel.get(e)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(e){if(this.setting)return void(this.value=e);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(e)},updateDependencies:function(e){var t,n,i,r,s;for(n=this.softDeps,t=n.length;t--;)if(i=n[t],-1===e.indexOf(i))r=!0,this.viewmodel.unregister(i,this,"computed");for(t=e.length;t--;)if(i=e[t],-1===n.indexOf(i)&&(!this.hardDeps||-1===this.hardDeps.indexOf(i)))if(r=!0,Fs(this.viewmodel,i)&&!this.unresolvedDeps[i.str])s=new hy(this,i.str),e.splice(t,1),this.unresolvedDeps[i.str]=s,mu.addUnresolved(s);else this.viewmodel.register(i,this,"computed");if(r)this.softDeps=e.slice();return r}};var cy=ly,dy=Rs,py={FAILED_LOOKUP:!0},my=js,vy={},gy=Ds,yy=Is,by=function(e,t){this.localKey=e,this.keypath=t.keypath,this.origin=t.origin,this.deps=[],this.unresolved=[],this.resolved=!1};by.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(e,t){if(!this.resolved)return void 0;else return this.origin.get(this.map(e),t)},getValue:function(){if(!this.keypath)return void 0;else return this.origin.get(this.keypath)},initViewmodel:function(e){this.local=e,this.setup()},map:function(e){if(void 0===typeof this.keypath)return this.localKey;else return e.replace(this.localKey,this.keypath)},register:function(e,t,n){if(this.deps.push({keypath:e,dep:t,group:n}),this.resolved)this.origin.register(this.map(e),t,n)},resolve:function(e){if(void 0!==this.keypath)this.unbind(!0);

this.keypath=e,this.setup()},set:function(e,t){if(!this.resolved)this.forceResolution();this.origin.set(this.map(e),t)},setup:function(){var e=this;if(void 0!==this.keypath)if(this.resolved=!0,this.deps.length)this.deps.forEach(function(t){var n=e.map(t.keypath);if(e.origin.register(n,t.dep,t.group),t.dep.setValue)t.dep.setValue(e.origin.get(n));else if(t.dep.invalidate)t.dep.invalidate();else throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!")}),this.origin.mark(this.keypath)},setValue:function(e){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,e)},unbind:function(e){var t=this;if(!e)delete this.local.mappings[this.localKey];if(this.resolved)if(this.deps.forEach(function(e){t.origin.unregister(t.map(e.keypath),e.dep,e.group)}),this.tracker)this.origin.unregister(this.keypath,this.tracker)},unregister:function(e,t,n){var i,r;if(this.resolved){for(i=this.deps,r=i.length;r--;)if(i[r].dep===t){i.splice(r,1);break}this.origin.unregister(this.map(e),t,n)}}};var wy=Ls,xy=function(e,t){var n,i,r,s;return n={},i=0,r=e.map(function(e,r){var o,a,u;a=i,u=t.length;do{if(o=t.indexOf(e,a),-1===o)return s=!0,-1;a=o+1}while(n[o]&&u>a);if(o===i)i+=1;if(o!==r)s=!0;return n[o]=!0,o})},ky=Vs,Ey={},_y=Ws,Ay=Bs,Sy=qs,Cy=$s,Oy=Zs,Py={implicit:!0},Ty={noCascade:!0},Fy=Ks,Ry=Gs,jy=function(e){var t,n,i=e.adapt,r=e.data,s=e.ractive,o=e.computed,a=e.mappings;this.ractive=s,this.adaptors=i,this.onchange=e.onchange,this.cache={},this.cacheMap=wa(null),this.deps={computed:wa(null),"default":wa(null)},this.depsMap={computed:wa(null),"default":wa(null)},this.patternObservers=[],this.specials=wa(null),this.wrapped=wa(null),this.computations=wa(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=r,this.mappings=wa(null);for(t in a)this.map(_(t),a[t]);if(r)for(t in r)if((n=this.mappings[t])&&void 0===n.getValue())n.setValue(r[t]);for(t in o){if(a&&t in a)l("Cannot map to a computed property ('%s')",t);this.compute(_(t),o[t])}this.ready=!0};jy.prototype={adapt:ny,applyChanges:oy,capture:ay,clearCache:uy,compute:dy,get:my,init:gy,map:yy,mark:wy,merge:ky,register:_y,release:Ay,reset:Sy,set:Cy,smartUpdate:Oy,teardown:Fy,unregister:Ry};var Ny=jy;Js.prototype={constructor:Js,begin:function(e){this.inProcess[e._guid]=!0},end:function(e){var t=e.parent;if(!t||!this.inProcess[t._guid])eo(this,e);else Xs(this.queue,t).push(e);delete this.inProcess[e._guid]}};var Dy=Js,Iy=to,Ly=/\$\{([^\}]+)\}/g,Vy=new nu("construct"),Uy=new nu("config"),My=new Dy("init"),Wy=0,zy=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],By=so,qy=ho;ho.prototype={bubble:function(){if(!this.dirty)this.dirty=!0,mu.addView(this)},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(e,t){this.fragment.rebind(e,t)},unbind:function(){this.fragment.unbind()}};var $y=function(e,t,n,r,o){var a,u,f,h,l,c,d={},p={},v={},g=[];if(u=e.parentFragment,f=e.root,o=o||{},i(d,o),o.content=r||[],d[""]=o.content,t.defaults.el)m("The <%s/> component has a default `el` property; it has been disregarded",e.name);for(h=u;h;){if(h.owner.type===ah){l=h.owner.container;break}h=h.parent}if(n)Object.keys(n).forEach(function(t){var i,r,o=n[t];if("string"==typeof o)i=Ac(o),p[t]=i?i.value:o;else if(0===o)p[t]=!0;else if(s(o)){if(co(o))v[t]={origin:e.root.viewmodel,keypath:void 0},r=lo(e,o[0],function(e){if(e.isSpecial)if(c)a.set(t,e.value);else p[t]=e.value,delete v[t];else if(c)a.viewmodel.mappings[t].resolve(e);else v[t].keypath=e});else r=new qy(e,o,function(e){if(c)a.set(t,e);else p[t]=e});g.push(r)}else throw new Error("erm wut")});return a=wa(t.prototype),By(a,{el:null,append:!0,data:p,partials:o,magic:f.magic||t.defaults.magic,modifyArrays:f.modifyArrays,adapt:f.adapt},{parent:f,component:e,container:l,mappings:v,inlinePartials:d,cssIds:u.cssIds}),c=!0,e.resolvers=g,a},Qy=po,Zy=function(e){var t,n;for(t=e.root;t;){if(n=t._liveComponentQueries["_"+e.name])n.push(e.instance);t=t.parent}},Hy=vo,Ky=go,Gy=yo,Yy=bo,Jy=wo,Xy=new nu("teardown"),eb=ko,tb=function(e,t){this.init(e,t)};tb.prototype={detach:Rg,find:Ng,findAll:Dg,findAllComponents:Ig,findComponent:Lg,findNextNode:Vg,firstNode:Ug,init:Hy,rebind:Ky,render:Gy,toString:Yy,unbind:Jy,unrender:eb};var nb=tb,ib=function(e){this.type=nh,this.value=e.template.c};ib.prototype={detach:Rd,firstNode:function(){return this.node},render:function(){if(!this.node)this.node=document.createComment(this.value);return this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(e){if(e)this.node.parentNode.removeChild(this.node)}};var rb=ib,sb=function(e){var t,n;this.type=ah,this.container=t=e.parentFragment.root,this.component=n=t.component,this.container=t,this.containerFragment=e.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=e.template.n||"",r=t._inlinePartials[i];if(!r)m('Could not find template for partial "'+i+'"',{ractive:e.root}),r=[];if(this.fragment=new yb({owner:this,root:t.parent,template:r,pElement:this.containerFragment.pElement}),!s(n.yielders[i]))n.yielders[i]=[this];else n.yielders[i].push(this);mu.scheduleTask(function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};sb.prototype={detach:function(){return this.fragment.detach()},find:function(e){return this.fragment.find(e)},findAll:function(e,t){return this.fragment.findAll(e,t)},findComponent:function(e){return this.fragment.findComponent(e)},findAllComponents:function(e,t){return this.fragment.findAllComponents(e,t)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(e){return this.fragment.getValue(e)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(e){this.fragment.unrender(e),I(this.component.yielders[this.name],this)},rebind:function(e,t){this.fragment.rebind(e,t)},toString:function(){return this.fragment.toString()}};var ob=sb,ab=function(e){this.declaration=e.template.a};ab.prototype={init:Fa,render:Fa,unrender:Fa,teardown:Fa,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var ub=ab,fb=Eo,hb=Ao,lb=So,cb=Co,db=To,pb=Ro,mb=function(e){this.init(e)};mb.prototype={bubble:wd,detach:xd,find:kd,findAll:Ed,findAllComponents:_d,findComponent:Ad,findNextNode:Sd,firstNode:Cd,getArgsList:Pd,getNode:Td,getValue:Fd,init:fb,rebind:hb,registerIndexRef:function(e){var t=this.registeredIndexRefs;if(-1===t.indexOf(e))t.push(e)},render:lb,toString:cb,unbind:db,unregisterIndexRef:function(e){var t=this.registeredIndexRefs;t.splice(t.indexOf(e),1)},unrender:pb};var vb,gb,yb=mb,bb=jo,wb=["template","partials","components","decorators","events"],xb=new nu("reset"),kb=function(e,t){function n(t,i,r){if(!r||!r.partials[e])t.forEach(function(t){if(t.type===th&&t.getPartialName()===e)i.push(t);if(t.fragment)n(t.fragment.items,i,r);if(s(t.fragments))n(t.fragments,i,r);else if(s(t.items))n(t.items,i,r);else if(t.type===oh&&t.instance)n(t.instance.fragment.items,i,t.instance);if(t.type===eh){if(s(t.attributes))n(t.attributes,i,r);if(s(t.conditionalAttributes))n(t.conditionalAttributes,i,r)}})}var i,r=[];return n(this.fragment.items,r),this.partials[e]=t,i=mu.start(this,!0),r.forEach(function(t){t.value=void 0,t.setValue(e)}),mu.end(),i},Eb=No,_b=yf("reverse"),Ab=Do,Sb=yf("shift"),Cb=yf("sort"),Ob=yf("splice"),Pb=Lo,Tb=Vo,Fb=new nu("teardown"),Rb=Mo,jb=Wo,Nb=zo,Db=new nu("unrender"),Ib=yf("unshift"),Lb=Bo,Vb=new nu("update"),Ub=qo,Mb={add:Ga,animate:xu,detach:Eu,find:Au,findAll:Nu,findAllComponents:Du,findComponent:Iu,findContainer:Lu,findParent:Vu,fire:zu,get:Bu,insert:$u,merge:Zu,observe:ff,observeOnce:hf,off:df,on:pf,once:mf,pop:bf,push:wf,render:Cf,reset:bb,resetPartial:kb,resetTemplate:Eb,reverse:_b,set:Ab,shift:Sb,sort:Cb,splice:Ob,subtract:Pb,teardown:Tb,toggle:Rb,toHTML:jb,toHtml:jb,unrender:Nb,unshift:Ib,update:Lb,updateModel:Ub},Wb=function(e,t,n){if(n||Qo(e,t))return function(){var n,i="_super"in this,r=this._super;if(this._super=t,n=e.apply(this,arguments),i)this._super=r;return n};else return e},zb=Zo,Bb=Yo,qb=function(e){var t,n,i={};if(!e||!(t=e._ractive))return i;if(i.ractive=t.root,i.keypath=t.keypath.str,i.index={},n=qd(t.proxy.parentFragment))i.index=qd.resolve(n);return i};vb=function(e){if(!(this instanceof vb))return new vb(e);else return void By(this,e)},gb={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Bb},getNodeInfo:{value:qb},parse:{value:Kc},Promise:{value:ou},svg:{value:ra},magic:{value:na},VERSION:{value:"0.7.3"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:fa},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Ua},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},ka(vb,gb),vb.prototype=i(Mb,ua),vb.prototype.constructor=vb,vb.defaults=vb.prototype;var $b="function";if(typeof Date.now!==$b||typeof String.prototype.trim!==$b||typeof Object.keys!==$b||typeof Array.prototype.indexOf!==$b||typeof Array.prototype.forEach!==$b||typeof Array.prototype.map!==$b||typeof Array.prototype.filter!==$b||"undefined"!=typeof window&&typeof window.addEventListener!==$b)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");var Qb=vb;return vb.DEBUG=/unminified/.test(function(){}),Qb});